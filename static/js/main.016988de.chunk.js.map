{"version":3,"sources":["assets/map.png","redux/slices/navigation.ts","constans/index.ts","redux/slices/search.ts","API/constants.ts","API/schedule.ts","API/user.ts","API/group.ts","API/index.ts","API/profile.ts","utils/getTimeByLesson.ts","utils/normalizeLesson.ts","utils/selectDay.ts","utils/currentDay.ts","utils/currentWeek.ts","utils/currentLesson.ts","utils/useLastSchedules.ts","utils/getBackgrounds.ts","redux/slices/schedule.ts","redux/slices/profile.ts","redux/rootReducer.ts","redux/store.ts","components/Title/index.tsx","components/Lesson/index.tsx","components/DayCard/index.tsx","components/Cell/SingleCell.tsx","components/Cell/HalfCell.tsx","components/Cell/QuarterCell.tsx","components/FullSchedule/index.tsx","utils/fullSchedule.ts","components/TabsSchedule/index.tsx","components/ByDay/index.tsx","panels/Schedule/MenuItemIcon.tsx","panels/Schedule/index.tsx","utils/getDiff.ts","panels/Profile/index.tsx","utils/toEnd.ts","panels/Map/index.tsx","panels/Search/index.tsx","components/StaticsLesson/index.tsx","utils/getStatsLesson.ts","App.tsx","panels/Sleep/index.tsx","components/Switcher/index.tsx","index.tsx"],"names":["module","exports","initialState","story","panels","schedule","profile","navigationSlice","createSlice","name","reducers","changeStory","state","action","payload","changePanel","panel","actions","searchSlice","query","loading","setQuery","setLoading","BASE_URL","process","requestSchedule","href","a","id","replace","url","fetch","res","json","requestUser","registerUser","opts","method","headers","addGroup","uid","group","body","JSON","stringify","delGroup","requestEvents","getTimeByLesson","normalizeLesson","lesson","time","coords","j","k","place","type","subject","fromWhoms","selectDay","lessons","day","week","filter","l","i","z","map","currentDay","Date","getDay","currentWeek","now","ms","getTime","d","weeks","date","start","end","currentLesson","split","sh","sm","lessonStart","setHours","eh","em","lessonEnd","n","useLastSchedules","limit","lsLast","localStorage","getItem","last","parse","setLast","s","filterLast","length","fw","newLast","setItem","createBackground","from","to","createAsyncThunk","thunkAPI","schedules","getState","find","uniq","API","data","activeMode","text","isDiff","activeSubject","error","activeSchedule","history","scheduleSlice","changeMode","changeDay","changeWeek","setSubject","setIsDiff","popHistory","pop","newActiveHref","exams","clearHistory","extraReducers","builder","addCase","pending","meta","arg","add","push","rejected","fulfilled","user","profileSlice","events","loadingEvents","errorEvents","userId","loadingUser","errorUser","myGroup","bgs","count","BACKGROUNDS","Math","floor","random","splice","bg","getBackgrounds","e","background","rootReducer","combineReducers","navigation","search","store","configureStore","reducer","Title","title","mySchedule","className","height","width","fill","Lesson","current","infoShow","dispatch","useDispatch","t","key","onClick","getStats","style","marginLeft","DayCard","undefined","SingleCell","column","row","w","cn","join","gridRow","gridColumn","HalfCell","isHalf","grid","QuarterCell","HEADERS","TIME","FullSchedule","lastLessonNum","reduce","max","lessonNum","full","forEach","dayId","lessonId","children","fullSchedule","gridTemplateRows","slice","h","cells","isHalfQuarter","isQuarter","Object","values","c","DAYS","TabsSchedule","mode","fontSize","color","selected","ByDay","useSelector","slideIndex","onChange","MenuItemIcon","MENU","Schedule","React","useState","menuOpened","setMenuOpened","toggleMenu","diff","useMemo","b","console","log","la","lb","dayEqual","lessonNumEqual","weekEqual","groupEqual","isEqual","getDiff","left","transform","opened","onClose","item","notExams","examsSelected","myGroupSave","notMyGroupDelete","withoutDiff","withDiff","ownDiff","notUserGroup","before","requestAnimationFrame","selectMenuItem","asideContent","stretched","Profile","toEnd","total","goToSchedule","separator","header","margin","value","marginTop","size","includes","Map","src","alt","SearchPanel","filterSearch","toLowerCase","searchResult","setSearchResult","useEffect","tid","setTimeout","clearTimeout","vertical","placeholder","currentTarget","after","TYPE_LESSON","lec","pr","lab","StaticsLesson","closeModal","byWeek","dd","currentWeekIndex","findIndex","_","stats","getStatsLesson","activeModal","dynamicContentHeight","right","entries","entrie","App","changeActiveStory","newStory","dataset","bridge","send","userData","init","activeStory","tabbar","data-story","activePanel","modal","popout","Sleep","icon","Switcher","hours","getUTCHours","subscribe","detail","document","setAttribute","scheme","ReactDOM","render","getElementById"],"mappings":"mGAAAA,EAAOC,QAAU,k8P,koBCiBXC,EAAiC,CACrCC,MCjB2B,UDkB3BC,OAAS,CACPC,SCjBwB,SDkBxBC,QChByB,YDoBvBC,EAAkBC,YAAY,CAClCC,KAAO,aACPP,eACAQ,SAAW,CACTC,YADS,SACGC,EAAOC,GAEjBD,EAAMT,MAAQU,EAAOC,SAEvBC,YALS,SAKGH,EAAOC,GAClB,IAAD,EAC2BA,EAAOC,QAAxBX,EADV,EACUA,MAAOa,EADjB,EACiBA,MACF,aAAVb,EACDS,EAAMR,OAAOC,SAAWW,EACR,YAAVb,IACNS,EAAMR,OAAOE,QAAUU,O,EAKaT,EAAgBU,QAA7CN,E,EAAAA,YAAaI,E,EAAAA,YACbR,IAAf,QEhCMW,EAAcV,YAAY,CAC9BC,KAAO,SACPP,aAPiC,CACjCiB,MAAQ,GACRC,SAAU,GAMVV,SAAW,CACTW,SADS,SACAT,EAAOC,GAEdD,EAAMO,MAAQN,EAAOC,SAEvBQ,WALS,SAKEV,EAAOC,GAEhBD,EAAMQ,QAAUP,EAAOC,Y,EAKWI,EAAYD,QAArCI,E,EAAAA,SAAUC,E,EAAAA,WACVJ,IAAf,Q,yBC7BaK,EAAWC,+CCEXC,EAAe,uCAAG,WAAOC,GAAP,mBAAAC,EAAA,6DACvBC,EAAKF,EAAKG,QAAQ,UAAU,IAAIA,QAAQ,IAAI,KAC5CC,EAFuB,UAEdP,EAFc,qBAEOK,GAFP,SAGXG,MAAMD,GAHK,cAGvBE,EAHuB,yBAKtBA,EAAIC,QALkB,2CAAH,sDCAfC,EAAW,uCAAG,WAAON,GAAP,iBAAAD,EAAA,6DACnBG,EADmB,UACVP,EADU,iBACOK,GADP,SAEPG,MAAMD,GAFC,cAEnBE,EAFmB,yBAIlBA,EAAIC,QAJc,2CAAH,sDAOXE,EAAY,uCAAG,WAAOP,GAAP,mBAAAD,EAAA,6DACpBG,EADoB,UACXP,EADW,iBACMK,GAC1BQ,EAAO,CACXC,OAAS,OACTC,QAAU,CAAC,eAAgB,mCAJH,SAMRP,MAAMD,EAAKM,GANH,cAMpBJ,EANoB,yBAQnBA,EAAIC,QARe,2CAAH,sDCPZM,EAAQ,uCAAG,qCAAAZ,EAAA,6DAAQa,EAAR,EAAQA,IAAKC,EAAb,EAAaA,MAC7BX,EADgB,UACPP,EADO,eAEhBa,EAAO,CACXC,OAAS,MACTC,QAAU,CAAC,eAAgB,kCAC3BI,KAAOC,KAAKC,UAAU,CAACJ,MAAKC,WALR,SAOJV,MAAMD,EAAKM,GAPP,cAOhBJ,EAPgB,yBASfA,EAAIC,QATW,2CAAH,sDCGN,GACbR,kBACAS,cACAW,SDMmB,uCAAG,WAAOL,GAAP,mBAAAb,EAAA,6DAChBG,EADgB,UACPP,EADO,eAEhBa,EAAO,CACXC,OAAS,SACTC,QAAU,CAAC,eAAgB,kCAC3BI,KAAOC,KAAKC,UAAU,CAACJ,SALH,SAOJT,MAAMD,EAAKM,GAPP,cAOhBJ,EAPgB,yBASfA,EAAIC,QATW,2CAAH,sDCLnBa,cCPwB,uCAAG,8BAAAnB,EAAA,6DACrBG,EADqB,UACZP,EADY,oBAETQ,MAAMD,GAFG,cAErBE,EAFqB,gBAIdA,EAAIC,OAJU,mFAAH,qDDQxBE,eACAI,YETWQ,EAAkB,SAACnB,GAC9B,MAAO,CACL,CAAC,QAAS,SACV,CAAC,QAAS,SACV,CAAC,QAAS,SACV,CAAC,QAAS,SACV,CAAC,QAAS,SACV,CAAC,QAAS,SACV,CAAC,QAAS,SACV,CAAC,QAAS,UACVA,ICRSoB,EAAkB,SAACC,GAC9B,IAAMC,EAAOH,EAAgBE,EAAOE,OAAOC,GAErCX,EAA4B,IAApBQ,EAAOE,OAAOE,EAAd,WAA4BJ,EAAOE,OAAOE,EAAI,EAA9C,mBAAyD,GAEvE,MAAO,CACLC,MAAQL,EAAOK,MACfC,KAAON,EAAOM,KACdC,QAAO,UAAMP,EAAOO,SAAb,OAAuBf,GAC9BgB,UAAYR,EAAOQ,UACnBP,SCVSQ,EAAY,SACvBC,EACAC,EACAC,GAEA,OAAOF,EAAQG,QAAO,SAAAC,GAAM,IAAD,EACRA,EAAEZ,OAAXa,EADiB,EACjBA,EAAGC,EADc,EACdA,EAEX,OAAOD,IAAMJ,IAAQK,IAAMJ,GAAc,IAANI,MAClCC,IAAIlB,ICXImB,EAAa,WACxB,IAAMvC,GAAK,IAAIwC,MAAOC,SAEtB,OAAQzC,EAAK,EAAIA,EAAK,EAAIA,G,gBCDf0C,EAAc,WACzB,IAAMC,EAAM,IAAIH,KACVI,EAAKD,EAAIE,UACTC,EAAIH,EAAIF,SAERR,EAAOc,EAAMb,QAAO,gCAAEc,KAAF,GAAUC,EAAV,KAAiBC,EAAjB,YAA2BN,GAAMK,GAASL,GAAMM,KAAK,GAAGjB,KAElF,OAAc,IAANa,EAAUb,EAAiB,IAATA,EAAa,EAAI,GCPhCkB,EAAgB,SAAC7B,EAAiBU,EAAWC,GACxD,IAAMU,EAAM,IAAIH,KAEhB,GAAGG,EAAIF,WAAaT,EAAM,GAAKC,IAASS,IACxC,CACE,IADF,cAGuBpB,EAHvB,GAGS2B,EAHT,KAGgBC,EAHhB,OAImBD,EAAMG,MAAM,KAAKd,KAAI,SAAAQ,GAAC,OAAKA,KAJ9C,mBAISO,EAJT,KAIaC,EAJb,KAKQC,GAAc,IAAIf,MAAOgB,SAASH,EAAIC,GAJ5B,IADlB,EAMmBJ,EAAIE,MAAM,KAAKd,KAAI,SAAAQ,GAAC,OAAKA,KAN5C,mBAMSW,EANT,KAMaC,EANb,KAOQC,GAAY,IAAInB,MAAOgB,SAASC,EAAIC,GAEpCE,EAAIjB,EAAIE,UAEd,OAAOU,GAAeK,GAAKA,GAAKD,EAGlC,OAAO,G,QCpBIE,EAAmB,SAACC,GAC/B,IAEMC,EAASC,aAAaC,QAFL,iBAGjBC,EAAoBH,EAAShD,KAAKoD,MAAMJ,GAAU,GAaxD,MAAO,CAAEG,OAAME,QAXC,SAACC,GACf,IAIMC,EAAaJ,EAAKhC,OAAOgC,EAAKK,OAAST,EAFxB,SAACU,GAAD,OAAmBA,EAAG1E,KAAKG,QAAQ,IAAK,MAAQoE,EAAEvE,KAAKG,QAAQ,IAAK,KAFlE,SAACuE,EAAepC,GAAhB,OACrBoC,EAAG1E,KAAKG,QAAQ,IAAK,MAAQoE,EAAEvE,KAAKG,QAAQ,IAAK,KAAOmC,IAAM8B,EAAKK,OAAS,IAIxEE,EAAO,CAAIJ,GAAJ,mBAAUC,IAEvBN,aAAaU,QAbQ,gBAagB3D,KAAKC,UAAUyD,OChBlDE,EAAmB,SAACC,EAAeC,GAAhB,uCACGD,EADH,gBACeC,EADf,WC4CZhF,EAAkBiF,YAC7B,mBAD6C,uCAE7C,aAAsCC,GAAtC,qBAAAhF,EAAA,yDAAQD,EAAR,EAAQA,KACAkF,EAAaD,EAASE,WAAyBxG,SAASuG,YACxDvG,EAAWuG,EAAUE,MAAK,SAAAb,GAAC,OAAIA,EAAEvE,OAASA,EAAKG,QAAQ,IAAK,QAFpE,yCAIsB,CAAEkF,MAAO,EAAO1G,aAJtC,uBAMqB2G,EAAIvF,gBAAgBC,GANzC,cAMQuF,EANR,yBAOS,CAAEF,MAAO,EAAM1G,SAAW4G,IAPnC,2CAF6C,yDAazC/G,EAA+B,CACnCgH,WAAa,CAAEC,KAAO,wCAAWvF,GAAK,UACtCwF,QAAS,EACTxD,IAAMO,IACNN,KAAOS,IACP+C,cAAgB,KAChBjG,SAAU,EACVkG,OAAQ,EACRC,eAAiB,KACjBX,UAAY,GACZY,QAAU,IAGNC,EAAgBjH,YAAY,CAChCC,KAAO,WACPP,eACAQ,SAAW,CACTgH,WADS,SACE9G,EAAOC,GAEhBD,EAAMsG,WAAarG,EAAOC,SAE5B6G,UALS,SAKC/G,EAAOC,GAEfD,EAAMgD,IAAM/C,EAAOC,SAErB8G,WATS,SASEhH,EAAOC,GAEhBD,EAAMiD,KAAOhD,EAAOC,SAEtB+G,WAbS,SAaEjH,EAAOC,GAEhBD,EAAMyG,cAAgBxG,EAAOC,SAE/BgH,UAjBS,SAiBClH,EAAOC,GAEfD,EAAMwG,OAASvG,EAAOC,SAExBiH,WArBS,SAqBEnH,GAIT,GAFAA,EAAMwG,QAAS,EACfxG,EAAM4G,QAAQQ,MACc,IAAzBpH,EAAM4G,QAAQrB,OACjB,CACE,IAAM8B,EAAgBrH,EAAM4G,QAAQ5G,EAAM4G,QAAQrB,OAAS,GACrD9F,EAAWO,EAAMgG,UAAUE,MAAK,SAAAb,GAAC,OAAIA,EAAEvE,OAASuG,KAElD5H,EAAS6H,OAAiC,UAAxBtH,EAAMsG,WAAWtF,KACrChB,EAAMsG,WAAahH,EAAagH,YAElCtG,EAAM2G,eAAiBlH,IAG3B8H,aApCS,SAoCIvH,GAEXA,EAAM4G,QAAU,GAChB5G,EAAMwG,QAAS,IAGnBgB,cA7CgC,SA6ClBC,GAEZA,EACGC,QAAQ7G,EAAgB8G,SAAQ,SAAC3H,EAAOC,GACvCD,EAAMQ,SAAU,EAChBR,EAAM0G,OAAQ,EACd1G,EAAM2G,eAAiB,KAH2B,MAKrB1G,EAAO2H,KAAKC,IALS,IAK1CC,WAL0C,SAK9BhH,EAL8B,EAK9BA,KACjBgH,GACD9H,EAAM4G,QAAQmB,KAAKjH,EAAKG,QAAQ,IAAK,QAExCyG,QAAQ7G,EAAgBmH,UAAS,SAAChI,GACjCA,EAAMQ,SAAU,EAChBR,EAAM0G,OAAQ,EACd1G,EAAMwG,QAAS,KAEhBkB,QAAQ7G,EAAgBoH,WAAU,SAACjI,EAAOC,GACzCD,EAAMQ,SAAU,EAChBR,EAAM0G,OAAQ,EAFsC,MAG3BzG,EAAOC,QAAzBiG,EAH6C,EAG7CA,KAAM1G,EAHuC,EAGvCA,SACbO,EAAM2G,eAAiBlH,EACpB0G,GACDnG,EAAMgG,UAAU+B,KAAKtI,GAEnBA,EAAS6H,OAAiC,UAAxBtH,EAAMsG,WAAWtF,KACrChB,EAAMsG,WAAahH,EAAagH,kB,EAK4DO,EAAcxG,QAArGyG,E,EAAAA,WAAYC,E,EAAAA,UAAWC,E,EAAAA,WAAYC,E,EAAAA,WAAYE,E,EAAAA,WAAYD,E,EAAAA,UAAWK,E,EAAAA,aACtEV,IAAf,Q,SCzHavF,GAAcwE,YACzB,eADyC,uCAEzC,WAAO9E,GAAP,iBAAAD,EAAA,sEACqBqF,EAAI9E,YAAYN,GADrC,YACQkH,EADR,iDAEkBA,GAFlB,uBAIoB9B,EAAI7E,aAAaP,GAJrC,cAIQI,EAJR,yBAMSA,GANT,2CAFyC,uDAY9Bc,GAAgB4D,YAC3B,iBAAkBM,EAAIlE,eAGXP,GAAWmE,YACtB,YADsC,uCAEtC,iCAAA/E,EAAA,6DAAQa,EAAR,EAAQA,IAAKC,EAAb,EAAaA,MAAb,SACqBuE,EAAIzE,SAAS,CAACC,MAAKC,UADxC,cACQwE,EADR,yBAGSA,GAHT,2CAFsC,uDAS3BpE,GAAW6D,YACtB,YADsC,uCAEtC,WAAO9E,GAAP,eAAAD,EAAA,sEACqBqF,EAAInE,SAASjB,GADlC,cACQqF,EADR,yBAGSA,GAHT,2CAFsC,uDA8FzB8B,GAzEMvI,YAAY,CAC/BC,KAAO,UACPP,aAdkC,CAClC8I,OAAS,GACTC,eAAgB,EAChBC,aAAc,EAEdJ,KAAO,KAEPK,OAAS,KACTC,aAAc,EACdC,WAAY,GAMZ3I,SAAW,GACX0H,cAJ+B,SAIjBC,GAEZA,EACGC,QAAQpG,GAAYqG,SAAS,SAAC3H,EAAOC,GACpCD,EAAMwI,aAAc,EACpBxI,EAAMyI,WAAY,EAClBzI,EAAMuI,OAAStI,EAAO2H,KAAKC,OAE5BH,QAAQpG,GAAY0G,UAAU,SAAChI,GAC9BA,EAAMwI,aAAc,EACpBxI,EAAMyI,WAAY,KAEnBf,QAAQpG,GAAY2G,WAAW,SAACjI,EAAOC,GACtCD,EAAMwI,aAAc,EACpBxI,EAAMyI,WAAY,EAClBzI,EAAMkI,KAAOjI,EAAOC,WAGrBwH,QAAQ/F,GAASgG,SAAS,SAAC3H,GAC1BA,EAAMwI,aAAc,EACpBxI,EAAMyI,WAAY,KAEnBf,QAAQ/F,GAASqG,UAAU,SAAChI,GAC3BA,EAAMwI,aAAc,EACpBxI,EAAMyI,WAAY,KAEnBf,QAAQ/F,GAASsG,WAAW,SAACjI,EAAOC,GACnCD,EAAMwI,aAAc,EACpBxI,EAAMyI,WAAY,EAClBzI,EAAMkI,KAAMrG,MAAQ5B,EAAOC,QAAQ2B,MACnC7B,EAAMkI,KAAMQ,QAAUzI,EAAOC,QAAQwI,QACrC1I,EAAMkI,KAAMrF,UAAY5C,EAAOC,QAAQ2C,aAGxC6E,QAAQzF,GAAS0F,SAAS,SAAC3H,GAC1BA,EAAMwI,aAAc,EACpBxI,EAAMyI,WAAY,KAEnBf,QAAQzF,GAAS+F,UAAU,SAAChI,GAC3BA,EAAMwI,aAAc,EACpBxI,EAAMyI,WAAY,KAEnBf,QAAQzF,GAASgG,WAAW,SAACjI,GAC5BA,EAAMwI,aAAc,EACpBxI,EAAMyI,WAAY,EAClBzI,EAAMkI,KAAMrG,MAAQ,GACpB7B,EAAMkI,KAAMQ,QAAU,KACtB1I,EAAMkI,KAAMrF,UAAY,MAGzB6E,QAAQxF,GAAcyF,SAAS,SAAC3H,GAC/BA,EAAMqI,eAAgB,EACtBrI,EAAMsI,aAAc,KAErBZ,QAAQxF,GAAc8F,UAAU,SAAChI,GAChCA,EAAMqI,eAAgB,EACtBrI,EAAMsI,aAAc,KAErBZ,QAAQxF,GAAc+F,WAAW,SAACjI,EAAOC,GACxCD,EAAMqI,eAAgB,EACtBrI,EAAMsI,aAAc,EAEpB,IAAMF,EAAUnI,EAAOC,QACjByI,EFxIgB,SAACC,GAgB7B,IAfA,IAAMC,EAAc,CAClBlD,EAAiB,UAAW,WAC5BA,EAAiB,UAAW,WAC5BA,EAAiB,UAAW,WAC5BA,EAAiB,UAAW,WAC5BA,EAAiB,UAAW,WAC5BA,EAAiB,UAAW,WAC5BA,EAAiB,UAAW,WAC5BA,EAAiB,UAAW,WAC5BA,EAAiB,UAAW,WAC5BA,EAAiB,UAAW,WAC5BA,EAAiB,UAAW,YAGxBgD,EAAM,GACNA,EAAIpD,OAASqD,GACnB,CACE,IAAM5H,EAAK8H,KAAKC,MAAMD,KAAKE,SAAWH,EAAYtD,QADpD,EAEesD,EAAYI,OAAOjI,EAAI,GAA7BkI,EAFT,oBAIEP,EAAIZ,KAAKmB,GAGX,OAAOP,EEgHWQ,CAAef,EAAO7C,QAClCvF,EAAMoI,OAASA,EAAO9E,KAAI,SAAC8F,EAAEhG,GAAH,oBAAC,gBAAcgG,GAAf,IAAkBC,WAAaV,EAAIvF,cAKrE,QClIekG,GARKC,YAAgB,CAClCC,aACAC,SACAhK,WACAC,aCLagK,GAFDC,YAAe,CAAEC,QAAUN,K,+JC4B1BO,GAlBsB,SAAC,GAI/B,IAHLC,EAGI,EAHJA,MAGI,IAFJC,kBAEI,aADJvD,cACI,SACJ,OACE,kBAAC,KAAD,KACE,kBAAC,KAAD,KACE,kBAAC,KAAD,CAAKwD,UAAU,SACZxD,GAAU,kBAAC,KAAD,CAAmByD,OAAO,KAAKC,MAAM,KAAKC,KAAK,YACzDL,EACAC,GAAc,kBAAC,KAAD,CAAgBE,OAAO,KAAKC,MAAM,KAAKC,KAAK,gB,8BCgDtDC,GAxDwB,SAAC,GAQjC,IAPL9H,EAOI,EAPJA,KACAI,EAMI,EANJA,MACAC,EAKI,EALJA,KACAC,EAII,EAJJA,QACAC,EAGI,EAHJA,UACAwH,EAEI,EAFJA,QACAC,EACI,EADJA,SAEMC,EAAWC,eAETpF,EAAYP,ErBpBc,GqBoB1BO,QAeR,OACE,yBAAK4E,UAAU,kBACb,yBAAKA,UAAS,uBAAkBK,EAAO,uBAA4B,KAAnE,OACG/H,QADH,IACGA,OADH,EACGA,EAAMgB,KAAI,SAACmH,EAAGrH,GAAJ,OAAU,yBAAKsH,IAAKtH,GAAIqH,OAErC,yBAAKT,UAAS,oCAA+B,CAAC,MAAO,KAAM,MAAO,OAAQ,QAAQrH,KAChF,yBAAKqH,UAAU,iBAAiBtH,GAChC,yBACEsH,UAAU,kBACVW,QAAS,kBAtBA,SAAC/H,GAChB,KAAGD,EAAO,GAAV,CAEA,IAAM0C,EAAIzC,EAAQ3B,QAAQ,uBAAa,IACvCsJ,EAAStD,EAAW5B,KAkBCuF,CAAShI,KAExB,yBAAKoH,UAAU,wBAAwBpH,GACtC0H,GAAY,kBAAC,KAAD,CAAyBO,MAAO,CAACC,WAAW,GAAIZ,MAAM,KAAKD,OAAO,QAEjF,yBAAKD,UAAU,qBACZnH,EAAUS,KAAI,SAACkC,EAAIpC,GAClB,OACE,yBACEsH,IAAKtH,EACL4G,UAAU,WACVW,QAAS,kBAzBrBvF,EADoBC,EA0BoBG,GAxBxC+E,EAAS1J,EAAgB,CAACC,KAAOuE,EAAEvE,aACnCyJ,EAASrD,GAAU,IAHA,IAAC7B,IA2BRG,EAAGsE,cCvBJiB,GAtB0B,SAAC,GAKnC,IAJLhI,EAII,EAJJA,QACAC,EAGI,EAHJA,IACAC,EAEI,EAFJA,KAEI,IADJqH,gBACI,SACJ,OACE,kBAAC,KAAD,KACE,kBAAC,KAAD,CAAMN,UAAU,YACd,kBAAC,KAAD,KACGjH,EAAQO,KAAI,SAACH,EAAEC,GACd,IACMiH,SADiBW,IAARhI,QAA8BgI,IAAT/H,IACHkB,EAAchB,EAAEb,KAAOU,EAAMC,GAE9D,OAAO,kBAAC,GAAD,eAAQqH,SAAUA,EAAUI,IAAKtH,GAAOD,EAAxC,CAA2CkH,QAASA,YCqCxDY,I,aApDgC,SAAC,GAIzC,IAHL5I,EAGI,EAHJA,OACA6I,EAEI,EAFJA,OACAC,EACI,EADJA,IAEMZ,EAAWC,eAETpF,EAAYP,EvBjBc,GuBiB1BO,QAaFgG,EAAI/I,EAAOE,OAAOc,EAClBgI,EAAK,CACW,IAApBhJ,EAAOE,OAAOC,EAAU,eAAiB,GACzC2B,EAAchC,EAAgBE,EAAOE,OAAOC,GAAIH,EAAOE,OAAOa,EAAS,IAANgI,EAAU1H,IAAgB0H,GAAK,UAAY,IAC5GE,KAAK,KAEP,OACE,yBACEtB,UAAU,oBACVa,MAAO,CACLU,QAAUJ,EACVK,WAAaN,IAGf,yBAAKlB,UAAU,sBAAsB3H,EAAOK,OAC5C,yBACEsH,UAAS,+BAA0BqB,GACnCV,QAAS,kBA5BE,SAAC/H,GAChB,IAAMyC,EAAIzC,EAAQ3B,QAAQ,uBAAa,IACvCsJ,EAAStD,EAAW5B,IA0BDuF,CAASvI,EAAOO,WAC/BP,EAAOO,SACT,yBAAKoH,UAAU,0BACZ3H,EAAOQ,UAAUS,KAAI,SAACkC,EAAIpC,GACzB,OAAO,yBACLsH,IAAKtH,EACLuH,QAAS,kBA5BjBvF,EADoBC,EA6BgBG,GA3BpC+E,EAAS1J,EAAgB,CAACC,KAAOuE,EAAEvE,aACnCyJ,EAASrD,GAAU,IAHA,IAAC7B,GA8BZ2E,UAAW,YACXxE,EAAGsE,c,SCvBA2B,GA3B4B,SAAC,GAIrC,IAHLP,EAGI,EAHJA,OACAC,EAEI,EAFJA,IACApI,EACI,EADJA,QAEM2I,EAAiC,IAAxB3I,EAAQ,GAAGR,OAAOE,EAC3BkJ,EAAI,sCAAoBD,EAAS,OAAS,WAAe,iBAE/D,OACE,yBACE1B,UAAU,aACVa,MAAK,6BACAc,GADA,IAEHJ,QAAUJ,EACVK,WAAaN,KAGdnI,EAAQO,KAAI,SAACH,EAAGC,GACf,IAAM8H,EAASQ,EAAS,EAAIvI,EAAEZ,OAAOE,EAAI,EACnC0I,EAAMO,EAASvI,EAAEZ,OAAOc,EAAI,EAAI,EAEtC,OAAO,kBAAC,GAAD,CAAYqH,IAAKtH,EAAG8H,OAAQA,EAAQC,IAAKA,EAAK9I,OAAQc,SCEtDyI,GAvBkC,SAAC,GAI3C,IAHLV,EAGI,EAHJA,OACAC,EAEI,EAFJA,IACApI,EACI,EADJA,QAEA,OACE,yBACEiH,UAAU,gBACVa,MAAO,CACLU,QAAUJ,EACVK,WAAaN,IAGdnI,EAAQO,KAAI,SAACH,EAAGC,GACf,IAAM8H,EAAS/H,EAAEZ,OAAOE,EAAI,EACtB0I,EAAMhI,EAAEZ,OAAOc,EAAI,EAEzB,OAAO,kBAAC,GAAD,CAAYqH,IAAKtH,EAAG8H,OAAQA,EAAQC,IAAKA,EAAK9I,OAAQc,SCZ/D0I,GAAU,CACd,iCACA,qEACA,6CACA,iCACA,6CACA,6CACA,8CAGIC,GAAO,CACX,CAAC,QAAS,SACV,CAAC,QAAS,SACV,CAAC,QAAS,QAAS,QAAQ,SAC3B,CAAC,QAAS,SACV,CAAC,QAAS,SACV,CAAC,QAAS,SACV,CAAC,QAAS,UAyEGC,GAtEoC,SAAC,GAE7C,IADLtM,EACI,EADJA,SAEMuM,EAAgBvM,EAASwM,QAAO,SAACC,EAAc/I,GACnD,IAAMX,EAAIW,EAAEZ,OAAOC,EACb2J,EAAY3J,EAAI,EAAIA,EAAI,EAAIA,EAElC,OAAO2J,EAAYD,EAAMC,EAAYD,IACpC,GAEGE,EChCoB,SAAC3M,GAC3B,IAAM4G,EAAgB,GAgBtB,OAdA5G,EAAS4M,SAAQ,SAAClJ,EAAEC,GAClB,IAAMkJ,EAAQnJ,EAAEZ,OAAOa,EACjBZ,EAAIW,EAAEZ,OAAOC,EACb+J,EAAY/J,EAAI,EAAIA,EAAI,EAAIA,EAE9B6D,EAAKiG,KACPjG,EAAKiG,GAAS,CAAEtJ,IAAMsJ,EAAOvJ,QAAU,KAErCsD,EAAKiG,GAAOvJ,QAAQwJ,KACtBlG,EAAKiG,GAAOvJ,QAAQwJ,GAAY,CAAEJ,UAAWI,EAAUC,SAAU,KAEnEnG,EAAKiG,GAAOvJ,QAAQwJ,GAAUC,SAASzE,KAAK5E,MAGvCkD,EDeMoG,CAAahN,GAE1B,OACE,yBAAKuK,UAAU,0BACb,yBAAKA,UAAU,4BACb,yBACEA,UAAU,kBACVa,MAAO,CACL6B,iBAAgB,sBAAkBV,EAAgB,EAAlC,YAGjBH,GAAQc,MAAM,EAAGP,EAAKA,EAAK7G,OAAS,GAAGvC,IAAM,GAAGM,KAAI,SAACsJ,EAAGxJ,GACvD,IAAMiI,EAAM9H,IAAe,IAAMH,EAAK,UAAY,GAElD,OAAO,yBACLsH,IAAKtH,EACL4G,UAAS,uCAAkCqB,GAC3CR,MAAO,CAAEU,QAAU,EAAGC,WAAapI,EAAI,IACvCwJ,MAEHd,GAAKa,MAAM,EAAGX,EAAgB,GAAG1I,KAAI,SAAChB,EAAMc,GAC3C,OAAO,yBACLsH,IAAKtH,EACL4G,UAAU,6BACVa,MAAO,CAAEU,QAAUnI,EAAI,EAAGoI,WAAa,IAEtClJ,EAAKgB,KAAI,SAACmH,EAAGjI,GACZ,IAAM6I,EAAY,IAANjI,GAAkB,IAANZ,GAAiB,IAANA,EAA6B,GAAjB,eAE/C,OAAO,yBAAKkI,IAAKlI,EAAGwH,UAAWqB,GAAKZ,UAKxC2B,EAAKH,QAAO,SAACY,EAA2B/I,GACtC,IAAMf,EAAUe,EAAEf,QAAQO,KAAI,SAAAH,GAC5B,IAAM+H,EAASpH,EAAEd,IAAM,EACjBmI,EAAMhI,EAAEgJ,UAAY,EAEpBT,EAAoC,IAA3BvI,EAAEqJ,SAAS,GAAGjK,OAAOc,EAC9ByJ,EAA2C,IAA3B3J,EAAEqJ,SAAS,GAAGjK,OAAOE,EACrCsK,EAAYrB,GAAUoB,EAEtBpC,EAAMsC,OAAOC,OAAO9J,EAAEqJ,SAAS,GAAGjK,QAAQ0J,QAAO,SAACxJ,EAAWyK,GAAZ,OAAoCzK,EAAIyK,IAAG,IAElG,OAAGH,EAAkB,kBAAC,GAAD,CAAarC,IAAKA,EAAKQ,OAAQA,EAAQC,IAAKA,EAAKpI,QAASI,EAAEqJ,WACzEd,GACAoB,EADe,kBAAC,GAAD,CAAUpC,IAAKA,EAAKQ,OAAQA,EAAQC,IAAKA,EAAKpI,QAASI,EAAEqJ,WAEpE,kBAAC,GAAD,CAAY9B,IAAKA,EAAKQ,OAAQA,EAAQC,IAAKA,EAAK9I,OAAQc,EAAEqJ,SAAS,QAGjF,MAAM,GAAN,mBAAWK,GAAX,YAAqB9J,MACpB,QEnFToK,I,OAAO,CAAC,eAAK,eAAK,eAAK,eAAK,eAAK,iBAoCxBC,GAlCoC,SAAC,GAG7C,IAFLnK,EAEI,EAFJA,KACAD,EACI,EADJA,IAEMuH,EAAWC,eAEjB,OACE,oCACE,kBAAC,KAAD,CAAM6C,KAAK,UAAUxC,MAAO,CAAEyC,SAAW,SACvC,kBAAC,KAAD,CACEzC,MAAO,CAAE0C,MAA0B,IAAlB7J,IAAsB,MAAQ,IAC/CiH,QAAS,kBAAMJ,EAASvD,EAAW,KAAKwG,SAAmB,IAATvK,GAFpD,0DAIA,kBAAC,KAAD,CACE4H,MAAO,CAAE0C,MAA0B,IAAlB7J,IAAsB,MAAQ,IAC/CiH,QAAS,kBAAMJ,EAASvD,EAAW,KAAKwG,SAAmB,IAATvK,GAFpD,uEAKF,kBAAC,KAAD,CAAMoK,KAAK,UAAUxC,MAAO,CAAEyC,SAAW,SACtCH,GAAK7J,KAAI,SAACQ,EAAGV,GACZ,IAAMoK,EAAWpK,IAAMJ,EAEvB,OAAO,kBAAC,KAAD,CACL0H,IAAKtH,EACLoK,SAAUA,EACV3C,MAAO,CAAE0C,MAAQhK,MAAiBH,EAAI,MAAQ,IAC9CuH,QAAS,kBAAMJ,EAASxD,EAAU3D,MAClCU,SC7BNqJ,GAAO,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,GA0BTM,GAxBsB,SAAC,GAE/B,IADLhO,EACI,EADJA,SAEM8K,EAAWC,eADb,EAEkBkD,cAAY,SAACrI,GAAD,OAAmBA,EAAE5F,YAA/CuD,EAFJ,EAEIA,IAAKC,EAFT,EAESA,KAIb,OACE,oCACE,kBAAC,GAAD,CAAcA,KAAMA,EAAMD,IAAKA,IAC/B,kBAAC,KAAD,CACE6H,MAAO,CAACZ,OAAO,QACf0D,WAAY3K,EACZ4K,SARY,SAAC9J,GAAD,OAAayG,EAASxD,EAAUjD,MAU3CqJ,GAAK7J,KAAI,SAAAQ,GACR,OAAO,kBAAC,GAAD,CAAS4G,IAAK5G,EAAGd,IAAKA,EAAKC,KAAMA,EAAMF,QAASD,EAAUrD,EAAUqE,EAAGb,W,yGCJzE4K,GAfoC,SAAC,GAGlD,OADI,EADJ7M,IAIE,IAAK,SAAU,OAAO,kBAAC,KAAD,MACtB,IAAK,OAAQ,OAAO,kBAAC,KAAD,MACpB,IAAK,QAAS,OAAO,kBAAC,KAAD,MACrB,IAAK,OAAQ,OAAO,kBAAC,KAAD,CAAuBmJ,KAAK,WAChD,IAAK,SAAU,OAAO,kBAAC,KAAD,CAAyBA,KAAK,QACpD,IAAK,YAAa,OAAO,kBAAC,KAAD,CAAmBA,KAAK,YACjD,IAAK,eAAgB,OAAO,kBAAC,KAAD,CAAmBA,KAAK,WCClD2D,GAAO,CACX,CAAEvH,KAAO,wCAAWvF,GAAK,UACzB,CAAEuF,KAAO,yDAAavF,GAAK,QAC3B,CAAEuF,KAAO,mDAAYvF,GAAK,SAC1B,CAAEuF,KAAO,gEAAevF,GAAK,gBAC7B,CAAEuF,KAAO,6CAAWvF,GAAK,aACzB,CAAEuF,KAAO,yDAAavF,GAAK,QAC3B,CAAEuF,KAAO,6CAAWvF,GAAK,WAuIZ+M,GApIkC,SAAC,GAE3C,IADL/M,EACI,EADJA,GAEMuJ,EAAWC,eADb,EAEoEkD,cAAY,SAACrI,GAAD,OAAmBA,EAAE5F,YAAjG6G,EAFJ,EAEIA,WAAYK,EAFhB,EAEgBA,eAAgBnG,EAFhC,EAEgCA,QAASkG,EAFzC,EAEyCA,MAAOE,EAFhD,EAEgDA,QAASJ,EAFzD,EAEyDA,OACrD0B,EAASwF,cAAY,SAACrI,GAAD,OAAmBA,EAAE3F,WAA1CwI,KAHJ,EAKgC8F,IAAMC,UAAkB,GALxD,mBAKGC,EALH,KAKeC,EALf,KAMEC,EAAa,kBAAMD,GAAeD,IAAe1N,IAyCjD6N,EAAOL,IAAMM,SAAQ,WACzB,OAAG9H,GAAU0B,GAAQA,EAAKQ,SAAW/B,ECvFlB,SAAC5F,EAAmBwN,GACzCC,QAAQC,IAAI,WAWZ,OAAO1N,EAAEmC,QAAO,SAAAwL,GAAE,OAAKH,EAAErI,MAAK,SAAAyI,GAAE,OAThB,SAAC5N,EAAYwN,GAC3B,IAAMK,EAAW7N,EAAEqC,IAAMmL,EAAEnL,EACrByL,EAAiB9N,EAAEyB,IAAM+L,EAAE/L,EAC3BsM,EAAY/N,EAAEsC,IAAMkL,EAAElL,GAAa,IAARtC,EAAEsC,GAAmB,IAARkL,EAAElL,EAC1C0L,EAAahO,EAAE0B,IAAM8L,EAAE9L,GAAa,IAAR1B,EAAE0B,GAAmB,IAAR8L,EAAE9L,EAEjD,OAAOmM,GAAYC,GAAkBC,GAAaC,EAGhBC,CAAQN,EAAGnM,OAAQoM,EAAGpM,cD4E/C0M,CAAQtI,EAAelH,SAA2ByI,EAAKQ,QAAQjJ,UAEjE,KACN,CAAC+G,EAAQ0B,EAAMvB,IAElB,OACE,kBAAC,KAAD,CAAO3F,GAAIA,GACT,kBAAC,KAAD,CAAakO,KAAM,kBAAC,KAAD,CAAiBvE,QApBzB,WACbJ,EAASpD,KAENP,EAAQrB,OAAS,GAClBgF,EAASpK,EAAY,CAACZ,M/BjFE,W+BiFsBa,M/B9ExB,gB+B+FpB,yBAAKuK,QAASyD,EAAYpE,UAAU,UACjC1D,EAAWC,KACZ,kBAAC,KAAD,CAAgB4D,KAAK,gBAAgBU,MAAO,CAAEsE,UAAU,UAAD,OAAYjB,GAAcvH,EAAiB,SAAW,IAAtD,UAG1DA,GACC,kBAAC,KAAD,CACEyI,OAAQlB,EACRmB,QAASjB,GAET,kBAAC,KAAD,KACGN,GAAKxK,KAAI,SAACgM,EAAKlM,GACd,IAAMmM,IAAW,OAAC5I,QAAD,IAACA,OAAD,EAACA,EAAgBW,QAAqB,UAAZgI,EAAKtO,GAC1CwO,EAAkC,UAAlBlJ,EAAWtF,KAA+B,cAAZsO,EAAKtO,IAAkC,iBAAZsO,EAAKtO,IAE9E0H,EAAUR,GAAQA,EAAKrG,QAAU8E,EAAe7F,KAChD2O,EAAc/G,GAAuB,SAAZ4G,EAAKtO,GAC9B0O,GAAoBhH,GAAuB,WAAZ4G,EAAKtO,GAEpC2O,EAAcnJ,GAAsB,cAAZ8I,EAAKtO,GAC7B4O,GAAYpJ,GAAsB,iBAAZ8I,EAAKtO,GAC3B6O,GAAuB,iBAAZP,EAAKtO,IAAqC,cAAZsO,EAAKtO,KAAuB0H,EAErEoH,EAAe5H,IAASA,EAAKrG,QAAsB,cAAZyN,EAAKtO,IAAkC,iBAAZsO,EAAKtO,IAE7E,KACEwO,GACAD,GACAE,GACAC,GACAC,GACAC,GACAC,GACAC,GARF,CAWA,IAAIzE,EAAK,GAIT,MAHe,SAAZiE,EAAKtO,GAAeqK,EAAK,OACR,WAAZiE,EAAKtO,KAAiBqK,EAAK,UAE5B,kBAAC,KAAD,CACLX,IAAKtH,EACL2M,OAAQ,kBAAC,GAAD,CAAc/O,GAAIsO,EAAKtO,KAC/B2J,QAAS,kBA5FA,SAAC2E,GACnBA,EAAKtO,KAAOsF,EAAWtF,KAET,SAAZsO,EAAKtO,IAAiBkH,GAEvBqC,EAAS5I,GAAS,CAACC,IAAMsG,EAAKlH,GAAIa,MAAQ+E,EAAQA,EAAQrB,OAAO,MACjEgF,EAASrD,GAAU,KAED,WAAZoI,EAAKtO,IAAmBkH,GAE9BqC,EAAStI,GAASiG,EAAKlH,KACvBuJ,EAASrD,GAAU,KAED,cAAZoI,EAAKtO,IAAkC,iBAAZsO,EAAKtO,GAEtCuJ,EAASrD,EAAsB,cAAZoI,EAAKtO,KAEN,UAAZsO,EAAKtO,IAEXuJ,EAASzD,EAAWwI,IACpB/E,EAASrD,GAAU,KAEhBqD,EAASzD,EAAWwI,KAG3BU,sBAAsB5B,GAmEK6B,CAAeX,IAC9BtF,UAAWqB,EACX6E,aAAc5J,EAAWtF,KAAOsO,EAAKtO,GAAK,kBAAC,KAAD,CAAYmJ,KAAK,kBAAqB,MAChFmF,EAAK/I,YAMd/F,GAAW,kBAAC,KAAD,MACXkG,GACC,kBAAC,KAAD,CACEzG,OAAQ,kBAAC,KAAD,CAAQoN,KAAK,WAAW1C,QArEpB,WAClBJ,EAAS1J,EAAgB,CAACC,KAAO8F,EAAQA,EAAQrB,OAAS,GAAIuC,KAAM,OAoEtD,yFACRqI,WAAS,GAFX,+FAKDxJ,GAAkB,oCACjB,kBAAC,GAAD,CAAOH,OAAQA,EAAQuD,WAAa7B,GAAQA,EAAKrG,QAAU8E,EAAe7F,KAAkBgJ,MAAOnD,EAAgBmD,QAChG,UAAlBxD,EAAWtF,IAAkB,kBAAC,GAAD,CAASsJ,UAAU,EAAOvH,QAAS4D,EAAgBW,QAC9D,WAAlBhB,EAAWtF,IACV,kBAAC,GAAD,CAAOvB,SAAU+G,EAAS6H,EAAO1H,EAAelH,WAE/B,SAAlB6G,EAAWtF,IACV,kBAAC,GAAD,CAAcvB,SAAU+G,EAAS6H,EAAO1H,EAAelH,c,8BElClD2Q,GA9GgC,SAAC,GAEzC,IADLpP,EACI,EADJA,GAEMuJ,EAAWC,eADb,EAMAkD,cAAY,SAACrI,GAAD,OAAmBA,EAAE3F,WAFnC0I,EAJE,EAIFA,OAAQC,EAJN,EAIMA,cAAeC,EAJrB,EAIqBA,YACvBJ,EALE,EAKFA,KAAMM,EALJ,EAKIA,YAAaC,EALjB,EAKiBA,UAAWF,EAL5B,EAK4BA,OAGxBnD,EAAYP,EjCtBc,GiCsB1BO,QARJ,ECtBe,WACnB,IAAMnB,EAAQ,IAAIT,KAAK,KAAM,EAAG,GAAGK,UAC7BF,GAAM,IAAIH,MAAOK,UACjBK,EAAM,IAAIV,KAAK,KAAM,EAAG,GAAGK,UAQjC,MAAO,EAJSF,EAAMM,GAFT,OAGGC,EAAMD,GAHT,OAIGC,EAAMP,GAJT,OAMgBL,IAAIwF,KAAKC,ODoBXsH,GATvB,mBASG1M,EATH,KASQ2M,EATR,KASejC,EATf,KAWEkC,EAAe,SAAClL,GACpBD,EAAQC,GACRkF,EAAS1J,EAAgB,CAACC,KAAOuE,EAAEvE,QACnCyJ,EAASxK,EjCpCiB,aiCqC1BwK,EAASpK,EAAY,CAACZ,MjCrCI,WiCqCiBa,MjCjCjB,eiCoC5B,OACE,kBAAC,KAAD,CAAOY,GAAIA,GACT,kBAAC,KAAD,CACEkO,KACE,kBAAC,KAAD,CACEvE,QAAS,kBAAMJ,EAASpK,EAAY,CAACZ,MjC5CpB,UiC4C2Ca,MjCvC/C,WiCwCd,kBAAC,KAAD,QAJL,8CAOCqI,GACC,kBAAC,KAAD,CACExI,OAAQ,kBAAC,KAAD,CAAQoN,KAAK,WAAW1C,QAAS,kBAAMJ,EAASjJ,GAAYiH,MAA5D,yFACR4H,WAAS,GAFX,gGAKA3H,IAAgBC,GAChB,kBAAC,KAAD,KACE,kBAAC,KAAD,CAAO+H,UAAW,OAAQC,OAAO,6CAAU5F,MAAO,CAAC6F,OAAS,YACzDrI,EACG,kBAAC,KAAD,MACAC,EACE,kBAAC,KAAD,CACArI,OACE,kBAAC,KAAD,CACEoN,KAAK,WACL1C,QAAS,kBAAMJ,EAASrI,QAF1B,0FAFF,+FAOA,kBAAC,KAAD,KACGkG,EAAO9E,KAAI,SAAC8F,EAAEhG,GACb,OAAO,kBAAC,KAAD,CACLsH,IAAKtH,EACL4G,UAAU,aACVa,MAAO,CAAExB,WAAaD,EAAEC,aACzB,kBAAC,KAAD,CAAMvI,KAAMsI,EAAEtI,MAAOsI,EAAEU,aAKpC,kBAAC,KAAD,KACE,kBAAC,KAAD,KACE,iHAA2C,IAAlBpG,IAAsB,yDAAc,sEAE/D,kBAAC,KAAD,KACE,kBAAC,KAAD,CAAS+M,OAAM,2HAAsCpC,EAAtC,mBACb,kBAAC,KAAD,CAAUsC,MAAQhN,EAAM2M,EAAS,SAIvC,kBAAC,KAAD,CAAOG,OAAO,wFAAkB5F,MAAO,CAAC+F,UAAU,IAChD,kBAAC,KAAD,CACEvD,KAAK,WACLrD,UAAU,WACVW,QAAS,WACJzC,GAAQA,EAAKQ,QACd6H,EAAarI,EAAKQ,UAGlB6B,EAASxK,EjClGG,aiCmGZwK,EAASpK,EAAY,CAACZ,MjCnGV,WiCmG+Ba,MjChGjC,eiCmGb8H,GAAQA,EAAKQ,QAAWR,EAAKQ,QAAQoB,MAAQ,8CAC/C5B,GAAQA,EAAKQ,SACZ,kBAAC,KAAD,KACE,kBAAC,KAAD,CACE2E,KAAK,cACLwD,KAAK,IACLhG,MAAO,CAACX,MAAQ,QAChBS,QAAS,kBAAMJ,EAAStI,GAASiG,EAAKlH,OAJxC,6GASLkH,GAAQA,EAAKQ,SACZ,kBAAC,KAAD,CAAO+H,OAAQvI,EAAKrG,MAAMiP,SAAS,KAAO,uCAAW,iFAAiBjG,MAAO,CAAC+F,UAAU,IACrF1I,EAAKrF,UAAUS,KAAI,SAACkC,EAAGpC,GACtB,OAAO,kBAAC,KAAD,CACLsH,IAAKtH,EACLuH,QAAS,kBAAM4F,EAAa/K,KAC5BA,EAAGsE,c,qBE5ENiH,GA9BwB,SAAC,GAEjC,IADL/P,EACI,EADJA,GAEMuJ,EAAWC,eACjB,OACE,kBAAC,KAAD,CAAOxJ,GAAIA,GACT,kBAAC,KAAD,CACEkO,KACE,kBAAC,KAAD,CACEvE,QAAS,kBAAMJ,EAASpK,EAAY,CAACZ,MnCtBpB,UmCsB2Ca,MnClB3C,iBmCevB,kCAQA,kBAAC,KAAD,KACE,yBAAK4Q,IAAK1N,KAAK2N,IAAI,iCAAQpG,MAAO,CAACX,MAAM,WAG3C,kBAAC,KAAD,KACE,kBAAC,KAAD,CAAOuG,OAAO,yIACZ,kBAAC,KAAD,uGACA,kBAAC,KAAD,wJACA,kBAAC,KAAD,4LACA,kBAAC,KAAD,oL,kBCoEKS,GArFmC,SAAC,GAE5C,IADLlQ,EACI,EADJA,GAGMuJ,EAAWC,eAFb,EAGqBkD,cAAY,SAACrI,GAAD,OAAmBA,EAAEoE,UAAnDlJ,EAHH,EAGGA,MAAOC,EAHV,EAGUA,QAHV,EAKsBqE,EpCnBQ,GoCmB1BK,EALJ,EAKIA,KAAME,EALV,EAKUA,QAER+L,EAAe,SAACR,GAAD,OAAoB,SAACtL,GAAD,OACvCA,EAAEyE,MAAMsH,cAAcN,SAASH,EAAMS,iBARnC,EAUoCpD,IAAMC,SAA2B1N,EAAQyF,GAAU9C,OAAOiO,EAAa5Q,IAAU,IAVrH,mBAUG8Q,EAVH,KAUiBC,EAVjB,KAWJtD,IAAMuD,WAAU,WACd,IAAIC,EAcJ,OAbGjR,EAEDiR,EAAMC,YAAW,WACflH,EAAS7J,GAAW,IACpB4Q,EAAgBtL,GAAU9C,OAAOiO,EAAa5Q,OAC7C,MAIHgK,EAAS7J,GAAW,IACpB4Q,EAAgB,KAGX,kBAAMI,aAAaF,MACzB,CAACjR,IACJ,IAKMgQ,EAAe,SAAClL,GACpBD,EAAQC,GACRkF,EAAShD,KACTgD,EAAS1J,EAAgB,CAACC,KAAOuE,EAAEvE,QACnCyJ,EAASpK,EAAY,CAAEZ,MpC3DG,WoC2DqBa,MpCvDrB,eoC0D5B,OACE,kBAAC,KAAD,CAAOoQ,WAAW,EAAOxP,GAAIA,GAC3B,kBAAC,KAAD,uCACA,kBAAC,KAAD,CAAa2Q,SAAS,MAAM9G,MAAO,CAACxB,WAAW,6BAC7C,kBAAC,KAAD,CACEuI,YAAY,yIACZjB,MAAOpQ,EACPqN,SAnBa,SAACxE,GACpBmB,EAAS9J,EAAS2I,EAAEyI,cAAclB,QAClCpG,EAAS7J,GAAW,KAkBdoR,MAAO,OAEQ,IAAhB5M,EAAKK,QACJ,kBAAC,KAAD,KACGL,EAAK5B,KAAI,SAAA+B,GACR,OAAO,kBAAC,KAAD,CACLqF,IAAKrF,EAAEvE,KACPkJ,UAAU,YACVW,QAAS,kBAAM4F,EAAalL,KAC5BA,EAAEyE,YAMVtJ,EACI,yBAAKqK,MAAO,CAAC+F,UAAU,MAAM,kBAAC,KAAD,OACL,IAAxBS,EAAa9L,OACX,kBAAC,KAAD,CAAa4K,WAAS,GAAtB,gGAEA,kBAAC,KAAD,CAAMtF,MAAO,CAAE+F,UAAY,IAAsB,IAAhB1L,EAAKK,OAAe,EAAI,MACtD8L,EAAa/N,KAAI,SAAA+B,GAChB,OAAO,kBAAC,KAAD,CACLqF,IAAKrF,EAAEvE,KACP6J,QAAS,kBAAM4F,EAAalL,KAC5BA,EAAEyE,a,SC/EhBiI,I,OAAc,CAClBC,IAAM,uCACNC,GAAK,mDACLC,IAAM,6EAwEOC,GArEsC,SAAC,GAE/C,gBACL,IAAM5H,EAAWC,eADb,EAEsCkD,cAAY,SAACrI,GAAD,OAAmBA,EAAE5F,YAAnEgH,EAFJ,EAEIA,cAAeE,EAFnB,EAEmBA,eAEfvB,EAAYP,ErCpBc,GqCoB1BO,QAEFgN,EAAa,kBAAM7H,EAAStD,EAAW,QAS7C,IAAIN,EAAgB,OAAO,KAE3B,IAAMN,ECpCsB,SAACzD,EAAkBnD,GAC/C,IAAM4S,EAAS,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE,GAAG,CAAC,EAAE,IACzBxP,EAAyB,GAEzBc,EAAM,IAAIH,KAEV8O,EAAK3O,EAAIF,SACTF,EAAoB,IAAP+O,EAAW,EAAIA,EAAK,EAEjCxO,EAAIH,EAAIE,UACR0O,EAAmBxO,EAAMyO,WAAU,gCAAGxO,KAAH,GAAWC,EAAX,KAAkBC,EAAlB,YAA6BD,EAAQH,GAAKA,EAAII,KA6CvF,OA1CAzE,EAAS4M,SAAQ,SAAAlJ,GACZA,EAAEP,UAAYA,IAEfmB,EAAMsI,SAAQ,SAACjB,EAAGhI,GAChB,IAAMH,EAAOE,EAAEZ,OAAOc,EAChBL,EAAMG,EAAEZ,OAAOa,EACfvB,EAAQsB,EAAEZ,OAAOE,EAEpBQ,IAASmI,EAAEnI,MAAiB,IAATA,IAGR,IAAVpB,IAAuC,IAAvBsB,EAAEN,UAAU0C,QAAyB,IAATtC,IAClC,IAAVpB,EAEAwQ,EAAOlP,EAAER,MAAM,KAEf0P,EAAOlP,EAAER,MAAM,IAAM,IAGrBS,EAAImP,GACJnP,IAAMmP,GAAoBvP,GAAOO,KAIrB,IAAV1B,IAAuC,IAAvBsB,EAAEN,UAAU0C,QAAyB,IAATtC,IAClC,IAAVpB,EAEAwQ,EAAOlP,EAAER,MAAM,KAEf0P,EAAOlP,EAAER,MAAM,IAAM,QAK7BQ,EAAEN,UAAUS,KAAI,SAAAkC,GACX3C,EAAUqD,MAAK,SAAAuM,GAAC,OAAIA,EAAE3R,OAAS0E,EAAG1E,SAErC+B,EAAUkF,KAAKvC,UAKd,CACL3C,YACA6P,MAAQ,CACNV,IAAMK,EAAO,GAAG/O,IAAIwF,KAAKC,OACzBkJ,GAAMI,EAAO,GAAG/O,IAAIwF,KAAKC,OACzBmJ,IAAMG,EAAO,GAAG/O,IAAIwF,KAAKC,SDxBhB4J,CAAelM,EAAyBE,EAAelH,UAEpE,OACE,kBAAC,KAAD,CACEmT,YAAanM,EAAgB,iBAAmB,KAChD4I,QAAS+C,GAET,kBAAC,KAAD,CACEpR,GAAG,iBACH6R,sBAAsB,EACtBxD,QAAS+C,EACT3B,OACE,kBAAC,KAAD,CACEqC,MAAO,kBAAC,KAAD,CAAmBnI,QAASyH,GAA5B,+CADT,iEAKF,kBAAC,GAAD,CAAOtI,MAAOrD,IACd,kBAAC,KAAD,KACE,kBAAC,KAAD,CAAOgK,OAAO,6CAAUD,UAAU,QAC/BnK,GAAQ2G,OAAO+F,QAAQ1M,EAAKqM,OAAOpP,KAAI,SAAC0P,EAAQ5P,GAAO,IAAD,cACzB4P,EADyB,GAC9CtI,EAD8C,2BACxC/G,EADwC,KACnC2M,EADmC,KAGrD,GAAa,IAAVA,EAEH,OACE,kBAAC,KAAD,CAAK5F,IAAKtH,GACR,kBAAC,KAAD,CAASqN,OAAM,UAAKsB,GAAYrH,GAAjB,YAAqD/G,EAArD,YAA4D2M,IACzE,kBAAC,KAAD,CAAUtG,UAAS,oBAAeU,GAAOiG,MAAQhN,EAAM2M,EAAS,YAMzEjK,GAAkC,IAA1BA,EAAKxD,UAAU0C,QACtB,kBAAC,KAAD,CAAOkL,OAAQ9J,EAAe7F,KAAKgQ,SAAS,KAAO,uCAAW,iFAAiBN,UAAU,QACtFnK,EAAKxD,UAAUS,KAAI,SAAAkC,GAClB,OAAO,kBAAC,KAAD,CACLkF,IAAKlF,EAAG1E,KACR6J,QAAS,kBA/CvBvF,EADoBC,EAgDsBG,GA9C1C4M,IACA7H,EAAS1J,EAAgB,CAACC,KAAOuE,EAAEvE,aACnCyJ,EAASrD,GAAU,IAJA,IAAC7B,IAiDNG,EAAGsE,eESNmJ,GAvEQ,WACtB,IAAM1I,EAAWC,eADW,EAEFkD,cAAY,SAACrI,GAAD,OAAmBA,EAAEmE,cAAnDjK,EAFoB,EAEpBA,MAAOC,EAFa,EAEbA,OACPgJ,EAAgBkF,cAAY,SAACrI,GAAD,OAAmBA,EAAE3F,WAAjD8I,YAEF0K,EAAoB,SAAC9J,GAC1B,IAAM+J,EAAW/J,EAAEyI,cAAcuB,QAAQ7T,MACzC,GvC1B4B,auC2B3B4T,GvC3B2B,auC4B3B5T,GvCxB2B,auCyB3BC,EAAOC,SAGP8K,EAASpK,EAAY,CAACZ,MvChCK,WuCgCiBa,MvC7BnB,YuC8BzBmK,EAAShD,SAEL,IAAG4L,IAAa5T,EAAO,OACvBgL,EAASxK,EAAYoT,MAc3B,OAXAnF,IAAMuD,WAAU,WAAM,4CACrB,4BAAAxQ,EAAA,sEAEwBsS,IAAOC,KAAK,uBAFpC,OAEOC,EAFP,OAGChJ,EAASrI,MACTqI,EAASjJ,GAAYiS,EAASvS,KAJ/B,4CADqB,uBAAC,WAAD,wBAQrBwS,KACC,IAGD,kBAAC,KAAD,CACCC,YAAalU,EACbmU,OACC,kBAAC,KAAD,KACC,kBAAC,KAAD,CACC/I,QAASuI,EACT1F,SAAoB,aAAVjO,EACVoU,aAAY,WACZpN,KAAK,gEACL,kBAAC,KAAD,OACD,kBAAC,KAAD,CACCoE,QAASuI,EACT1F,SAAoB,YAAVjO,EACVoU,aAAY,UACZpN,KAAK,8CACL,kBAAC,KAAD,SAIH,kBAAC,KAAD,CACCvF,GAAI,WACJ4S,YAAapU,EAAOC,SACpBoU,MAAO,kBAAC,GAAD,OAEP,kBAAC,GAAD,CAAa7S,GAAG,WAChB,kBAAC,GAAD,CAAUA,GAAG,cAEd,kBAAC,KAAD,CACCA,GAAI,UACJ4S,YAAapU,EAAOE,QACpBoU,OAAQtL,EAAc,kBAAC,KAAD,MAAoB,MAE1C,kBAAC,GAAD,CAASxH,GAAG,YACZ,kBAAC,GAAD,CAAKA,GAAG,W,qBC7DG+S,GAlBD,SAAC,GACb,OADsB,gBAEpB,kBAAC,KAAD,CACEC,KAAM,kBAAC,KAAD,CAAmB9J,MAAO,GAAID,OAAQ,KAC5ChK,OACE,oCACE,kBAAC,KAAD,CAAMa,KAAI,4CAAV,yKACA,6BAAM,6BACN,kBAAC,KAAD,CAAMA,KAAI,gCAAV,sGAGJqP,WAAS,GATX,gHAWqB,6BAXrB,mGCOW8D,GANE,WACf,IAAMC,GAAQ,IAAI1Q,MAAO2Q,cAEzB,OAAQD,GAAS,IAAMA,EAAQ,EAAK,kBAAC,GAAD,MAAY,kBAAC,KAAD,CAAUxK,MAAOA,IAAO,kBAAC,GAAD,QCC1E2J,IAAOC,KAAK,gBACZD,IAAOe,WAAU,SAAAhL,GACM,yBAAlBA,EAAEiL,OAAO1R,MACV2R,SAASxS,KAAKyS,aAAa,SAAUnL,EAAEiL,OAAOhO,KAAKmO,WAGvDC,IAASC,OAAO,kBAAC,GAAD,MAAcJ,SAASK,eAAe,U","file":"static/js/main.016988de.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\"\r\n\r\nimport { MAP_PANEL, PROFILE_PANEL, PROFILE_STORY, SCHEDULE_PANEL, SCHEDULE_STORY, SEARCH_PANEL } from \"../../constans\"\r\n\r\ntype Story = typeof PROFILE_STORY | typeof SCHEDULE_STORY\r\ntype ProfilePanel = typeof PROFILE_PANEL | typeof MAP_PANEL\r\ntype SchedulePanel = typeof SCHEDULE_PANEL | typeof SEARCH_PANEL\r\ntype Panel = { schedule : SchedulePanel, profile : ProfilePanel }\r\n\r\ntype ChangePanelAction = { story : keyof Panel, panel : ProfilePanel | SchedulePanel }\r\n\r\ninterface NavigationState\r\n{\r\n  story : Story\r\n  panels : Panel\r\n}\r\n\r\nconst initialState : NavigationState = {\r\n  story : PROFILE_STORY,\r\n  panels : {\r\n    schedule : SEARCH_PANEL,\r\n    profile : PROFILE_PANEL\r\n  },\r\n}\r\n\r\nconst navigationSlice = createSlice({\r\n  name : 'navigation',\r\n  initialState,\r\n  reducers : {\r\n    changeStory(state, action)\r\n    {\r\n      state.story = action.payload\r\n    },\r\n    changePanel(state, action : PayloadAction<ChangePanelAction>)\r\n    {\r\n      const { story, panel } = action.payload\r\n      if(story === 'schedule')\r\n        state.panels.schedule = panel as SchedulePanel\r\n      else if(story === 'profile')\r\n        state.panels.profile = panel as ProfilePanel\r\n    },\r\n  }\r\n})\r\n\r\nexport const { changeStory, changePanel } = navigationSlice.actions\r\nexport default navigationSlice.reducer","export const SCHEDULE_STORY = 'schedule'\r\nexport const PROFILE_STORY = 'profile'\r\n\r\nexport const SEARCH_PANEL = 'search'\r\nexport const SCHEDULE_PANEL = 'schedule'\r\nexport const PROFILE_PANEL = 'profile'\r\nexport const MAP_PANEL = 'map'\r\n\r\nexport const COUNT_LAST_SCHEDULES = 6","import { createSlice } from \"@reduxjs/toolkit\"\r\n\r\ninterface SearchState\r\n{\r\n  query : string\r\n  loading : boolean\r\n}\r\n\r\nconst initialState : SearchState = {\r\n  query : '',\r\n  loading : false\r\n}\r\n\r\nconst searchSlice = createSlice({\r\n  name : 'search',\r\n  initialState,\r\n  reducers : {\r\n    setQuery(state, action)\r\n    {\r\n      state.query = action.payload\r\n    },\r\n    setLoading(state, action)\r\n    {\r\n      state.loading = action.payload\r\n    }\r\n  }\r\n})\r\n\r\nexport const { setQuery, setLoading } = searchSlice.actions\r\nexport default searchSlice.reducer","export const BASE_URL = process.env.REACT_APP_BASE_URL","import { BASE_URL } from \"./constants\"\r\n\r\nexport const requestSchedule = async (href : string) => {\r\n  const id = href.replace(/(\\?|&)/g,'').replace('=','/')\r\n  const url = `${BASE_URL}/schedule/${id}`\r\n  const res = await fetch(url)\r\n  \r\n  return res.json()\r\n}","import { BASE_URL } from \"./constants\"\r\n\r\nexport const requestUser = async (id : number) => {\r\n  const url = `${BASE_URL}/user/${id}`\r\n  const res = await fetch(url)\r\n\r\n  return res.json()\r\n}\r\n\r\nexport const registerUser = async (id : number) => {\r\n  const url = `${BASE_URL}/user/${id}`\r\n  const opts = {\r\n    method : 'POST', \r\n    headers : {'Content-Type': 'application/json;charset=utf-8'}\r\n  }\r\n  const res = await fetch(url, opts)\r\n\r\n  return res.json()\r\n}","import { BASE_URL } from \"./constants\"\r\n\r\nexport const addGroup = async ({uid, group} : {uid : number, group : string}) => {\r\n  const url = `${BASE_URL}/user/group`\r\n  const opts = {\r\n    method : 'PUT', \r\n    headers : {'Content-Type': 'application/json;charset=utf-8'},\r\n    body : JSON.stringify({uid, group})\r\n  }\r\n  const res = await fetch(url, opts)\r\n\r\n  return res.json()\r\n}\r\n\r\nexport const delGroup = async (uid : number) => {\r\n  const url = `${BASE_URL}/user/group`\r\n  const opts = {\r\n    method : 'DELETE', \r\n    headers : {'Content-Type': 'application/json;charset=utf-8'},\r\n    body : JSON.stringify({uid})\r\n  }\r\n  const res = await fetch(url, opts)\r\n\r\n  return res.json()\r\n}","import {requestSchedule} from './schedule'\r\nimport {registerUser,requestUser} from './user'\r\nimport {addGroup,delGroup} from './group'\r\nimport {requestEvents} from './profile'\r\n\r\nexport default {\r\n  requestSchedule,\r\n  requestUser,\r\n  delGroup,\r\n  requestEvents,\r\n  registerUser,\r\n  addGroup,\r\n}","import { BASE_URL } from \"./constants\"\r\n\r\nexport const requestEvents = async () => {\r\n  const url = `${BASE_URL}/events`\r\n  const res = await fetch(url)\r\n\r\n  return await res.json()\r\n}","import { Lesson } from \"../types/Lesson\"\r\n\r\nexport const getTimeByLesson = (id : Lesson) => {\r\n  return [\r\n    ['08:15', '09:50'],\r\n    ['10:00', '11:35'],\r\n    ['11:45', '13:20'],\r\n    ['12:35', '14:10'],\r\n    ['14:20', '15:55'],\r\n    ['16:05', '17:40'],\r\n    ['17:50', '19:25'],\r\n    ['19:35', '21:10'],\r\n  ][id]\r\n}","import { ILesson } from \"../types/ILesson\";\r\nimport { PlainLesson } from \"../types/PlainLesson\";\r\nimport { getTimeByLesson } from \"./getTimeByLesson\";\r\n\r\nexport const normalizeLesson = (lesson : PlainLesson) : ILesson => {\r\n  const time = getTimeByLesson(lesson.coords.j)\r\n\r\n  const group = lesson.coords.k !== 2 ? `(${lesson.coords.k + 1} гр.)` : ''\r\n\r\n  return {\r\n    place : lesson.place,\r\n    type : lesson.type,\r\n    subject : `${lesson.subject}${group}`,\r\n    fromWhoms : lesson.fromWhoms,\r\n    time,\r\n  }\r\n}","import { ILesson } from \"../types/ILesson\";\r\nimport { PlainLesson } from \"../types/PlainLesson\";\r\nimport { normalizeLesson } from \"./normalizeLesson\";\r\n\r\nexport const selectDay = (\r\n  lessons : PlainLesson[],\r\n  day : number,\r\n  week : number\r\n) : ILesson[] => {\r\n  return lessons.filter(l => {\r\n    const { i, z } = l.coords\r\n\r\n    return i === day && (z === week || z === 2)\r\n  }).map(normalizeLesson)\r\n}","import { Day } from \"../types/Day\"\r\n\r\nexport const currentDay = () : Day => {\r\n  const id = new Date().getDay()\r\n\r\n  return (id > 0 ? id - 1 : id) as Day\r\n}","import weeks from '../data/weeks.json'\r\n\r\nimport { Week } from '../types/Week'\r\n\r\nexport const currentWeek = () : Week => {\r\n  const now = new Date()\r\n  const ms = now.getTime()\r\n  const d = now.getDay()\r\n\r\n  const week = weeks.filter(({date : [start, end]}) => ms >= start && ms <= end)[0].week\r\n\r\n  return (d !== 0 ? week : (week === 0 ? 1 : 0)) as Week\r\n}","import { Day } from \"../types/Day\"\r\nimport { Week } from \"../types/Week\"\r\nimport { currentWeek } from \"./currentWeek\"\r\n\r\nexport const currentLesson = (time : string[], day : Day, week : Week) : boolean => {\r\n  const now = new Date()\r\n\r\n  if(now.getDay() === day + 1 && week === currentWeek())\r\n  {\r\n    const TEN_MIN = 10 * 60 * 1000\r\n\r\n    const [start, end] = time    \r\n    const [sh, sm] = start.split(':').map(d => +d)\r\n    const lessonStart = new Date().setHours(sh, sm) - TEN_MIN\r\n    const [eh, em] = end.split(':').map(d => +d)\r\n    const lessonEnd = new Date().setHours(eh, em)\r\n\r\n    const n = now.getTime()\r\n\r\n    return lessonStart <= n && n <= lessonEnd\r\n  }\r\n\r\n  return false\r\n}","import { FromWhom } from \"../types/ILesson\"\r\n\r\nexport const useLastSchedules = (limit : number) => {\r\n  const LAST_SCHEDULES = 'lastSchedules'\r\n\r\n  const lsLast = localStorage.getItem(LAST_SCHEDULES)\r\n  const last : FromWhom[] = lsLast ? JSON.parse(lsLast) : []\r\n\r\n  const setLast = (s : FromWhom) => {\r\n    const overloadFilter = (fw : FromWhom, i : number) =>\r\n      fw.href.replace('&', '') !== s.href.replace('&', '') && i !== last.length - 1\r\n    const normalFilter = (fw : FromWhom) => fw.href.replace('&', '') !== s.href.replace('&', '')\r\n\r\n    const filterLast = last.filter(last.length < limit ? normalFilter : overloadFilter)    \r\n    const newLast = [s, ...filterLast]\r\n\r\n    localStorage.setItem(LAST_SCHEDULES, JSON.stringify(newLast))\r\n  }\r\n\r\n  return { last, setLast }\r\n}","const createBackground = (from : string, to : string) =>\r\n  `linear-gradient(45deg, ${from} 0%, ${to} 100%)`\r\n\r\nexport const getBackgrounds = (count : number) => {\r\n  const BACKGROUNDS = [\r\n    createBackground('#ed765e', '#fea858'),\r\n    createBackground('#4b086d', '#acc0fe'),\r\n    createBackground('#f6a09a', '#8a1f1d'),\r\n    createBackground('#f2ecb6', '#a96f44'),\r\n    createBackground('#50d5b7', '#067d68'),\r\n    createBackground('#f6b2e1', '#58126a'),\r\n    createBackground('#0c7bb3', '#f2bae8'),\r\n    createBackground('#e3ff73', '#e27c39'),\r\n    createBackground('#e65758', '#771d32'),\r\n    createBackground('#b60f46', '#d592ff'),\r\n    createBackground('#849b5c', '#bfffc7'),\r\n  ]\r\n\r\n  const bgs = []\r\n  while(bgs.length < count)\r\n  {\r\n    const id = Math.floor(Math.random() * BACKGROUNDS.length)\r\n    const [bg] = BACKGROUNDS.splice(id, 1)\r\n\r\n    bgs.push(bg)\r\n  }\r\n  \r\n  return bgs\r\n}","import { createAsyncThunk, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\n\r\nimport API from \"../../API\";\r\n\r\nimport { MenuItem } from '../../panels/Schedule'\r\nimport { Day } from \"../../types/Day\";\r\nimport { FromWhom } from \"../../types/ILesson\";\r\nimport { PlainLesson } from \"../../types/PlainLesson\";\r\nimport { Week } from \"../../types/Week\";\r\nimport { currentDay, currentWeek } from \"../../utils\";\r\nimport { RootState } from \"../rootReducer\";\r\n\r\ninterface Exam\r\n{\r\n  place: string\r\n  subject: string\r\n  type : 3 | 4\r\n  fromWhoms: FromWhom[]\r\n}\r\n\r\nexport interface ScheduleData\r\n{\r\n  title : string\r\n  href : string\r\n  schedule : PlainLesson[]\r\n  exams : Exam[]\r\n}\r\n\r\ninterface ScheduleState\r\n{\r\n  activeMode : MenuItem\r\n  isDiff : boolean\r\n  day : Day\r\n  week : Week\r\n  activeSubject : string | null\r\n  loading : boolean\r\n  error : boolean\r\n  activeSchedule : ScheduleData | null\r\n  schedules : ScheduleData[] // ??? ILesson[]\r\n  history : string[]\r\n}\r\n\r\ntype RequestScheduleParam = {href : string, add ?: boolean}\r\n\r\nexport const requestSchedule = createAsyncThunk(\r\n  'schedule/request',\r\n  async ({href} : RequestScheduleParam, thunkAPI) => {    \r\n    const schedules = (thunkAPI.getState() as RootState).schedule.schedules\r\n    const schedule = schedules.find(s => s.href === href.replace('&', ''))\r\n    \r\n    if(schedule) return { uniq : false, schedule}\r\n\r\n    const data = await API.requestSchedule(href)\r\n    return { uniq : true, schedule : data}\r\n  }\r\n)\r\n\r\nconst initialState : ScheduleState = {\r\n  activeMode : { text : 'По дням', id : 'byDays' },\r\n  isDiff : false,\r\n  day : currentDay(),\r\n  week : currentWeek(),\r\n  activeSubject : null,\r\n  loading : false,\r\n  error : false,\r\n  activeSchedule : null,\r\n  schedules : [],\r\n  history : [],\r\n}\r\n\r\nconst scheduleSlice = createSlice({\r\n  name : 'schedule',\r\n  initialState,\r\n  reducers : {\r\n    changeMode(state, action : PayloadAction<MenuItem>)\r\n    {\r\n      state.activeMode = action.payload\r\n    },\r\n    changeDay(state, action : PayloadAction<Day>)\r\n    {\r\n      state.day = action.payload\r\n    },\r\n    changeWeek(state, action : PayloadAction<Week>)\r\n    {\r\n      state.week = action.payload\r\n    },\r\n    setSubject(state, action)\r\n    {\r\n      state.activeSubject = action.payload\r\n    },\r\n    setIsDiff(state, action)\r\n    {\r\n      state.isDiff = action.payload\r\n    },\r\n    popHistory(state)\r\n    {\r\n      state.isDiff = false\r\n      state.history.pop()\r\n      if(state.history.length !== 0)\r\n      {\r\n        const newActiveHref = state.history[state.history.length - 1]\r\n        const schedule = state.schedules.find(s => s.href === newActiveHref) as ScheduleData\r\n        \r\n        if(!schedule.exams && state.activeMode.id === 'exams')\r\n          state.activeMode = initialState.activeMode\r\n\r\n        state.activeSchedule = schedule\r\n      }\r\n    },\r\n    clearHistory(state)\r\n    {\r\n      state.history = []\r\n      state.isDiff = false\r\n    }\r\n  },\r\n  extraReducers(builder)\r\n  {\r\n    builder\r\n      .addCase(requestSchedule.pending,(state, action) => {\r\n        state.loading = true\r\n        state.error = false\r\n        state.activeSchedule = null\r\n        \r\n        const { add = true, href } = action.meta.arg\r\n        if(add)\r\n          state.history.push(href.replace('&', ''))\r\n      })\r\n      .addCase(requestSchedule.rejected,(state) => {\r\n        state.loading = false\r\n        state.error = true\r\n        state.isDiff = false\r\n      })\r\n      .addCase(requestSchedule.fulfilled,(state, action) => {\r\n        state.loading = false\r\n        state.error = false\r\n        const {uniq, schedule} = action.payload\r\n        state.activeSchedule = schedule as ScheduleData\r\n        if(uniq)\r\n          state.schedules.push(schedule)\r\n\r\n        if(!schedule.exams && state.activeMode.id === 'exams')\r\n          state.activeMode = initialState.activeMode\r\n      })\r\n  },\r\n})\r\n\r\nexport const { changeMode, changeDay, changeWeek, setSubject, popHistory, setIsDiff, clearHistory } = scheduleSlice.actions\r\nexport default scheduleSlice.reducer","import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\r\nimport { FromWhom } from \"../../types/ILesson\";\r\nimport API from '../../API'\r\nimport { ScheduleData } from \"./schedule\";\r\nimport { getBackgrounds } from \"../../utils\";\r\n\r\ninterface User\r\n{\r\n  id : number\r\n  group : string\r\n  myGroup : ScheduleData | null\r\n  fromWhoms : FromWhom[]  \r\n}\r\n\r\ninterface ProfileState\r\n{\r\n  events : (FromWhom & {background : string})[]\r\n  loadingEvents : boolean\r\n  errorEvents : boolean\r\n\r\n  user : User | null\r\n  userId : number | null\r\n  loadingUser : boolean\r\n  errorUser : boolean\r\n}\r\n\r\nexport const requestUser = createAsyncThunk(\r\n  'user/request',\r\n  async (id : number) => {\r\n    const user = await API.requestUser(id)\r\n    if(user) return user\r\n\r\n    const res = await API.registerUser(id)\r\n\r\n    return res\r\n  }\r\n)\r\n\r\nexport const requestEvents = createAsyncThunk(\r\n  'events/request', API.requestEvents\r\n)\r\n\r\nexport const addGroup = createAsyncThunk(\r\n  'group/add',\r\n  async ({uid, group} : {uid : number, group : string}) => {\r\n    const data = await API.addGroup({uid, group})\r\n\r\n    return data\r\n  }\r\n)\r\n\r\nexport const delGroup = createAsyncThunk(\r\n  'group/del',\r\n  async (id : number) => {\r\n    const data = await API.delGroup(id)\r\n\r\n    return data\r\n  }\r\n)\r\n\r\nconst initialState : ProfileState = {\r\n  events : [],\r\n  loadingEvents : false,\r\n  errorEvents : false,\r\n\r\n  user : null,\r\n  // user : { id : 17, groupId : '', myGroup : null, fromWhoms : [] },\r\n  userId : null,\r\n  loadingUser : true,\r\n  errorUser : false,\r\n}\r\n\r\nconst profileSlice = createSlice({\r\n  name : 'profile',\r\n  initialState,\r\n  reducers : {},\r\n  extraReducers(builder)\r\n  {\r\n    builder\r\n      .addCase(requestUser.pending, (state, action) => {\r\n        state.loadingUser = true\r\n        state.errorUser = false\r\n        state.userId = action.meta.arg\r\n      })\r\n      .addCase(requestUser.rejected, (state) => {\r\n        state.loadingUser = false\r\n        state.errorUser = true\r\n      })\r\n      .addCase(requestUser.fulfilled, (state, action) => {\r\n        state.loadingUser = false\r\n        state.errorUser = false\r\n        state.user = action.payload\r\n      })\r\n\r\n      .addCase(addGroup.pending, (state) => {\r\n        state.loadingUser = true\r\n        state.errorUser = false\r\n      })\r\n      .addCase(addGroup.rejected, (state) => {\r\n        state.loadingUser = false\r\n        state.errorUser = true\r\n      })\r\n      .addCase(addGroup.fulfilled, (state, action) => {\r\n        state.loadingUser = false\r\n        state.errorUser = false\r\n        state.user!.group = action.payload.group\r\n        state.user!.myGroup = action.payload.myGroup\r\n        state.user!.fromWhoms = action.payload.fromWhoms\r\n      })\r\n\r\n      .addCase(delGroup.pending, (state) => {\r\n        state.loadingUser = true\r\n        state.errorUser = false\r\n      })\r\n      .addCase(delGroup.rejected, (state) => {\r\n        state.loadingUser = false\r\n        state.errorUser = true\r\n      })\r\n      .addCase(delGroup.fulfilled, (state) => {\r\n        state.loadingUser = false\r\n        state.errorUser = false\r\n        state.user!.group = ''\r\n        state.user!.myGroup = null\r\n        state.user!.fromWhoms = []\r\n      })\r\n\r\n      .addCase(requestEvents.pending, (state) => {\r\n        state.loadingEvents = true\r\n        state.errorEvents = false\r\n      })\r\n      .addCase(requestEvents.rejected, (state) => {\r\n        state.loadingEvents = false\r\n        state.errorEvents = true\r\n      })\r\n      .addCase(requestEvents.fulfilled, (state, action) => {\r\n        state.loadingEvents = false\r\n        state.errorEvents = false\r\n\r\n        const events = (action.payload as FromWhom[])\r\n        const bgs = getBackgrounds(events.length)\r\n        state.events = events.map((e,i) => ({ ...e, background : bgs[i] }))\r\n      })\r\n  }\r\n})\r\n\r\nexport default profileSlice.reducer","import { combineReducers } from \"@reduxjs/toolkit\"\r\n\r\nimport navigation from './slices/navigation'\r\nimport search from './slices/search'\r\nimport schedule from './slices/schedule'\r\nimport profile from './slices/profile'\r\n\r\nconst rootReducer = combineReducers({\r\n  navigation,\r\n  search,\r\n  schedule,\r\n  profile,\r\n})\r\n\r\nexport type RootState = ReturnType<typeof rootReducer>\r\nexport default rootReducer","import { configureStore } from \"@reduxjs/toolkit\"\r\n\r\nimport rootReducer from './rootReducer'\r\n\r\nconst store = configureStore({ reducer : rootReducer })\r\n\r\nexport default store","import React from 'react'\r\nimport './Title.sass'\r\n\r\nimport { Card, Div } from '@vkontakte/vkui'\r\nimport Icon28Favorite from '@vkontakte/icons/dist/28/favorite'\r\nimport Icon28ViewOutline from '@vkontakte/icons/dist/28/view_outline'\r\n\r\nexport interface TitleProps\r\n{\r\n  title : string\r\n  isDiff ?: boolean\r\n  mySchedule ?: boolean\r\n}\r\n\r\nconst Title : React.FC<TitleProps> = ({\r\n  title,\r\n  mySchedule = false,\r\n  isDiff = false\r\n}) => {\r\n  return(\r\n    <Div>\r\n      <Card>\r\n        <Div className='title'>\r\n          {isDiff && <Icon28ViewOutline height=\"20\" width=\"20\" fill=\"#4bb34b\" />}\r\n          {title}\r\n          {mySchedule && <Icon28Favorite height=\"20\" width=\"20\" fill=\"#cc00ff\" />}\r\n        </Div>\r\n      </Card>\r\n    </Div>\r\n  )\r\n}\r\n\r\nexport default Title","import React from 'react'\r\nimport './Lesson.sass'\r\n\r\nimport Icon28InfoCircleOutline from '@vkontakte/icons/dist/28/info_outline'\r\n\r\nimport { FromWhom, ILesson } from '../../types/ILesson'\r\nimport { requestSchedule, setIsDiff, setSubject } from '../../redux/slices/schedule'\r\nimport { useDispatch } from 'react-redux'\r\nimport { useLastSchedules } from '../../utils'\r\nimport { COUNT_LAST_SCHEDULES } from '../../constans'\r\n\r\ninterface LessonProps extends ILesson\r\n{\r\n  current : boolean\r\n  infoShow : boolean\r\n}\r\n\r\nconst Lesson : React.FC<LessonProps> = ({\r\n  time,\r\n  place,\r\n  type,\r\n  subject,\r\n  fromWhoms,\r\n  current,\r\n  infoShow\r\n}) => {\r\n  const dispatch = useDispatch()\r\n\r\n  const { setLast } = useLastSchedules(COUNT_LAST_SCHEDULES)\r\n  \r\n  const getStats = (subject : string) => {\r\n    if(type > 2) return\r\n    \r\n    const s = subject.replace(/\\(\\d гр.\\)/,'')\r\n    dispatch(setSubject(s))\r\n  }\r\n\r\n  const goToSchedule = (s : FromWhom) => {\r\n    setLast(s)\r\n    dispatch(requestSchedule({href : s.href}))\r\n    dispatch(setIsDiff(false))\r\n  }\r\n\r\n  return(\r\n    <div className=\"lesson-wrapper\">\r\n      <div className={`lesson__time ${current ? `lesson__time-current` : ''}`}>\r\n        {time?.map((t, i) => <div key={i}>{t}</div> )}\r\n      </div>\r\n      <div className={`lesson__info lesson__info-${['lec', 'pr', 'lab', 'cons', 'exam'][type]}`}>\r\n        <div className=\"lesson__place\">{place}</div>\r\n        <div\r\n          className=\"lesson__subject\"\r\n          onClick={() => getStats(subject)}\r\n        >\r\n          <div className=\"lesson__subject-text\">{subject}</div>\r\n          {infoShow && <Icon28InfoCircleOutline style={{marginLeft:4}} width=\"18\" height=\"18\"/>}\r\n        </div>\r\n        <div className=\"lesson__fromWhoms\">\r\n          {fromWhoms.map((fw, i) => {\r\n            return(\r\n              <div\r\n                key={i}\r\n                className=\"linkable\"\r\n                onClick={() => goToSchedule(fw)}\r\n              >{fw.title}</div>\r\n            )\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Lesson","import React from 'react'\r\n\r\nimport { Card, Div } from '@vkontakte/vkui'\r\n\r\nimport Lesson from '../Lesson'\r\n\r\nimport { ILesson } from '../../types/ILesson'\r\nimport { Day } from '../../types/Day'\r\nimport { Week } from '../../types/Week'\r\nimport { currentLesson } from '../../utils'\r\n\r\nexport interface DayCardProps\r\n{\r\n  lessons : ILesson[]\r\n  day ?: Day\r\n  week ?: Week\r\n  infoShow ?: boolean\r\n}\r\n\r\nconst DayCard : React.FC<DayCardProps> = ({\r\n  lessons,\r\n  day,\r\n  week,\r\n  infoShow = true\r\n}) => {\r\n  return(\r\n    <Div>\r\n      <Card className='day-card'>\r\n        <Div>\r\n          {lessons.map((l,i) => {\r\n            const isExam = day === undefined && week === undefined\r\n            const current = isExam ? false : currentLesson(l.time!, day!, week!)\r\n\r\n            return <Lesson infoShow={infoShow} key={i} {...l} current={current} />\r\n          })}\r\n        </Div>\r\n      </Card>\r\n    </Div>\r\n  )\r\n}\r\n\r\nexport default DayCard","import React from 'react'\r\nimport './Cell.sass'\r\n\r\nimport { PlainLesson } from '../../types/PlainLesson'\r\nimport { currentLesson, currentWeek, getTimeByLesson } from '../../utils'\r\nimport { useDispatch } from 'react-redux'\r\nimport { requestSchedule, setIsDiff, setSubject } from '../../redux/slices/schedule'\r\nimport { useLastSchedules } from '../../utils'\r\nimport { FromWhom } from '../../types/ILesson'\r\nimport { COUNT_LAST_SCHEDULES } from '../../constans'\r\n\r\ninterface SingleCellProps\r\n{\r\n  column : number\r\n  row : number\r\n  lesson : PlainLesson\r\n}\r\n\r\nconst SingleCell : React.FC<SingleCellProps> = ({\r\n  lesson,\r\n  column,\r\n  row\r\n}) => {\r\n  const dispatch = useDispatch()\r\n\r\n  const { setLast } = useLastSchedules(COUNT_LAST_SCHEDULES)\r\n\r\n  const getStats = (subject : string) => {\r\n    const s = subject.replace(/\\(\\d гр.\\)/,'')\r\n    dispatch(setSubject(s))\r\n  }\r\n\r\n  const goToSchedule = (s : FromWhom) => {\r\n    setLast(s)\r\n    dispatch(requestSchedule({href : s.href}))\r\n    dispatch(setIsDiff(false))\r\n  }\r\n\r\n  const w = lesson.coords.z\r\n  const cn = [\r\n    lesson.coords.j === 3 ? 'break_bottom' : '',\r\n    currentLesson(getTimeByLesson(lesson.coords.j), lesson.coords.i, w === 2 ? currentWeek() : w) ? 'current' : ''\r\n  ].join(' ')\r\n\r\n  return(\r\n    <div\r\n      className=\"cell cell__single\"\r\n      style={{\r\n        gridRow : row,\r\n        gridColumn : column,\r\n      }}\r\n    >\r\n      <div className=\"cell__single-place\">{lesson.place}</div>\r\n      <div\r\n        className={`cell__single-subject ${cn}`}\r\n        onClick={() => getStats(lesson.subject)}\r\n      >{lesson.subject}</div>\r\n      <div className=\"cell__single-fromWhoms\">\r\n        {lesson.fromWhoms.map((fw, i) => {\r\n          return <div\r\n            key={i}\r\n            onClick={() => goToSchedule(fw)}\r\n            className={'linkable'}\r\n          >{fw.title}</div>\r\n        })}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SingleCell","import React from 'react'\r\nimport './Cell.sass'\r\n\r\nimport { PlainLesson } from '../../types/PlainLesson'\r\nimport SingleCell from './SingleCell'\r\n\r\ninterface HalfCellProps\r\n{\r\n  column : number\r\n  row : number\r\n  lessons : PlainLesson[]\r\n}\r\n\r\nconst HalfCell : React.FC<HalfCellProps> = ({\r\n  column,\r\n  row,\r\n  lessons\r\n}) => {\r\n  const isHalf = lessons[0].coords.k === 2\r\n  const grid = {[`gridTemplate${isHalf ? 'Rows' : 'Columns'}`] : 'repeat(2,1fr)'}\r\n\r\n  return(\r\n    <div\r\n      className=\"cell__half\"\r\n      style={{\r\n        ...grid,\r\n        gridRow : row,\r\n        gridColumn : column,\r\n      }}\r\n    >\r\n      {lessons.map((l, i) => {\r\n        const column = isHalf ? 1 : l.coords.k + 1\r\n        const row = isHalf ? l.coords.z + 1 : 1\r\n\r\n        return <SingleCell key={i} column={column} row={row} lesson={l} />\r\n      })}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default HalfCell","import React from 'react'\r\nimport './Cell.sass'\r\n\r\nimport { PlainLesson } from '../../types/PlainLesson'\r\nimport SingleCell from './SingleCell'\r\n\r\ninterface QuarterCellProps\r\n{\r\n  column : number\r\n  row : number\r\n  lessons : PlainLesson[]\r\n}\r\n\r\nconst QuarterCell : React.FC<QuarterCellProps> = ({\r\n  column,\r\n  row,\r\n  lessons\r\n}) => {\r\n  return(\r\n    <div\r\n      className=\"cell__quarter\"\r\n      style={{\r\n        gridRow : row,\r\n        gridColumn : column,\r\n      }}\r\n    >\r\n      {lessons.map((l, i) => {\r\n        const column = l.coords.k + 1\r\n        const row = l.coords.z + 1\r\n\r\n        return <SingleCell key={i} column={column} row={row} lesson={l} />\r\n      })}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default QuarterCell","import React from 'react'\r\nimport './FullSchedule.sass'\r\n\r\nimport { Card } from '@vkontakte/vkui'\r\n\r\nimport SingleCell from '../Cell/SingleCell'\r\nimport HalfCell from '../Cell/HalfCell'\r\nimport QuarterCell from '../Cell/QuarterCell'\r\n\r\nimport { IDay } from '../../utils/fullSchedule'\r\nimport { PlainLesson } from '../../types/PlainLesson'\r\nimport { currentDay, fullSchedule } from '../../utils'\r\n\r\ninterface FullScheduleProps\r\n{\r\n  schedule : PlainLesson[]\r\n}\r\n\r\nconst HEADERS = [\r\n  'Время',\r\n  'Понедельник',\r\n  'Вторник',\r\n  'Среда',\r\n  'Четверг',\r\n  'Пятница',\r\n  'Суббота'\r\n]\r\n\r\nconst TIME = [\r\n  ['08:15', '09:50'],\r\n  ['10:00', '11:35'],\r\n  ['11:45', '12:35', '13:20','14:10'],\r\n  ['14:20', '15:55'],\r\n  ['16:05', '17:40'],\r\n  ['17:50', '19:25'],\r\n  ['19:35', '21:10'],\r\n]\r\n\r\nconst FullSchedule : React.FC<FullScheduleProps> = ({\r\n  schedule\r\n}) => {\r\n  const lastLessonNum = schedule.reduce((max : number, l) => {\r\n    const j = l.coords.j\r\n    const lessonNum = j > 2 ? j - 1 : j\r\n\r\n    return lessonNum > max ? lessonNum : max\r\n  }, 0)\r\n\r\n  const full = fullSchedule(schedule)\r\n\r\n  return(\r\n    <div className=\"card__wrapper-vertical\">\r\n      <div className=\"card__wrapper-horizontal\">\r\n        <div\r\n          className=\"card__container\"\r\n          style={{\r\n            gridTemplateRows : `18px repeat(${lastLessonNum + 1},auto)`\r\n          }}\r\n        >\r\n          {HEADERS.slice(0, full[full.length - 1].day + 2).map((h, i) => {\r\n            const cn = (currentDay() + 1 === i) ? 'current' : ''\r\n\r\n            return <div\r\n              key={i}\r\n              className={`card__cell card__cell-header ${cn}`}\r\n              style={{ gridRow : 1, gridColumn : i + 1 }}\r\n            >{h}</div>\r\n          })}\r\n          {TIME.slice(0, lastLessonNum + 1).map((time, i) => {\r\n            return <div\r\n              key={i}\r\n              className=\"card__cell card__cell-time\"\r\n              style={{ gridRow : i + 2, gridColumn : 1 }}\r\n            >\r\n              {time.map((t, j) => {\r\n                const cn = (i === 2 && (j === 1 || j === 3)) ? 'break-bottom' : ''\r\n\r\n                return <div key={j} className={cn}>{t}</div>\r\n              })}\r\n            </div>\r\n          })}\r\n          {\r\n            full.reduce((cells : React.ReactNode[], d : IDay) : React.ReactNode[] => {\r\n              const lessons = d.lessons.map(l => {\r\n                const column = d.day + 2\r\n                const row = l.lessonNum + 2\r\n\r\n                const isHalf = l.children[0].coords.z !== 2\r\n                const isHalfQuarter = l.children[0].coords.k !== 2\r\n                const isQuarter = isHalf && isHalfQuarter\r\n\r\n                const key = Object.values(l.children[0].coords).reduce((k : string,c : number) : string => k + c ,'')\r\n\r\n                if(isQuarter) return <QuarterCell key={key} column={column} row={row} lessons={l.children} />\r\n                else if(isHalf) return <HalfCell key={key} column={column} row={row} lessons={l.children} />\r\n                else if(isHalfQuarter) return <HalfCell key={key} column={column} row={row} lessons={l.children} />\r\n                else return <SingleCell key={key} column={column} row={row} lesson={l.children[0]} />\r\n              })\r\n\r\n              return [...cells, ...lessons] as React.ReactNode[]\r\n            }, [])\r\n          }\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default FullSchedule","import { Day } from \"../types/Day\";\r\nimport { Lesson } from \"../types/Lesson\";\r\nimport { PlainLesson } from \"../types/PlainLesson\";\r\n\r\ninterface ILesson\r\n{\r\n  lessonNum : Lesson\r\n  children : PlainLesson[]\r\n}\r\n\r\nexport interface IDay\r\n{\r\n  day : Day\r\n  lessons : ILesson[]\r\n}\r\n\r\nexport const fullSchedule = (schedule : PlainLesson[]) : IDay[] => {\r\n  const data : IDay[] = []\r\n\r\n  schedule.forEach((l,i) => {\r\n    const dayId = l.coords.i\r\n    const j = l.coords.j\r\n    const lessonId = (j > 2 ? j - 1 : j) as Lesson\r\n    \r\n    if(!data[dayId])\r\n      data[dayId] = { day : dayId, lessons : [] }\r\n      \r\n    if(!data[dayId].lessons[lessonId])\r\n      data[dayId].lessons[lessonId] = { lessonNum: lessonId, children: [] }\r\n      \r\n    data[dayId].lessons[lessonId].children.push(l)\r\n  })\r\n  \r\n  return data\r\n}","import React from 'react'\r\nimport './TabsSchedule.sass'\r\n\r\nimport { Tabs, TabsItem } from '@vkontakte/vkui'\r\n\r\nimport { Day } from '../../types/Day'\r\nimport { Week } from '../../types/Week'\r\nimport { currentDay, currentWeek } from '../../utils'\r\nimport { useDispatch } from 'react-redux'\r\nimport { changeDay, changeWeek } from '../../redux/slices/schedule'\r\n\r\nexport interface TabsScheduleProps\r\n{\r\n  week : Week\r\n  day : Day\r\n}\r\n\r\nconst DAYS = ['ПН','ВТ','СР','ЧТ','ПТ','СБ']\r\n\r\nconst TabsSchedule : React.FC<TabsScheduleProps> = ({\r\n  week,\r\n  day,\r\n}) => {\r\n  const dispatch = useDispatch()\r\n\r\n  return(\r\n    <>\r\n      <Tabs mode=\"default\" style={{ fontSize : '12px' }}>\r\n        <TabsItem\r\n          style={{ color : currentWeek() === 0 ? 'red' : '' }}\r\n          onClick={() => dispatch(changeWeek(0))} selected={week === 0}\r\n        >Числитель</TabsItem>\r\n        <TabsItem\r\n          style={{ color : currentWeek() === 1 ? 'red' : '' }}\r\n          onClick={() => dispatch(changeWeek(1))} selected={week === 1}\r\n        >Знаменатель</TabsItem>\r\n      </Tabs>\r\n      <Tabs mode=\"default\" style={{ fontSize : '12px' }}>\r\n        {DAYS.map((d, i) => {\r\n          const selected = i === day\r\n\r\n          return <TabsItem\r\n            key={i}\r\n            selected={selected}\r\n            style={{ color : currentDay() === i ? 'red' : '' }}\r\n            onClick={() => dispatch(changeDay(i as Day))}\r\n          >{d}</TabsItem>\r\n        })}\r\n      </Tabs>    \r\n    </>\r\n  )\r\n}\r\n\r\nexport default TabsSchedule","import React from 'react'\r\nimport { Gallery } from '@vkontakte/vkui'\r\n\r\nimport DayCard from '../DayCard'\r\nimport TabsSchedule from '../TabsSchedule'\r\nimport { selectDay } from '../../utils'\r\nimport { PlainLesson } from '../../types/PlainLesson'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { changeDay } from '../../redux/slices/schedule'\r\nimport { RootState } from '../../redux/rootReducer'\r\nimport { Day } from '../../types/Day'\r\n\r\ninterface ByDayProps\r\n{\r\n  schedule : PlainLesson[]\r\n}\r\n\r\nconst DAYS = [0,1,2,3,4,5]\r\n\r\nconst ByDay : React.FC<ByDayProps> = ({\r\n  schedule\r\n}) => {\r\n  const dispatch = useDispatch()\r\n  const { day, week } = useSelector((s : RootState) => s.schedule)\r\n  \r\n  const dayChange = (d : Day) => dispatch(changeDay(d))\r\n\r\n  return(\r\n    <>\r\n      <TabsSchedule week={week} day={day} />\r\n      <Gallery\r\n        style={{height:'100%'}}\r\n        slideIndex={day}\r\n        onChange={dayChange}\r\n      >\r\n        {DAYS.map(d => {\r\n          return <DayCard key={d} day={day} week={week} lessons={selectDay(schedule, d, week)} />\r\n        })}\r\n      </Gallery>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ByDay","import React from 'react'\r\n\r\nimport Icon28ArticleOutline from '@vkontakte/icons/dist/28/article_outline' // по дням\r\nimport Icon28GridSquareOutline from '@vkontakte/icons/dist/28/grid_square_outline' // полностью\r\nimport Icon28Users3Outline from '@vkontakte/icons/dist/28/users_3_outline' // экзамены\r\nimport Icon28FavoriteOutline from '@vkontakte/icons/dist/28/favorite_outline' // сохранить\r\nimport Icon28UnfavoriteOutline from '@vkontakte/icons/dist/28/unfavorite_outline' // удалить\r\nimport Icon28ViewOutline from '@vkontakte/icons/dist/28/view_outline' // разница\r\nimport Icon28HideOutline from '@vkontakte/icons/dist/28/hide_outline' // без разницы\r\n\r\nexport type MenuItemId =  'byDays' | 'full' | 'exams' | 'without_diff' | 'with_diff' | 'save' | 'delete'\r\n\r\ninterface MenuItemIconProps\r\n{\r\n  id : MenuItemId\r\n}\r\n\r\nconst MenuItemIcon : React.FC<MenuItemIconProps> = ({\r\n  id\r\n}) => {\r\n  switch(id)\r\n  {\r\n    case 'byDays': return <Icon28ArticleOutline />\r\n    case 'full': return <Icon28GridSquareOutline />\r\n    case 'exams': return <Icon28Users3Outline />\r\n    case 'save': return <Icon28FavoriteOutline fill=\"orange\" />\r\n    case 'delete': return <Icon28UnfavoriteOutline fill=\"red\" />\r\n    case 'with_diff': return <Icon28ViewOutline fill=\"#4bb34b\" />\r\n    case 'without_diff': return <Icon28HideOutline fill=\"gray\" />\r\n  }\r\n}\r\n\r\nexport default MenuItemIcon","import React from 'react'\r\nimport './Schedule.sass'\r\n\r\nimport { Button, Cell, List, Panel, PanelHeader, PanelHeaderBack, PanelHeaderContext, PanelSpinner, Placeholder } from \"@vkontakte/vkui\"\r\nimport Icon16Dropdown from '@vkontakte/icons/dist/16/dropdown'\r\nimport Icon24Done from '@vkontakte/icons/dist/24/done'\r\n\r\nimport Title from '../../components/Title'\r\nimport DayCard from '../../components/DayCard'\r\nimport FullSchedule from '../../components/FullSchedule'\r\nimport ByDay from '../../components/ByDay'\r\n\r\nimport { ILesson } from '../../types/ILesson'\r\nimport { PlainLesson } from '../../types/PlainLesson'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { RootState } from '../../redux/rootReducer'\r\nimport { changeMode, popHistory, requestSchedule, setIsDiff } from '../../redux/slices/schedule'\r\nimport { changePanel } from '../../redux/slices/navigation'\r\nimport { SCHEDULE_STORY, SEARCH_PANEL } from '../../constans'\r\nimport { addGroup, delGroup } from '../../redux/slices/profile'\r\nimport MenuItemIcon, { MenuItemId } from './MenuItemIcon'\r\nimport { getDiff } from '../../utils/'\r\n\r\ninterface ISchedulePanelProps\r\n{\r\n  id : string\r\n}\r\n\r\nexport type MenuItem = { text : string, id : string }\r\nconst MENU = [\r\n  { text : 'По дням', id : 'byDays' },\r\n  { text : 'Полностью', id : 'full' },\r\n  { text : 'Экзамены', id : 'exams' },\r\n  { text : 'Без разницы', id : 'without_diff' },\r\n  { text : 'Разница', id : 'with_diff' },\r\n  { text : 'Сохранить', id : 'save' },\r\n  { text : 'Удалить', id : 'delete' },\r\n]\r\n\r\nconst Schedule : React.FC<ISchedulePanelProps> = ({\r\n  id,\r\n}) => {\r\n  const dispatch = useDispatch()\r\n  const { activeMode, activeSchedule, loading, error, history, isDiff } = useSelector((s : RootState) => s.schedule)\r\n  const { user } = useSelector((s : RootState) => s.profile)\r\n\r\n  const [menuOpened, setMenuOpened] = React.useState<boolean>(false)\r\n  const toggleMenu = () => setMenuOpened(!menuOpened && !loading)\r\n\r\n  const selectMenuItem = (item : MenuItem) => {\r\n    if(item.id !== activeMode.id)\r\n    {\r\n      if(item.id === 'save' && user)\r\n      {\r\n        dispatch(addGroup({uid : user.id, group : history[history.length-1]}))\r\n        dispatch(setIsDiff(false))\r\n      }\r\n      else if(item.id === 'delete' && user)\r\n      {\r\n        dispatch(delGroup(user.id))\r\n        dispatch(setIsDiff(false))\r\n      }\r\n      else if(item.id === 'with_diff' || item.id === 'without_diff')\r\n      {\r\n        dispatch(setIsDiff(item.id === 'with_diff'))\r\n      }\r\n      else if(item.id === 'exams')\r\n      {\r\n        dispatch(changeMode(item))\r\n        dispatch(setIsDiff(false))\r\n      }\r\n      else dispatch(changeMode(item))\r\n    }\r\n\r\n    requestAnimationFrame(toggleMenu)\r\n  }\r\n\r\n  const goBack = () => {\r\n    dispatch(popHistory())\r\n\r\n    if(history.length < 2)\r\n      dispatch(changePanel({story : SCHEDULE_STORY, panel : SEARCH_PANEL}))\r\n  }\r\n\r\n  const handleError = () => {\r\n    dispatch(requestSchedule({href : history[history.length - 1], add : false}))\r\n  }\r\n\r\n  const diff = React.useMemo(() => {\r\n    if(isDiff && user && user.myGroup && activeSchedule)\r\n      return getDiff(activeSchedule.schedule as PlainLesson[], user.myGroup.schedule)\r\n\r\n    return []\r\n  }, [isDiff, user, activeSchedule])\r\n\r\n  return(\r\n    <Panel id={id}>\r\n      <PanelHeader left={<PanelHeaderBack onClick={goBack} />}>\r\n        <div onClick={toggleMenu} className='header'>\r\n          {activeMode.text}\r\n          <Icon16Dropdown fill='var(--accent)' style={{ transform: `rotate(${menuOpened && activeSchedule ? '180deg' : '0'})` }} />\r\n        </div>\r\n      </PanelHeader>\r\n      {activeSchedule &&\r\n        <PanelHeaderContext\r\n          opened={menuOpened}\r\n          onClose={toggleMenu}\r\n        >\r\n          <List>\r\n            {MENU.map((item,i) => {\r\n              const notExams = !activeSchedule?.exams && item.id === 'exams'\r\n              const examsSelected = activeMode.id === 'exams' && (item.id === 'with_diff' || item.id === 'without_diff')\r\n\r\n              const myGroup = user && user.group === activeSchedule.href\r\n              const myGroupSave = myGroup && item.id === 'save'\r\n              const notMyGroupDelete = !myGroup && item.id === 'delete'\r\n\r\n              const withoutDiff = isDiff && item.id === 'with_diff'\r\n              const withDiff = !isDiff && item.id === 'without_diff'\r\n              const ownDiff = (item.id === 'without_diff' || item.id === 'with_diff') && myGroup\r\n\r\n              const notUserGroup = user && !user.group && (item.id === 'with_diff' || item.id === 'without_diff')\r\n\r\n              if(\r\n                examsSelected ||\r\n                notExams ||\r\n                myGroupSave ||\r\n                notMyGroupDelete ||\r\n                withoutDiff ||\r\n                withDiff ||\r\n                ownDiff ||\r\n                notUserGroup\r\n              ) return\r\n\r\n              let cn = ''\r\n              if(item.id === 'save') cn = 'save'\r\n              else if(item.id === 'delete') cn = 'delete'\r\n\r\n              return <Cell\r\n                key={i}\r\n                before={<MenuItemIcon id={item.id as MenuItemId} />}\r\n                onClick={() => selectMenuItem(item)}\r\n                className={cn}\r\n                asideContent={activeMode.id === item.id ? <Icon24Done fill='var(--accent)' /> : null}\r\n              >{item.text}</Cell>\r\n            })}        \r\n          </List>\r\n        </PanelHeaderContext>\r\n      }\r\n      \r\n      {loading && <PanelSpinner />}\r\n      {error && \r\n        <Placeholder\r\n          action={<Button mode=\"tertiary\" onClick={handleError}>Попробовать еще</Button>}\r\n          stretched\r\n        >Произошла ошибка</Placeholder>\r\n      }\r\n      {activeSchedule && <>\r\n        <Title isDiff={isDiff} mySchedule={(user && user.group === activeSchedule.href) as boolean} title={activeSchedule!.title} />\r\n        {activeMode.id === 'exams' && <DayCard infoShow={false} lessons={activeSchedule!.exams as ILesson[]} />}\r\n        {activeMode.id === 'byDays' &&\r\n          <ByDay schedule={isDiff ? diff : activeSchedule.schedule as PlainLesson[]}/>\r\n        }\r\n        {activeMode.id === 'full' &&\r\n          <FullSchedule schedule={isDiff ? diff : activeSchedule.schedule as PlainLesson[]}/>\r\n        }\r\n      </>}\r\n    </Panel>\r\n  )\r\n}\r\n\r\nexport default Schedule","import { PlainLesson, Coords } from \"../types/PlainLesson\"\r\n\r\nexport const getDiff = (a : PlainLesson[], b : PlainLesson[]) : PlainLesson[] => {\r\n  console.log('DIFF...')\r\n  \r\n  const isEqual = (a : Coords, b : Coords) : boolean => {\r\n    const dayEqual = a.i === b.i\r\n    const lessonNumEqual = a.j === b.j\r\n    const weekEqual = a.z === b.z || a.z === 2 || b.z === 2\r\n    const groupEqual = a.k === b.k || a.k === 2 || b.k === 2\r\n\r\n    return dayEqual && lessonNumEqual && weekEqual && groupEqual\r\n  }\r\n  \r\n  return a.filter(la => !b.find(lb => isEqual(la.coords, lb.coords)))\r\n}","import React from 'react'\r\nimport './Profile.sass'\r\n\r\nimport { Button, Card, CardScroll, CellButton, Div, Group, InfoRow, Link, Panel, PanelHeader, PanelHeaderButton, PanelSpinner, Placeholder, Progress, ScreenSpinner } from \"@vkontakte/vkui\"\r\nimport Icon28GlobeOutline from '@vkontakte/icons/dist/28/globe_outline'\r\nimport { currentWeek, getBackgrounds, toEnd } from '../../utils'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { changePanel, changeStory } from '../../redux/slices/navigation'\r\nimport { COUNT_LAST_SCHEDULES, MAP_PANEL, PROFILE_STORY, SCHEDULE_PANEL, SCHEDULE_STORY, SEARCH_PANEL } from '../../constans'\r\nimport { RootState } from '../../redux/rootReducer'\r\nimport { requestSchedule } from '../../redux/slices/schedule'\r\nimport { requestEvents, delGroup, requestUser } from '../../redux/slices/profile'\r\nimport { FromWhom } from '../../types/ILesson'\r\nimport { useLastSchedules } from '../../utils'\r\n\r\ninterface IProfilePanelProps\r\n{\r\n  id : string\r\n}\r\n\r\nconst Profile : React.FC<IProfilePanelProps> = ({\r\n  id,\r\n}) => {\r\n  const dispatch = useDispatch()\r\n  \r\n  const {\r\n    events, loadingEvents, errorEvents,\r\n    user, loadingUser, errorUser, userId\r\n  } = useSelector((s : RootState) => s.profile)\r\n\r\n  const { setLast } = useLastSchedules(COUNT_LAST_SCHEDULES)\r\n  const [now, total, diff] = toEnd()\r\n\r\n  const goToSchedule = (s : FromWhom) => {\r\n    setLast(s)\r\n    dispatch(requestSchedule({href : s.href}))\r\n    dispatch(changeStory(SCHEDULE_STORY))\r\n    dispatch(changePanel({story:SCHEDULE_STORY,panel:SCHEDULE_PANEL}))\r\n  }\r\n  \r\n  return(\r\n    <Panel id={id}>\r\n      <PanelHeader\r\n        left={\r\n          <PanelHeaderButton\r\n            onClick={() => dispatch(changePanel({story : PROFILE_STORY, panel : MAP_PANEL}))}\r\n          ><Icon28GlobeOutline /></PanelHeaderButton>\r\n        }\r\n      >Профиль</PanelHeader>\r\n      {errorUser &&\r\n        <Placeholder\r\n          action={<Button mode=\"tertiary\" onClick={() => dispatch(requestUser(userId as number))}>Попробовать еще</Button>}\r\n          stretched\r\n        >Произошла ошибка</Placeholder>\r\n      }\r\n      {!loadingUser && !errorUser &&\r\n        <Div>\r\n          <Group separator={'hide'} header=\"События\" style={{margin : '8px 0px'}}>\r\n            {loadingEvents\r\n              ? <PanelSpinner />\r\n              : errorEvents\r\n                ? <Placeholder\r\n                  action={\r\n                    <Button\r\n                      mode=\"tertiary\"\r\n                      onClick={() => dispatch(requestEvents())}\r\n                    >Попробовать еще</Button>}\r\n                >Произошла ошибка</Placeholder>\r\n                : <CardScroll>\r\n                    {events.map((e,i) => {\r\n                      return <Card\r\n                        key={i}\r\n                        className=\"event-card\"\r\n                        style={{ background : e.background }}\r\n                      ><Link href={e.href}>{e.title}</Link></Card>\r\n                    })}\r\n                </CardScroll>\r\n            }\r\n          </Group>\r\n          <Card>\r\n            <Div>\r\n              <b>Текущая неделя : </b>{currentWeek() === 0 ? 'Числитель' : 'Знаменатель'}\r\n            </Div>\r\n            <Div>\r\n              <InfoRow header={`До конца семестра(03.01.2021г) : ${diff} дн.`}>\r\n                <Progress value={(now / total) * 100} />\r\n              </InfoRow>\r\n            </Div>\r\n          </Card>\r\n          <Group header=\"Ваше расписание\" style={{marginTop:8}}>\r\n            <Button\r\n              mode=\"tertiary\"\r\n              className=\"linkable\"\r\n              onClick={() => {\r\n                if(user && user.myGroup)\r\n                  goToSchedule(user.myGroup)\r\n                else\r\n                {\r\n                  dispatch(changeStory(SCHEDULE_STORY))\r\n                  dispatch(changePanel({story:SCHEDULE_STORY,panel:SEARCH_PANEL}))\r\n                }\r\n              }}\r\n            >{(user && user.myGroup) ? user.myGroup.title : 'Выбрать'}</Button>\r\n            {user && user.myGroup &&\r\n              <Div>\r\n                <Button\r\n                  mode=\"destructive\"\r\n                  size=\"l\"\r\n                  style={{width : '100%'}}\r\n                  onClick={() => dispatch(delGroup(user.id))}\r\n                >Удалить расписание</Button>\r\n              </Div>\r\n            }\r\n          </Group>\r\n          {user && user.myGroup &&\r\n            <Group header={user.group.includes('t') ? 'Группы' : 'Преподаватели'} style={{marginTop:8}}>\r\n              {user.fromWhoms.map((fw,i) => {\r\n                return <CellButton\r\n                  key={i}\r\n                  onClick={() => goToSchedule(fw)}\r\n                >{fw.title}</CellButton>\r\n              })}\r\n            </Group>\r\n          }\r\n        </Div>\r\n      }\r\n    </Panel>\r\n  )\r\n}\r\n\r\nexport default Profile","export const toEnd = () => {\r\n  const start = new Date(2020, 8, 1).getTime()\r\n  const now = new Date().getTime()\r\n  const end = new Date(2021, 0, 3).getTime()\r\n\r\n  const DAYS = 1000 * 60 * 60 * 24\r\n\r\n  const wasted = (now - start) / DAYS\r\n  const total  = (end - start) / DAYS\r\n  const diff   = (end - now) / DAYS\r\n\r\n  return [wasted, total, diff].map(Math.floor)\r\n}","import React from 'react'\r\n\r\nimport { Cell, Div, Group, Panel, PanelHeader, PanelHeaderBack } from \"@vkontakte/vkui\"\r\n\r\nimport map from '../../assets/map.png'\r\nimport { useDispatch } from 'react-redux'\r\nimport { changePanel } from '../../redux/slices/navigation'\r\nimport { PROFILE_PANEL, PROFILE_STORY } from '../../constans'\r\n\r\ninterface IMapPanelProps\r\n{\r\n  id : string\r\n}\r\n\r\nconst Map : React.FC<IMapPanelProps> = ({\r\n  id,\r\n}) => {\r\n  const dispatch = useDispatch()\r\n  return(\r\n    <Panel id={id}>\r\n      <PanelHeader\r\n        left={\r\n          <PanelHeaderBack\r\n            onClick={() => dispatch(changePanel({story : PROFILE_STORY, panel : PROFILE_PANEL}))}\r\n          />\r\n        }\r\n      >Карта</PanelHeader>\r\n\r\n      <Div>\r\n        <img src={map} alt=\"карта\" style={{width:'100%'}}/>\r\n      </Div>\r\n\r\n      <Div>\r\n        <Group header=\"Расшифровка аббревиатур\">\r\n          <Cell>УК - учебный корпус</Cell>\r\n          <Cell>ГУК - главный учебный корпус</Cell>\r\n          <Cell>СДК - студенческий дворец культуры</Cell>\r\n          <Cell>УСК - учебно-спортивный комплекс</Cell>\r\n        </Group>\r\n      </Div>\r\n    </Panel>\r\n  )\r\n}\r\n\r\nexport default Map","import React from 'react'\r\nimport './Search.sass'\r\nimport schedules from '../../data/schedules.json'\r\n\r\nimport { Card, CardScroll, CellButton, FixedLayout, List, Panel, PanelHeader, PanelSpinner, Placeholder, Search } from \"@vkontakte/vkui\"\r\n\r\nimport { FromWhom } from '../../types/ILesson'\r\nimport { changePanel } from '../../redux/slices/navigation'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { COUNT_LAST_SCHEDULES, SCHEDULE_PANEL, SCHEDULE_STORY } from '../../constans'\r\nimport { setQuery, setLoading } from '../../redux/slices/search'\r\nimport { RootState } from '../../redux/rootReducer'\r\nimport { clearHistory, requestSchedule } from '../../redux/slices/schedule'\r\nimport { useLastSchedules } from '../../utils'\r\n\r\ninterface ISearchPanelProps\r\n{\r\n  id : string\r\n}\r\n\r\nconst SearchPanel : React.FC<ISearchPanelProps> = ({\r\n  id,\r\n}) => {\r\n\r\n  const dispatch = useDispatch()\r\n  const {query, loading} = useSelector((s : RootState) => s.search)\r\n  \r\n  const { last, setLast } = useLastSchedules(COUNT_LAST_SCHEDULES)\r\n\r\n  const filterSearch = (value : string) => (s : FromWhom) =>\r\n    s.title.toLowerCase().includes(value.toLowerCase())\r\n    \r\n  const [searchResult, setSearchResult] = React.useState<typeof schedules>(query ? schedules.filter(filterSearch(query)) : [])\r\n  React.useEffect(() => {\r\n    let tid : number | undefined\r\n    if(query)\r\n    {\r\n      tid = setTimeout(() => {\r\n        dispatch(setLoading(false))\r\n        setSearchResult(schedules.filter(filterSearch(query)))\r\n      }, 150) as unknown as number\r\n    }\r\n    else\r\n    {\r\n      dispatch(setLoading(false))\r\n      setSearchResult([])\r\n    }\r\n\r\n    return () => clearTimeout(tid)\r\n  }, [query])\r\n  const handleChange = (e : React.FormEvent<HTMLInputElement>) => {\r\n    dispatch(setQuery(e.currentTarget.value))\r\n    dispatch(setLoading(true))\r\n  }\r\n  \r\n  const goToSchedule = (s : FromWhom) => {\r\n    setLast(s)\r\n    dispatch(clearHistory())\r\n    dispatch(requestSchedule({href : s.href}))\r\n    dispatch(changePanel({ story : SCHEDULE_STORY, panel : SCHEDULE_PANEL }))\r\n  }\r\n\r\n  return(\r\n    <Panel separator={false} id={id}>\r\n      <PanelHeader>Поиск</PanelHeader>\r\n      <FixedLayout vertical=\"top\" style={{background:'var(--header_background)'}}>\r\n        <Search\r\n          placeholder=\"Группа или преподаватель\"\r\n          value={query}\r\n          onChange={handleChange}\r\n          after={null}\r\n        />\r\n        {last.length !== 0 &&\r\n          <CardScroll>\r\n            {last.map(s => {\r\n              return <Card\r\n                key={s.href}\r\n                className=\"last-card\"\r\n                onClick={() => goToSchedule(s)}\r\n              >{s.title}</Card>\r\n            })}\r\n          </CardScroll>\r\n        }\r\n      </FixedLayout>\r\n      {\r\n        loading\r\n          ? <div style={{marginTop:100}}><PanelSpinner/></div>\r\n          : searchResult.length === 0\r\n            ? <Placeholder stretched>Ничего не найдено</Placeholder>\r\n            : (\r\n              <List style={{ marginTop : 52 + (last.length === 0 ? 0 : 50) }}>\r\n                {searchResult.map(s => {\r\n                  return <CellButton\r\n                    key={s.href}\r\n                    onClick={() => goToSchedule(s)}\r\n                  >{s.title}</CellButton>\r\n                })}\r\n              </List>\r\n            )\r\n      }\r\n\r\n    </Panel>\r\n  )\r\n}\r\n\r\nexport default SearchPanel","import React from 'react'\r\nimport './StaticsLesson.sass'\r\n\r\nimport { CellButton, Div, Group, InfoRow, ModalPage, ModalPageHeader, ModalRoot, PanelHeaderButton, Progress } from '@vkontakte/vkui'\r\nimport { getStatsLesson } from '../../utils'\r\nimport Title from '../Title'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { RootState } from '../../redux/rootReducer'\r\nimport { requestSchedule, setIsDiff, setSubject } from '../../redux/slices/schedule'\r\nimport { PlainLesson } from '../../types/PlainLesson'\r\nimport { FromWhom } from '../../types/ILesson'\r\nimport { useLastSchedules } from '../../utils'\r\nimport { COUNT_LAST_SCHEDULES } from '../../constans'\r\n\r\ninterface StaticsLessonProps{}\r\n\r\nconst TYPE_LESSON = {\r\n  lec : 'Лекции',\r\n  pr : 'Практики',\r\n  lab : 'Лабораторные'\r\n}\r\n\r\nconst StaticsLesson : React.FC<StaticsLessonProps> = ({\r\n  \r\n}) => {\r\n  const dispatch = useDispatch()\r\n  const { activeSubject, activeSchedule } = useSelector((s : RootState) => s.schedule)\r\n\r\n  const { setLast } = useLastSchedules(COUNT_LAST_SCHEDULES)\r\n\r\n  const closeModal = () => dispatch(setSubject(null))\r\n\r\n  const goToSchedule = (s : FromWhom) => {\r\n    setLast(s)\r\n    closeModal()\r\n    dispatch(requestSchedule({href : s.href}))\r\n    dispatch(setIsDiff(false))\r\n  }\r\n  \r\n  if(!activeSchedule) return null\r\n  \r\n  const data = getStatsLesson(activeSubject as string, activeSchedule.schedule)\r\n\r\n  return(\r\n    <ModalRoot\r\n      activeModal={activeSubject ? 'statics_lesson' : null}\r\n      onClose={closeModal}\r\n    >\r\n      <ModalPage\r\n        id=\"statics_lesson\"\r\n        dynamicContentHeight={true}\r\n        onClose={closeModal}\r\n        header={\r\n          <ModalPageHeader\r\n            right={<PanelHeaderButton onClick={closeModal}>Закрыть</PanelHeaderButton>}\r\n          >Статистика</ModalPageHeader>\r\n        }\r\n      >\r\n        <Title title={activeSubject as string} />\r\n        <Div>\r\n          <Group header=\"Занятия\" separator=\"hide\">\r\n            {data && Object.entries(data.stats).map((entrie, i) => {\r\n              const [key, [now, total]] = entrie\r\n\r\n              if(total === 0) return\r\n\r\n              return(\r\n                <Div key={i}>\r\n                  <InfoRow header={`${TYPE_LESSON[key as keyof typeof TYPE_LESSON]} ${now}/${total}`}>\r\n                    <Progress className={`progress__${key}`} value={(now / total) * 100} />\r\n                  </InfoRow>\r\n                </Div>\r\n              )\r\n            })}\r\n          </Group>\r\n          {data && data.fromWhoms.length !== 0 &&\r\n            <Group header={activeSchedule.href.includes('t') ? 'Группы' : 'Преподаватели'} separator=\"hide\">\r\n              {data.fromWhoms.map(fw => {\r\n                return <CellButton\r\n                  key={fw.href}\r\n                  onClick={() => goToSchedule(fw)}\r\n                >{fw.title}</CellButton>\r\n              })}\r\n            </Group>\r\n          }\r\n        </Div>\r\n      </ModalPage>\r\n    </ModalRoot>\r\n  )\r\n}\r\n\r\nexport default StaticsLesson","import weeks from '../data/weeks.json'\r\n\r\nimport { FromWhom } from '../types/ILesson'\r\nimport { PlainLesson } from '../types/PlainLesson'\r\n\r\nexport const getStatsLesson = (subject : string, schedule : PlainLesson[]) => {\r\n  const byWeek = [[0,0],[0,0],[0,0]]\r\n  const fromWhoms : FromWhom[] = []\r\n\r\n  const now = new Date()\r\n  \r\n  const dd = now.getDay()\r\n  const currentDay = dd === 0 ? 6 : dd - 1\r\n  \r\n  const d = now.getTime()\r\n  const currentWeekIndex = weeks.findIndex(({ date : [start, end] }) => start < d && d < end)\r\n  \r\n\r\n  schedule.forEach(l => {\r\n    if(l.subject === subject)\r\n    {\r\n      weeks.forEach((w, i) => {\r\n        const week = l.coords.z\r\n        const day = l.coords.i\r\n        const group = l.coords.k\r\n\r\n        if(week === w.week || week === 2)\r\n        {\r\n          if(\r\n            group !== 2 && (l.fromWhoms.length === 2 || week !== 2) ||\r\n            group === 2\r\n          )\r\n            byWeek[l.type][1]++\r\n          else\r\n            byWeek[l.type][1] += 0.5\r\n\r\n          if(\r\n            i < currentWeekIndex ||\r\n            i === currentWeekIndex && day <= currentDay\r\n          )\r\n          {\r\n            if(\r\n              group !== 2 && (l.fromWhoms.length === 2 || week !== 2) ||\r\n              group === 2\r\n            )\r\n              byWeek[l.type][0]++\r\n            else\r\n              byWeek[l.type][0] += 0.5\r\n          }\r\n        }\r\n      })\r\n\r\n      l.fromWhoms.map(fw => {\r\n        if(fromWhoms.find(_ => _.href === fw.href)) return\r\n\r\n        fromWhoms.push(fw)\r\n      })\r\n    }\r\n  })\r\n\r\n  return {\r\n    fromWhoms,\r\n    stats : {\r\n      lec : byWeek[0].map(Math.floor),\r\n      pr  : byWeek[1].map(Math.floor),\r\n      lab : byWeek[2].map(Math.floor),\r\n    },\r\n  }\r\n}","import React from 'react'\n\nimport bridge from '@vkontakte/vk-bridge'\nimport { Epic, ScreenSpinner, Tabbar, TabbarItem, View } from '@vkontakte/vkui'\nimport Icon28UserCircleOutline from \"@vkontakte/icons/dist/28/user_circle_outline\"\nimport Icon28GridSquareOutline from \"@vkontakte/icons/dist/28/grid_square_outline\"\n\nimport Schedule from './panels/Schedule'\nimport Profile from './panels/Profile'\nimport Map from './panels/Map'\nimport SearchPanel from './panels/Search'\nimport StaticsLesson from './components/StaticsLesson'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { RootState } from './redux/rootReducer'\nimport { changePanel, changeStory } from './redux/slices/navigation'\nimport { PROFILE_STORY, SCHEDULE_PANEL, SCHEDULE_STORY, SEARCH_PANEL } from './constans'\nimport { requestEvents, requestUser } from './redux/slices/profile'\nimport { clearHistory } from './redux/slices/schedule'\n\nconst App : React.FC = () => {\n\tconst dispatch = useDispatch()\n\tconst { story, panels } = useSelector((s : RootState) => s.navigation)\n\tconst { loadingUser } = useSelector((s : RootState) => s.profile)\n\n\tconst changeActiveStory = (e : React.MouseEvent<HTMLDivElement>) => {\n\t\tconst newStory = e.currentTarget.dataset.story\n\t\tif(\n\t\t\tnewStory === SCHEDULE_STORY &&\n\t\t\tstory === SCHEDULE_STORY &&\n\t\t\tpanels.schedule === SCHEDULE_PANEL\n\t\t)\n\t\t{\n\t\t\tdispatch(changePanel({story:SCHEDULE_STORY, panel:SEARCH_PANEL}))\n\t\t\tdispatch(clearHistory())\n\t\t}\n\t\telse if(newStory === story) return\n\t\telse dispatch(changeStory(newStory))\n\t}\n\n\tReact.useEffect(() => {\n\t\tasync function init()\n\t\t{\n\t\t\tconst userData = await bridge.send('VKWebAppGetUserInfo')\n\t\t\tdispatch(requestEvents())\n\t\t\tdispatch(requestUser(userData.id))\n\t\t}\n\n\t\tinit()\n\t},[])\n\t\n\treturn(\n\t\t<Epic\n\t\t\tactiveStory={story}\n\t\t\ttabbar={\n\t\t\t\t<Tabbar>\n\t\t\t\t\t<TabbarItem\n\t\t\t\t\t\tonClick={changeActiveStory}\n\t\t\t\t\t\tselected={story === 'schedule'}\n\t\t\t\t\t\tdata-story={'schedule'}\n\t\t\t\t\t\ttext=\"Расписание\"\n\t\t\t\t\t><Icon28GridSquareOutline/></TabbarItem>\n\t\t\t\t\t<TabbarItem\n\t\t\t\t\t\tonClick={changeActiveStory}\n\t\t\t\t\t\tselected={story === 'profile'}\n\t\t\t\t\t\tdata-story={'profile'}\n\t\t\t\t\t\ttext=\"Профиль\"\n\t\t\t\t\t><Icon28UserCircleOutline/></TabbarItem>\n\t\t\t\t</Tabbar>\n\t\t\t}\n\t\t>\n\t\t\t<View\n\t\t\t\tid={'schedule'}\n\t\t\t\tactivePanel={panels.schedule}\n\t\t\t\tmodal={<StaticsLesson />}\n\t\t\t>\n\t\t\t\t<SearchPanel id='search' />\n\t\t\t\t<Schedule id='schedule' />\n\t\t\t</View>\n\t\t\t<View\n\t\t\t\tid={'profile'}\n\t\t\t\tactivePanel={panels.profile}\n\t\t\t\tpopout={loadingUser ? <ScreenSpinner /> : null}\n\t\t\t>\n\t\t\t\t<Profile id='profile' />\n\t\t\t\t<Map id='map' />\n\t\t\t</View>\t\t\n\t\t</Epic>\n\t)\n}\n\nexport default App","import React from 'react'\r\n\r\nimport { Placeholder, Link} from \"@vkontakte/vkui\"\r\nimport Icon28MoonOutline from \"@vkontakte/icons/dist/28/moon_outline\"\r\n\r\nconst Sleep = ({ }) => {\r\n  return(\r\n    <Placeholder\r\n      icon={<Icon28MoonOutline width={56} height={56} />}\r\n      action={\r\n        <>\r\n          <Link href={`http://www.bstu.ru/about/useful/schedule`}>Посмотреть расписание на сайте</Link>\r\n          <br /><br/>\r\n          <Link href={`https://vk.com/club198278031`}>Группа приложения</Link>        \r\n        </>\r\n      }\r\n      stretched\r\n    >\r\n      Приложение отдыхает<br/> с 23:00 до 07:00 каждого дня\r\n    </Placeholder>\r\n  )\r\n}\r\n\r\nexport default Sleep","import React from 'react'\r\n\r\nimport store from '../../redux/store'\r\nimport { Provider } from 'react-redux'\r\n\r\nimport App from '../../App'\r\nimport Sleep from '../../panels/Sleep'\r\n\r\nconst Switcher = () => {\r\n  const hours = new Date().getUTCHours()\r\n  \r\n  return (hours >= 20 || hours < 4) ? <Sleep /> : <Provider store={store}><App /></Provider>\r\n}\r\n\r\nexport default Switcher","import 'core-js/features/map'\nimport 'core-js/features/set'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport bridge from '@vkontakte/vk-bridge'\nimport '@vkontakte/vkui/dist/vkui.css'\n\nimport './index.sass'\nimport Switcher from './components/Switcher'\n\nbridge.send('VKWebAppInit')\nbridge.subscribe(e => {\n  if(e.detail.type === 'VKWebAppUpdateConfig')\n    document.body.setAttribute('scheme', e.detail.data.scheme)\n})\n\nReactDOM.render(<Switcher />, document.getElementById('root'))"],"sourceRoot":""}