{"version":3,"sources":["assets/banner_bg.jpg","assets/banner_bg1.jpg","assets/map.png","redux/slices/navigation.ts","constans/index.ts","redux/slices/search.ts","API/constants.ts","API/schedule.ts","API/user.ts","API/group.ts","API/index.ts","API/streams.ts","utils/getTimeByLesson.ts","utils/normalizeLesson.ts","utils/selectDay.ts","utils/currentDay.ts","utils/currentWeek.ts","utils/currentLesson.ts","utils/useLastSchedules.ts","redux/slices/schedule.ts","redux/slices/profile.ts","redux/rootReducer.ts","redux/store.ts","components/Title/index.tsx","components/Lesson/index.tsx","components/DayCard/index.tsx","components/Cell/SingleCell.tsx","components/Cell/HalfCell.tsx","components/Cell/QuarterCell.tsx","components/FullSchedule/index.tsx","utils/fullSchedule.ts","components/TabsSchedule/index.tsx","components/ByDay/index.tsx","panels/Schedule/MenuItemIcon.tsx","panels/Schedule/index.tsx","utils/getDiff.ts","panels/Profile/index.tsx","utils/toEnd.ts","panels/Map/index.tsx","panels/Search/index.tsx","components/StaticsLesson/index.tsx","utils/getStatsLesson.ts","App.tsx","panels/Sleep/index.tsx","components/Switcher/index.tsx","index.tsx"],"names":["module","exports","initialState","story","panels","schedule","profile","list","navigationSlice","createSlice","name","reducers","changeStory","state","action","payload","changePanel","panel","actions","searchSlice","query","loading","setQuery","setLoading","BASE_URL","process","requestSchedule","href","a","id","replace","url","fetch","res","json","requestUser","registerUser","opts","method","headers","addGroup","uid","group","body","JSON","stringify","delGroup","getStreams","getTimeByLesson","normalizeLesson","lesson","time","coords","j","k","place","type","subject","fromWhoms","selectDay","lessons","day","week","filter","l","i","z","map","currentDay","Date","getDay","currentWeek","now","ms","getTime","d","weeks","date","start","end","currentLesson","split","sh","sm","lessonStart","setHours","eh","em","lessonEnd","n","useLastSchedules","limit","lsLast","localStorage","getItem","last","parse","setLast","s","filterLast","length","fw","newLast","setItem","createAsyncThunk","thunkAPI","schedules","getState","find","uniq","API","data","activeMode","text","isDiff","activeSubject","error","activeSchedule","history","scheduleSlice","changeMode","changeDay","changeWeek","setSubject","setIsDiff","popHistory","pop","newActiveHref","exams","clearHistory","extraReducers","builder","addCase","pending","meta","arg","add","push","rejected","fulfilled","requestStreams","user","profileSlice","loadingStreams","errorStreams","streams","userId","loadingUser","errorUser","myGroup","rootReducer","combineReducers","navigation","search","store","configureStore","reducer","Title","title","mySchedule","link","className","height","width","fill","size","Lesson","current","infoShow","dispatch","useDispatch","t","key","onClick","getStats","style","marginLeft","DayCard","undefined","SingleCell","column","row","w","cn","join","gridRow","gridColumn","HalfCell","isHalf","grid","QuarterCell","HEADERS","TIME","FullSchedule","lastLessonNum","reduce","max","lessonNum","full","forEach","dayId","lessonId","children","fullSchedule","gridTemplateRows","slice","h","cells","isHalfQuarter","isQuarter","Object","values","c","DAYS","TabsSchedule","mode","fontSize","color","selected","ByDay","useSelector","slideIndex","onChange","MenuItemIcon","MENU","Schedule","React","useState","menuOpened","setMenuOpened","toggleMenu","diff","useMemo","b","la","lb","dayEqual","lessonNumEqual","weekEqual","groupEqual","isEqual","left","transform","opened","onClose","item","notExams","examsSelected","myGroupSave","notMyGroupDelete","withoutDiff","withDiff","ownDiff","notUserGroup","before","requestAnimationFrame","selectMenuItem","asideContent","stretched","Profile","platform","usePlatform","snackbar","setSnackbar","openSnackbar","backgroundColor","wasted","Math","floor","toEnd","total","goToSchedule","header","subheader","background","backgroundImage","bg2","backgroundPosition","backgroundSize","backgroundRepeat","marginTop","value","bg1","target","padding","display","justifyContent","stream","paddingBottom","bridge","send","then","_","catch","err","group_id","includes","Map","src","alt","SearchPanel","filterSearch","toLowerCase","searchResult","setSearchResult","useEffect","tid","setTimeout","clearTimeout","separator","vertical","placeholder","e","currentTarget","after","TYPE_LESSON","lec","pr","lab","StaticsLesson","closeModal","byWeek","dd","currentWeekIndex","findIndex","stats","getStatsLesson","activeModal","dynamicContentHeight","right","entries","entrie","App","changeActiveStory","newStory","dataset","userData","init","margin","isWebView","activeStory","tabbar","data-story","activePanel","modal","popout","Sleep","icon","Switcher","hours","getUTCHours","subscribe","detail","document","setAttribute","scheme","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.b108810c.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/banner_bg.87106ccb.jpg\";","module.exports = __webpack_public_path__ + \"static/media/banner_bg1.975d0629.jpg\";","module.exports = \"data:image/png;base64,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\"","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\"\r\n\r\nimport { MAP_PANEL, PROFILE_PANEL, PROFILE_STORY, SCHEDULE_PANEL, SCHEDULE_STORY, SEARCH_PANEL, LIST_PANEL, LIST_STORY } from \"../../constans\"\r\n\r\ntype Story = typeof PROFILE_STORY | typeof SCHEDULE_STORY | typeof LIST_STORY\r\ntype ProfilePanel = typeof PROFILE_PANEL | typeof MAP_PANEL\r\ntype SchedulePanel = typeof SCHEDULE_PANEL | typeof SEARCH_PANEL\r\ntype ListPanel = typeof LIST_PANEL\r\ntype Panel = { schedule : SchedulePanel, profile : ProfilePanel, list : ListPanel }\r\n\r\ntype ChangePanelAction = { story : keyof Panel, panel : ProfilePanel | SchedulePanel }\r\n\r\ninterface NavigationState\r\n{\r\n  story : Story\r\n  panels : Panel\r\n}\r\n\r\nconst initialState : NavigationState = {\r\n  story : PROFILE_STORY,\r\n  panels : {\r\n    schedule : SEARCH_PANEL,\r\n    profile : PROFILE_PANEL,\r\n    list : LIST_PANEL,\r\n  },\r\n}\r\n\r\nconst navigationSlice = createSlice({\r\n  name : 'navigation',\r\n  initialState,\r\n  reducers : {\r\n    changeStory(state, action)\r\n    {\r\n      state.story = action.payload\r\n    },\r\n    changePanel(state, action : PayloadAction<ChangePanelAction>)\r\n    {\r\n      const { story, panel } = action.payload\r\n      if(story === 'schedule')\r\n        state.panels.schedule = panel as SchedulePanel\r\n      else if(story === 'profile')\r\n        state.panels.profile = panel as ProfilePanel\r\n    },\r\n  }\r\n})\r\n\r\nexport const { changeStory, changePanel } = navigationSlice.actions\r\nexport default navigationSlice.reducer","export const SCHEDULE_STORY = 'schedule'\r\nexport const PROFILE_STORY = 'profile'\r\nexport const LIST_STORY = 'list'\r\n\r\nexport const SEARCH_PANEL = 'search'\r\nexport const SCHEDULE_PANEL = 'schedule'\r\nexport const PROFILE_PANEL = 'profile'\r\nexport const MAP_PANEL = 'map'\r\nexport const LIST_PANEL = 'list'\r\n\r\nexport const COUNT_LAST_SCHEDULES = 6","import { createSlice } from \"@reduxjs/toolkit\"\r\n\r\ninterface SearchState\r\n{\r\n  query : string\r\n  loading : boolean\r\n}\r\n\r\nconst initialState : SearchState = {\r\n  query : '',\r\n  loading : false\r\n}\r\n\r\nconst searchSlice = createSlice({\r\n  name : 'search',\r\n  initialState,\r\n  reducers : {\r\n    setQuery(state, action)\r\n    {\r\n      state.query = action.payload\r\n    },\r\n    setLoading(state, action)\r\n    {\r\n      state.loading = action.payload\r\n    }\r\n  }\r\n})\r\n\r\nexport const { setQuery, setLoading } = searchSlice.actions\r\nexport default searchSlice.reducer","export const BASE_URL = process.env.REACT_APP_BASE_URL","import { BASE_URL } from \"./constants\"\r\n\r\nexport const requestSchedule = async (href : string) => {\r\n  const id = href.replace(/(\\?|&)/g,'').replace('=','/')\r\n  const url = `${BASE_URL}/schedule/${id}`\r\n  const res = await fetch(url)\r\n  \r\n  return res.json()\r\n}","import { BASE_URL } from \"./constants\"\r\n\r\nexport const requestUser = async (id : number) => {\r\n  const url = `${BASE_URL}/user/${id}`\r\n  const res = await fetch(url)\r\n\r\n  return res.json()\r\n}\r\n\r\nexport const registerUser = async (id : number) => {\r\n  const url = `${BASE_URL}/user/${id}`\r\n  const opts = {\r\n    method : 'POST', \r\n    headers : {'Content-Type': 'application/json;charset=utf-8'}\r\n  }\r\n  const res = await fetch(url, opts)\r\n\r\n  return res.json()\r\n}","import { BASE_URL } from \"./constants\"\r\n\r\nexport const addGroup = async ({uid, group} : {uid : number, group : string}) => {\r\n  const url = `${BASE_URL}/user/group`\r\n  const opts = {\r\n    method : 'PUT', \r\n    headers : {'Content-Type': 'application/json;charset=utf-8'},\r\n    body : JSON.stringify({uid, group})\r\n  }\r\n  const res = await fetch(url, opts)\r\n\r\n  return res.json()\r\n}\r\n\r\nexport const delGroup = async (uid : number) => {\r\n  const url = `${BASE_URL}/user/group`\r\n  const opts = {\r\n    method : 'DELETE', \r\n    headers : {'Content-Type': 'application/json;charset=utf-8'},\r\n    body : JSON.stringify({uid})\r\n  }\r\n  const res = await fetch(url, opts)\r\n\r\n  return res.json()\r\n}","import {requestSchedule} from './schedule'\r\nimport {registerUser,requestUser} from './user'\r\nimport {addGroup,delGroup} from './group'\r\nimport {getStreams} from './streams'\r\n\r\nexport default {\r\n  requestSchedule,\r\n  requestUser,\r\n  delGroup,\r\n  registerUser,\r\n  addGroup,\r\n  getStreams,\r\n}","import { BASE_URL } from \"./constants\"\r\n\r\nexport const getStreams = async () => {\r\n  const url = `${BASE_URL}/streams`\r\n  const res = await fetch(url)\r\n  return res.json()\r\n}","import { Lesson } from \"../types/Lesson\"\r\n\r\nexport const getTimeByLesson = (id : Lesson) => {\r\n  return [\r\n    ['08:15', '09:50'],\r\n    ['10:00', '11:35'],\r\n    ['11:45', '13:20'],\r\n    ['12:35', '14:10'],\r\n    ['14:20', '15:55'],\r\n    ['16:05', '17:40'],\r\n    ['17:50', '19:25'],\r\n    ['19:35', '21:10'],\r\n  ][id]\r\n}","import { ILesson } from \"../types/ILesson\";\r\nimport { PlainLesson } from \"../types/PlainLesson\";\r\nimport { getTimeByLesson } from \"./getTimeByLesson\";\r\n\r\nexport const normalizeLesson = (lesson : PlainLesson) : ILesson => {\r\n  const time = getTimeByLesson(lesson.coords.j)\r\n\r\n  const group = lesson.coords.k !== 2 ? `(${lesson.coords.k + 1} гр.)` : ''\r\n\r\n  return {\r\n    place : lesson.place,\r\n    type : lesson.type,\r\n    subject : `${lesson.subject}${group}`,\r\n    fromWhoms : lesson.fromWhoms,\r\n    time,\r\n  }\r\n}","import { ILesson } from \"../types/ILesson\";\r\nimport { PlainLesson } from \"../types/PlainLesson\";\r\nimport { normalizeLesson } from \"./normalizeLesson\";\r\n\r\nexport const selectDay = (\r\n  lessons : PlainLesson[],\r\n  day : number,\r\n  week : number\r\n) : ILesson[] => {\r\n  return lessons.filter(l => {\r\n    const { i, z } = l.coords\r\n\r\n    return i === day && (z === week || z === 2)\r\n  }).map(normalizeLesson)\r\n}","import { Day } from \"../types/Day\"\r\n\r\nexport const currentDay = () : Day => {\r\n  const id = new Date().getDay()\r\n\r\n  return (id > 0 ? id - 1 : id) as Day\r\n}","import weeks from '../data/weeks.json'\r\n\r\nimport { Week } from '../types/Week'\r\n\r\nexport const currentWeek = () : Week => {\r\n  const now = new Date()\r\n  const ms = now.getTime()\r\n  const d = now.getDay()\r\n\r\n  const week = weeks.filter(({date : [start, end]}) => start <= ms && ms <= end)[0].week\r\n\r\n  return (d !== 0 ? week : (week === 0 ? 1 : 0)) as Week\r\n}","import { Day } from \"../types/Day\"\r\nimport { Week } from \"../types/Week\"\r\nimport { currentWeek } from \"./currentWeek\"\r\n\r\nexport const currentLesson = (time : string[], day : Day, week : Week) : boolean => {\r\n  const now = new Date()\r\n\r\n  if(now.getDay() === day + 1 && week === currentWeek())\r\n  {\r\n    const TEN_MIN = 10 * 60 * 1000\r\n\r\n    const [start, end] = time    \r\n    const [sh, sm] = start.split(':').map(d => +d)\r\n    const lessonStart = new Date().setHours(sh, sm) - TEN_MIN\r\n    const [eh, em] = end.split(':').map(d => +d)\r\n    const lessonEnd = new Date().setHours(eh, em)\r\n\r\n    const n = now.getTime()\r\n\r\n    return lessonStart <= n && n <= lessonEnd\r\n  }\r\n\r\n  return false\r\n}","import { FromWhom } from \"../types/ILesson\"\r\n\r\nexport const useLastSchedules = (limit : number) => {\r\n  const LAST_SCHEDULES = 'lastSchedules'\r\n\r\n  const lsLast = localStorage.getItem(LAST_SCHEDULES)\r\n  const last : FromWhom[] = lsLast ? JSON.parse(lsLast) : []\r\n\r\n  const setLast = (s : FromWhom) => {\r\n    const overloadFilter = (fw : FromWhom, i : number) =>\r\n      fw.href.replace('&', '') !== s.href.replace('&', '') && i !== last.length - 1\r\n    const normalFilter = (fw : FromWhom) => fw.href.replace('&', '') !== s.href.replace('&', '')\r\n\r\n    const filterLast = last.filter(last.length < limit ? normalFilter : overloadFilter)    \r\n    const newLast = [s, ...filterLast]\r\n\r\n    localStorage.setItem(LAST_SCHEDULES, JSON.stringify(newLast))\r\n  }\r\n\r\n  return { last, setLast }\r\n}","import { createAsyncThunk, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\n\r\nimport API from \"../../API\";\r\n\r\nimport { MenuItem } from '../../panels/Schedule'\r\nimport { Day } from \"../../types/Day\";\r\nimport { FromWhom } from \"../../types/ILesson\";\r\nimport { PlainLesson } from \"../../types/PlainLesson\";\r\nimport { Week } from \"../../types/Week\";\r\nimport { currentDay, currentWeek } from \"../../utils\";\r\nimport { RootState } from \"../rootReducer\";\r\n\r\ninterface Exam\r\n{\r\n  place: string\r\n  subject: string\r\n  type : 3 | 4\r\n  fromWhoms: FromWhom[]\r\n}\r\n\r\nexport interface ScheduleData\r\n{\r\n  title : string\r\n  href : string\r\n  schedule : PlainLesson[]\r\n  exams : Exam[]\r\n}\r\n\r\ninterface ScheduleState\r\n{\r\n  activeMode : MenuItem\r\n  isDiff : boolean\r\n  day : Day\r\n  week : Week\r\n  activeSubject : string | null\r\n  loading : boolean\r\n  error : boolean\r\n  activeSchedule : ScheduleData | null\r\n  schedules : ScheduleData[] // ??? ILesson[]\r\n  history : string[]\r\n}\r\n\r\ntype RequestScheduleParam = {href : string, add ?: boolean}\r\n\r\nexport const requestSchedule = createAsyncThunk(\r\n  'schedule/request',\r\n  async ({href} : RequestScheduleParam, thunkAPI) => {    \r\n    const schedules = (thunkAPI.getState() as RootState).schedule.schedules\r\n    const schedule = schedules.find(s => s.href === href.replace('&', ''))\r\n    \r\n    if(schedule) return { uniq : false, schedule}\r\n\r\n    const data = await API.requestSchedule(href)\r\n    return { uniq : true, schedule : data}\r\n  }\r\n)\r\n\r\nconst initialState : ScheduleState = {\r\n  activeMode : { text : 'По дням', id : 'byDays' },\r\n  isDiff : false,\r\n  day : currentDay(),\r\n  week : currentWeek(),\r\n  activeSubject : null,\r\n  loading : false,\r\n  error : false,\r\n  activeSchedule : null,\r\n  schedules : [],\r\n  history : [],\r\n}\r\n\r\nconst scheduleSlice = createSlice({\r\n  name : 'schedule',\r\n  initialState,\r\n  reducers : {\r\n    changeMode(state, action : PayloadAction<MenuItem>)\r\n    {\r\n      state.activeMode = action.payload\r\n    },\r\n    changeDay(state, action : PayloadAction<Day>)\r\n    {\r\n      state.day = action.payload\r\n    },\r\n    changeWeek(state, action : PayloadAction<Week>)\r\n    {\r\n      state.week = action.payload\r\n    },\r\n    setSubject(state, action)\r\n    {\r\n      state.activeSubject = action.payload\r\n    },\r\n    setIsDiff(state, action)\r\n    {\r\n      state.isDiff = action.payload\r\n    },\r\n    popHistory(state)\r\n    {\r\n      state.isDiff = false\r\n      state.history.pop()\r\n      if(state.history.length !== 0)\r\n      {\r\n        const newActiveHref = state.history[state.history.length - 1]\r\n        const schedule = state.schedules.find(s => s.href === newActiveHref) as ScheduleData\r\n        \r\n        if(!schedule.exams && state.activeMode.id === 'exams')\r\n          state.activeMode = initialState.activeMode\r\n\r\n        state.activeSchedule = schedule\r\n      }\r\n    },\r\n    clearHistory(state)\r\n    {\r\n      state.history = []\r\n      state.isDiff = false\r\n    }\r\n  },\r\n  extraReducers(builder)\r\n  {\r\n    builder\r\n      .addCase(requestSchedule.pending,(state, action) => {\r\n        state.loading = true\r\n        state.error = false\r\n        state.activeSchedule = null\r\n        \r\n        const { add = true, href } = action.meta.arg\r\n        if(add)\r\n          state.history.push(href.replace('&', ''))\r\n      })\r\n      .addCase(requestSchedule.rejected,(state) => {\r\n        state.loading = false\r\n        state.error = true\r\n        state.isDiff = false\r\n      })\r\n      .addCase(requestSchedule.fulfilled,(state, action) => {\r\n        state.loading = false\r\n        state.error = false\r\n        const {uniq, schedule} = action.payload\r\n        state.activeSchedule = schedule as ScheduleData\r\n        if(uniq)\r\n          state.schedules.push(schedule)\r\n\r\n        if(!schedule.exams && state.activeMode.id === 'exams')\r\n          state.activeMode = initialState.activeMode\r\n      })\r\n  },\r\n})\r\n\r\nexport const { changeMode, changeDay, changeWeek, setSubject, popHistory, setIsDiff, clearHistory } = scheduleSlice.actions\r\nexport default scheduleSlice.reducer","import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\r\nimport { FromWhom } from \"../../types/ILesson\";\r\nimport API from '../../API'\r\nimport { ScheduleData } from \"./schedule\";\r\n\r\ninterface User\r\n{\r\n  id : number\r\n  group : string\r\n  myGroup : ScheduleData | null\r\n  fromWhoms : FromWhom[]  \r\n}\r\n\r\ninterface ProfileState\r\n{\r\n  loadingStreams : boolean\r\n  errorStreams : boolean\r\n  streams : FromWhom[]\r\n\r\n  user : User | null\r\n  userId : number | null\r\n  loadingUser : boolean\r\n  errorUser : boolean\r\n}\r\n\r\nexport const requestStreams = createAsyncThunk(\r\n  'streams/request', API.getStreams\r\n)\r\n\r\nexport const requestUser = createAsyncThunk(\r\n  'user/request',\r\n  async (id : number) => {\r\n    const user = await API.requestUser(id)\r\n    if(user) return user\r\n\r\n    const res = await API.registerUser(id)\r\n\r\n    return res\r\n  }\r\n)\r\n\r\nexport const addGroup = createAsyncThunk(\r\n  'group/add',\r\n  async ({uid, group} : {uid : number, group : string}) => {\r\n    const data = await API.addGroup({uid, group})\r\n\r\n    return data\r\n  }\r\n)\r\n\r\nexport const delGroup = createAsyncThunk(\r\n  'group/del',\r\n  async (id : number) => {\r\n    const data = await API.delGroup(id)\r\n\r\n    return data\r\n  }\r\n)\r\n\r\nconst initialState : ProfileState = {\r\n  loadingStreams : false,\r\n  errorStreams : false,\r\n  streams : [],\r\n\r\n  user : null,\r\n  // user : { id : 17, groupId : '', myGroup : null, fromWhoms : [] },\r\n  userId : null,\r\n  loadingUser : true,\r\n  errorUser : false,\r\n}\r\n\r\nconst profileSlice = createSlice({\r\n  name : 'profile',\r\n  initialState,\r\n  reducers : {},\r\n  extraReducers(builder)\r\n  {\r\n    builder\r\n      .addCase(requestUser.pending, (state, action) => {\r\n        state.loadingUser = true\r\n        state.errorUser = false\r\n        state.userId = action.meta.arg\r\n      })\r\n      .addCase(requestUser.rejected, (state) => {\r\n        state.loadingUser = false\r\n        state.errorUser = true\r\n      })\r\n      .addCase(requestUser.fulfilled, (state, action) => {\r\n        state.loadingUser = false\r\n        state.errorUser = false\r\n        state.user = action.payload\r\n      })\r\n\r\n      .addCase(addGroup.pending, (state) => {\r\n        state.loadingUser = true\r\n        state.errorUser = false\r\n      })\r\n      .addCase(addGroup.rejected, (state) => {\r\n        state.loadingUser = false\r\n        state.errorUser = true\r\n      })\r\n      .addCase(addGroup.fulfilled, (state, action) => {\r\n        state.loadingUser = false\r\n        state.errorUser = false\r\n        state.user!.group = action.payload.group\r\n        state.user!.myGroup = action.payload.myGroup\r\n        state.user!.fromWhoms = action.payload.fromWhoms\r\n      })\r\n\r\n      .addCase(delGroup.pending, (state) => {\r\n        state.loadingUser = true\r\n        state.errorUser = false\r\n      })\r\n      .addCase(delGroup.rejected, (state) => {\r\n        state.loadingUser = false\r\n        state.errorUser = true\r\n      })\r\n      .addCase(delGroup.fulfilled, (state) => {\r\n        state.loadingUser = false\r\n        state.errorUser = false\r\n        state.user!.group = ''\r\n        state.user!.myGroup = null\r\n        state.user!.fromWhoms = []\r\n      })\r\n\r\n      .addCase(requestStreams.pending, (state) => {\r\n        state.loadingStreams = true\r\n        state.errorStreams = false\r\n      })\r\n      .addCase(requestStreams.rejected, (state) => {\r\n        state.loadingStreams = false\r\n        state.errorStreams = true\r\n      })\r\n      .addCase(requestStreams.fulfilled, (state, action) => {\r\n        state.loadingStreams = false\r\n        state.errorStreams = false\r\n        state.streams = action.payload\r\n      })\r\n  }\r\n})\r\n\r\nexport default profileSlice.reducer","import { combineReducers } from \"@reduxjs/toolkit\"\r\n\r\nimport navigation from './slices/navigation'\r\nimport search from './slices/search'\r\nimport schedule from './slices/schedule'\r\nimport profile from './slices/profile'\r\n\r\nconst rootReducer = combineReducers({\r\n  navigation,\r\n  search,\r\n  schedule,\r\n  profile,\r\n})\r\n\r\nexport type RootState = ReturnType<typeof rootReducer>\r\nexport default rootReducer","import { configureStore } from \"@reduxjs/toolkit\"\r\n\r\nimport rootReducer from './rootReducer'\r\n\r\nconst store = configureStore({ reducer : rootReducer })\r\n\r\nexport default store","import React from 'react'\r\nimport './Title.sass'\r\n\r\nimport { Card, Div, Link, Spinner } from '@vkontakte/vkui'\r\nimport Icon28Favorite from '@vkontakte/icons/dist/28/favorite'\r\nimport Icon28ViewOutline from '@vkontakte/icons/dist/28/view_outline'\r\n\r\nexport interface TitleProps\r\n{\r\n  title : string\r\n  href ?: string\r\n  isDiff ?: boolean\r\n  mySchedule ?: boolean\r\n  loading ?: boolean\r\n}\r\n\r\nconst Title : React.FC<TitleProps> = ({\r\n  title,\r\n  href,\r\n  mySchedule = false,\r\n  isDiff = false,\r\n  loading = false\r\n}) => {\r\n  const link = `http://www.bstu.ru/static/themes/bstu/schedule/index.php${href}`\r\n  return(\r\n    <Div>\r\n      <Card>\r\n        <Div className='title'>\r\n          {isDiff && <Icon28ViewOutline height=\"20\" width=\"20\" fill=\"#4bb34b\" />}\r\n          {href ? <Link href={link}>{title}</Link> : title}\r\n          {loading && <Spinner size=\"small\" className=\"title__spinner\" />}\r\n          {!loading && mySchedule && <Icon28Favorite height=\"20\" width=\"20\" fill=\"#cc00ff\" />}\r\n        </Div>\r\n      </Card>\r\n    </Div>\r\n  )\r\n}\r\n\r\nexport default Title","import React from 'react'\r\nimport './Lesson.sass'\r\n\r\nimport Icon28InfoCircleOutline from '@vkontakte/icons/dist/28/info_outline'\r\n\r\nimport { FromWhom, ILesson } from '../../types/ILesson'\r\nimport { requestSchedule, setIsDiff, setSubject } from '../../redux/slices/schedule'\r\nimport { useDispatch } from 'react-redux'\r\nimport { useLastSchedules } from '../../utils'\r\nimport { COUNT_LAST_SCHEDULES } from '../../constans'\r\n\r\ninterface LessonProps extends ILesson\r\n{\r\n  current : boolean\r\n  infoShow : boolean\r\n}\r\n\r\nconst Lesson : React.FC<LessonProps> = ({\r\n  time,\r\n  place,\r\n  type,\r\n  subject,\r\n  fromWhoms,\r\n  current,\r\n  infoShow\r\n}) => {\r\n  const dispatch = useDispatch()\r\n\r\n  const { setLast } = useLastSchedules(COUNT_LAST_SCHEDULES)\r\n  \r\n  const getStats = (subject : string) => {\r\n    if(type > 2) return\r\n    \r\n    const s = subject.replace(/\\(\\d гр.\\)/,'')\r\n    dispatch(setSubject(s))\r\n  }\r\n\r\n  const goToSchedule = (s : FromWhom) => {\r\n    setLast(s)\r\n    dispatch(requestSchedule({href : s.href}))\r\n    dispatch(setIsDiff(false))\r\n  }\r\n\r\n  return(\r\n    <div className=\"lesson-wrapper\">\r\n      <div className={`lesson__time ${current ? `lesson__time-current` : ''}`}>\r\n        {time?.map((t, i) => <div key={i}>{t}</div> )}\r\n      </div>\r\n      <div className={`lesson__info lesson__info-${['lec', 'pr', 'lab', 'cons', 'exam'][type]}`}>\r\n        <div className=\"lesson__place\">{place}</div>\r\n        <div\r\n          className=\"lesson__subject\"\r\n          onClick={() => getStats(subject)}\r\n        >\r\n          <div className=\"lesson__subject-text\">{subject}</div>\r\n          {infoShow && <Icon28InfoCircleOutline style={{marginLeft:4}} width=\"18\" height=\"18\"/>}\r\n        </div>\r\n        <div className=\"lesson__fromWhoms\">\r\n          {fromWhoms.map((fw, i) => {\r\n            return(\r\n              <div\r\n                key={i}\r\n                className=\"linkable\"\r\n                onClick={() => goToSchedule(fw)}\r\n              >{fw.title}</div>\r\n            )\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Lesson","import React from 'react'\r\n\r\nimport { Card, Div } from '@vkontakte/vkui'\r\n\r\nimport Lesson from '../Lesson'\r\n\r\nimport { ILesson } from '../../types/ILesson'\r\nimport { Day } from '../../types/Day'\r\nimport { Week } from '../../types/Week'\r\nimport { currentLesson } from '../../utils'\r\n\r\nexport interface DayCardProps\r\n{\r\n  lessons : ILesson[]\r\n  day ?: Day\r\n  week ?: Week\r\n  infoShow ?: boolean\r\n}\r\n\r\nconst DayCard : React.FC<DayCardProps> = ({\r\n  lessons,\r\n  day,\r\n  week,\r\n  infoShow = true\r\n}) => {\r\n  return(\r\n    <Div>\r\n      <Card className='day-card'>\r\n        <Div>\r\n          {lessons.map((l,i) => {\r\n            const isExam = day === undefined && week === undefined\r\n            const current = isExam ? false : currentLesson(l.time!, day!, week!)\r\n\r\n            return <Lesson infoShow={infoShow} key={i} {...l} current={current} />\r\n          })}\r\n        </Div>\r\n      </Card>\r\n    </Div>\r\n  )\r\n}\r\n\r\nexport default DayCard","import React from 'react'\r\nimport './Cell.sass'\r\n\r\nimport { PlainLesson } from '../../types/PlainLesson'\r\nimport { currentLesson, currentWeek, getTimeByLesson } from '../../utils'\r\nimport { useDispatch } from 'react-redux'\r\nimport { requestSchedule, setIsDiff, setSubject } from '../../redux/slices/schedule'\r\nimport { useLastSchedules } from '../../utils'\r\nimport { FromWhom } from '../../types/ILesson'\r\nimport { COUNT_LAST_SCHEDULES } from '../../constans'\r\n\r\ninterface SingleCellProps\r\n{\r\n  column : number\r\n  row : number\r\n  lesson : PlainLesson\r\n}\r\n\r\nconst SingleCell : React.FC<SingleCellProps> = ({\r\n  lesson,\r\n  column,\r\n  row\r\n}) => {\r\n  const dispatch = useDispatch()\r\n\r\n  const { setLast } = useLastSchedules(COUNT_LAST_SCHEDULES)\r\n\r\n  const getStats = (subject : string) => {\r\n    const s = subject.replace(/\\(\\d гр.\\)/,'')\r\n    dispatch(setSubject(s))\r\n  }\r\n\r\n  const goToSchedule = (s : FromWhom) => {\r\n    setLast(s)\r\n    dispatch(requestSchedule({href : s.href}))\r\n    dispatch(setIsDiff(false))\r\n  }\r\n\r\n  const w = lesson.coords.z\r\n  const cn = [\r\n    lesson.coords.j === 3 ? 'break_bottom' : '',\r\n    currentLesson(getTimeByLesson(lesson.coords.j), lesson.coords.i, w === 2 ? currentWeek() : w) ? 'current' : ''\r\n  ].join(' ')\r\n\r\n  return(\r\n    <div\r\n      className={`cell cell__single cell__single-${['lec', 'pr', 'lab'][lesson.type]}`}\r\n      style={{\r\n        gridRow : row,\r\n        gridColumn : column,\r\n      }}\r\n    >\r\n      <div className=\"cell__single-place\">{lesson.place}</div>\r\n      <div\r\n        className={`cell__single-subject ${cn}`}\r\n        onClick={() => getStats(lesson.subject)}\r\n      >{lesson.subject}</div>\r\n      <div className=\"cell__single-fromWhoms\">\r\n        {lesson.fromWhoms.map((fw, i) => {\r\n          return <div\r\n            key={i}\r\n            onClick={() => goToSchedule(fw)}\r\n            className={'linkable'}\r\n          >{fw.title}</div>\r\n        })}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SingleCell","import React from 'react'\r\nimport './Cell.sass'\r\n\r\nimport { PlainLesson } from '../../types/PlainLesson'\r\nimport SingleCell from './SingleCell'\r\n\r\ninterface HalfCellProps\r\n{\r\n  column : number\r\n  row : number\r\n  lessons : PlainLesson[]\r\n}\r\n\r\nconst HalfCell : React.FC<HalfCellProps> = ({\r\n  column,\r\n  row,\r\n  lessons\r\n}) => {\r\n  const isHalf = lessons[0].coords.k === 2\r\n  const grid = {[`gridTemplate${isHalf ? 'Rows' : 'Columns'}`] : 'repeat(2,1fr)'}\r\n\r\n  return(\r\n    <div\r\n      className=\"cell__half\"\r\n      style={{\r\n        ...grid,\r\n        gridRow : row,\r\n        gridColumn : column,\r\n      }}\r\n    >\r\n      {lessons.map((l, i) => {\r\n        const column = isHalf ? 1 : l.coords.k + 1\r\n        const row = isHalf ? l.coords.z + 1 : 1\r\n\r\n        return <SingleCell key={i} column={column} row={row} lesson={l} />\r\n      })}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default HalfCell","import React from 'react'\r\nimport './Cell.sass'\r\n\r\nimport { PlainLesson } from '../../types/PlainLesson'\r\nimport SingleCell from './SingleCell'\r\n\r\ninterface QuarterCellProps\r\n{\r\n  column : number\r\n  row : number\r\n  lessons : PlainLesson[]\r\n}\r\n\r\nconst QuarterCell : React.FC<QuarterCellProps> = ({\r\n  column,\r\n  row,\r\n  lessons\r\n}) => {\r\n  return(\r\n    <div\r\n      className=\"cell__quarter\"\r\n      style={{\r\n        gridRow : row,\r\n        gridColumn : column,\r\n      }}\r\n    >\r\n      {lessons.map((l, i) => {\r\n        const column = l.coords.k + 1\r\n        const row = l.coords.z + 1\r\n\r\n        return <SingleCell key={i} column={column} row={row} lesson={l} />\r\n      })}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default QuarterCell","import React from 'react'\r\nimport './FullSchedule.sass'\r\n\r\nimport { Card } from '@vkontakte/vkui'\r\n\r\nimport SingleCell from '../Cell/SingleCell'\r\nimport HalfCell from '../Cell/HalfCell'\r\nimport QuarterCell from '../Cell/QuarterCell'\r\n\r\nimport { IDay } from '../../utils/fullSchedule'\r\nimport { PlainLesson } from '../../types/PlainLesson'\r\nimport { currentDay, fullSchedule } from '../../utils'\r\n\r\ninterface FullScheduleProps\r\n{\r\n  schedule : PlainLesson[]\r\n}\r\n\r\nconst HEADERS = [\r\n  'Время',\r\n  'Понедельник',\r\n  'Вторник',\r\n  'Среда',\r\n  'Четверг',\r\n  'Пятница',\r\n  'Суббота'\r\n]\r\n\r\nconst TIME = [\r\n  ['08:15', '09:50'],\r\n  ['10:00', '11:35'],\r\n  ['11:45', '12:35', '13:20','14:10'],\r\n  ['14:20', '15:55'],\r\n  ['16:05', '17:40'],\r\n  ['17:50', '19:25'],\r\n  ['19:35', '21:10'],\r\n]\r\n\r\nconst FullSchedule : React.FC<FullScheduleProps> = ({\r\n  schedule\r\n}) => {\r\n  const lastLessonNum = schedule.reduce((max : number, l) => {\r\n    const j = l.coords.j\r\n    const lessonNum = j > 2 ? j - 1 : j\r\n\r\n    return lessonNum > max ? lessonNum : max\r\n  }, 0)\r\n\r\n  const full = fullSchedule(schedule)\r\n\r\n  return(\r\n    <div className=\"card__wrapper-vertical\">\r\n      <div className=\"card__wrapper-horizontal\">\r\n        <div\r\n          className=\"card__container\"\r\n          style={{\r\n            gridTemplateRows : `18px repeat(${lastLessonNum + 1},auto)`\r\n          }}\r\n        >\r\n          {HEADERS.slice(0, full[full.length - 1].day + 2).map((h, i) => {\r\n            const cn = (currentDay() + 1 === i) ? 'current' : ''\r\n\r\n            return <div\r\n              key={i}\r\n              className={`card__cell card__cell-header ${cn}`}\r\n              style={{ gridRow : 1, gridColumn : i + 1 }}\r\n            >{h}</div>\r\n          })}\r\n          {TIME.slice(0, lastLessonNum + 1).map((time, i) => {\r\n            return <div\r\n              key={i}\r\n              className=\"card__cell card__cell-time\"\r\n              style={{ gridRow : i + 2, gridColumn : 1 }}\r\n            >\r\n              {time.map((t, j) => {\r\n                const cn = (i === 2 && (j === 1 || j === 3)) ? 'break-bottom' : ''\r\n\r\n                return <div key={j} className={cn}>{t}</div>\r\n              })}\r\n            </div>\r\n          })}\r\n          {\r\n            full.reduce((cells : React.ReactNode[], d : IDay) : React.ReactNode[] => {\r\n              const lessons = d.lessons.map(l => {\r\n                const column = d.day + 2\r\n                const row = l.lessonNum + 2\r\n\r\n                const isHalf = l.children[0].coords.z !== 2\r\n                const isHalfQuarter = l.children[0].coords.k !== 2\r\n                const isQuarter = isHalf && isHalfQuarter\r\n\r\n                const key = Object.values(l.children[0].coords).reduce((k : string,c : number) : string => k + c ,'')\r\n\r\n                if(isQuarter) return <QuarterCell key={key} column={column} row={row} lessons={l.children} />\r\n                else if(isHalf) return <HalfCell key={key} column={column} row={row} lessons={l.children} />\r\n                else if(isHalfQuarter) return <HalfCell key={key} column={column} row={row} lessons={l.children} />\r\n                else return <SingleCell key={key} column={column} row={row} lesson={l.children[0]} />\r\n              })\r\n\r\n              return [...cells, ...lessons] as React.ReactNode[]\r\n            }, [])\r\n          }\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default FullSchedule","import { Day } from \"../types/Day\";\r\nimport { Lesson } from \"../types/Lesson\";\r\nimport { PlainLesson } from \"../types/PlainLesson\";\r\n\r\ninterface ILesson\r\n{\r\n  lessonNum : Lesson\r\n  children : PlainLesson[]\r\n}\r\n\r\nexport interface IDay\r\n{\r\n  day : Day\r\n  lessons : ILesson[]\r\n}\r\n\r\nexport const fullSchedule = (schedule : PlainLesson[]) : IDay[] => {\r\n  const data : IDay[] = []\r\n\r\n  schedule.forEach((l,i) => {\r\n    const dayId = l.coords.i\r\n    const j = l.coords.j\r\n    const lessonId = (j > 2 ? j - 1 : j) as Lesson\r\n    \r\n    if(!data[dayId])\r\n      data[dayId] = { day : dayId, lessons : [] }\r\n      \r\n    if(!data[dayId].lessons[lessonId])\r\n      data[dayId].lessons[lessonId] = { lessonNum: lessonId, children: [] }\r\n      \r\n    data[dayId].lessons[lessonId].children.push(l)\r\n  })\r\n  \r\n  return data\r\n}","import React from 'react'\r\nimport './TabsSchedule.sass'\r\n\r\nimport { Tabs, TabsItem } from '@vkontakte/vkui'\r\n\r\nimport { Day } from '../../types/Day'\r\nimport { Week } from '../../types/Week'\r\nimport { currentDay, currentWeek } from '../../utils'\r\nimport { useDispatch } from 'react-redux'\r\nimport { changeDay, changeWeek } from '../../redux/slices/schedule'\r\n\r\nexport interface TabsScheduleProps\r\n{\r\n  week : Week\r\n  day : Day\r\n}\r\n\r\nconst DAYS = ['ПН','ВТ','СР','ЧТ','ПТ','СБ']\r\n\r\nconst TabsSchedule : React.FC<TabsScheduleProps> = ({\r\n  week,\r\n  day,\r\n}) => {\r\n  const dispatch = useDispatch()\r\n\r\n  return(\r\n    <>\r\n      <Tabs mode=\"default\" style={{ fontSize : '12px' }}>\r\n        <TabsItem\r\n          style={{ color : currentWeek() === 0 ? 'red' : '' }}\r\n          onClick={() => dispatch(changeWeek(0))} selected={week === 0}\r\n        >Числитель</TabsItem>\r\n        <TabsItem\r\n          style={{ color : currentWeek() === 1 ? 'red' : '' }}\r\n          onClick={() => dispatch(changeWeek(1))} selected={week === 1}\r\n        >Знаменатель</TabsItem>\r\n      </Tabs>\r\n      <Tabs mode=\"default\" style={{ fontSize : '12px' }}>\r\n        {DAYS.map((d, i) => {\r\n          const selected = i === day\r\n\r\n          return <TabsItem\r\n            key={i}\r\n            selected={selected}\r\n            style={{ color : currentDay() === i ? 'red' : '' }}\r\n            onClick={() => dispatch(changeDay(i as Day))}\r\n          >{d}</TabsItem>\r\n        })}\r\n      </Tabs>    \r\n    </>\r\n  )\r\n}\r\n\r\nexport default TabsSchedule","import React from 'react'\r\nimport { Gallery } from '@vkontakte/vkui'\r\n\r\nimport DayCard from '../DayCard'\r\nimport TabsSchedule from '../TabsSchedule'\r\nimport { selectDay } from '../../utils'\r\nimport { PlainLesson } from '../../types/PlainLesson'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { changeDay } from '../../redux/slices/schedule'\r\nimport { RootState } from '../../redux/rootReducer'\r\nimport { Day } from '../../types/Day'\r\n\r\ninterface ByDayProps\r\n{\r\n  schedule : PlainLesson[]\r\n}\r\n\r\nconst DAYS = [0,1,2,3,4,5]\r\n\r\nconst ByDay : React.FC<ByDayProps> = ({\r\n  schedule\r\n}) => {\r\n  const dispatch = useDispatch()\r\n  const { day, week } = useSelector((s : RootState) => s.schedule)\r\n  \r\n  const dayChange = (d : Day) => dispatch(changeDay(d))\r\n\r\n  return(\r\n    <>\r\n      <TabsSchedule week={week} day={day} />\r\n      <Gallery\r\n        style={{height:'100%'}}\r\n        slideIndex={day}\r\n        onChange={dayChange}\r\n      >\r\n        {DAYS.map(d => {\r\n          return <DayCard key={d} day={day} week={week} lessons={selectDay(schedule, d, week)} />\r\n        })}\r\n      </Gallery>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ByDay","import React from 'react'\r\n\r\nimport Icon28ArticleOutline from '@vkontakte/icons/dist/28/article_outline' // по дням\r\nimport Icon28GridSquareOutline from '@vkontakte/icons/dist/28/grid_square_outline' // полностью\r\nimport Icon28Users3Outline from '@vkontakte/icons/dist/28/users_3_outline' // экзамены\r\nimport Icon28FavoriteOutline from '@vkontakte/icons/dist/28/favorite_outline' // сохранить\r\nimport Icon28UnfavoriteOutline from '@vkontakte/icons/dist/28/unfavorite_outline' // удалить\r\nimport Icon28ViewOutline from '@vkontakte/icons/dist/28/view_outline' // разница\r\nimport Icon28HideOutline from '@vkontakte/icons/dist/28/hide_outline' // без разницы\r\n\r\nexport type MenuItemId =  'byDays' | 'full' | 'exams' | 'without_diff' | 'with_diff' | 'save' | 'delete'\r\n\r\ninterface MenuItemIconProps\r\n{\r\n  id : MenuItemId\r\n}\r\n\r\nconst MenuItemIcon : React.FC<MenuItemIconProps> = ({\r\n  id\r\n}) => {\r\n  switch(id)\r\n  {\r\n    case 'byDays': return <Icon28ArticleOutline />\r\n    case 'full': return <Icon28GridSquareOutline />\r\n    case 'exams': return <Icon28Users3Outline />\r\n    case 'save': return <Icon28FavoriteOutline fill=\"orange\" />\r\n    case 'delete': return <Icon28UnfavoriteOutline fill=\"red\" />\r\n    case 'with_diff': return <Icon28ViewOutline fill=\"#4bb34b\" />\r\n    case 'without_diff': return <Icon28HideOutline fill=\"gray\" />\r\n  }\r\n}\r\n\r\nexport default MenuItemIcon","import React from 'react'\r\nimport './Schedule.sass'\r\n\r\nimport { Button, Cell, List, Panel, PanelHeader, PanelHeaderBack, PanelHeaderContent, PanelHeaderContext, PanelSpinner, Placeholder } from \"@vkontakte/vkui\"\r\nimport Icon16Dropdown from '@vkontakte/icons/dist/16/dropdown'\r\nimport Icon24Done from '@vkontakte/icons/dist/24/done'\r\n\r\nimport Title from '../../components/Title'\r\nimport DayCard from '../../components/DayCard'\r\nimport FullSchedule from '../../components/FullSchedule'\r\nimport ByDay from '../../components/ByDay'\r\n\r\nimport { ILesson } from '../../types/ILesson'\r\nimport { PlainLesson } from '../../types/PlainLesson'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { RootState } from '../../redux/rootReducer'\r\nimport { changeMode, popHistory, requestSchedule, setIsDiff } from '../../redux/slices/schedule'\r\nimport { changePanel } from '../../redux/slices/navigation'\r\nimport { SCHEDULE_STORY, SEARCH_PANEL } from '../../constans'\r\nimport { addGroup, delGroup } from '../../redux/slices/profile'\r\nimport MenuItemIcon, { MenuItemId } from './MenuItemIcon'\r\nimport { getDiff } from '../../utils/'\r\n\r\ninterface ISchedulePanelProps\r\n{\r\n  id : string\r\n}\r\n\r\nexport type MenuItem = { text : string, id : string }\r\nconst MENU = [\r\n  { text : 'По дням', id : 'byDays' },\r\n  { text : 'Полностью', id : 'full' },\r\n  { text : 'Экзамены', id : 'exams' },\r\n  { text : 'Без разницы', id : 'without_diff' },\r\n  { text : 'Разница', id : 'with_diff' },\r\n  { text : 'Сохранить', id : 'save' },\r\n  { text : 'Удалить', id : 'delete' },\r\n]\r\n\r\nconst Schedule : React.FC<ISchedulePanelProps> = ({\r\n  id,\r\n}) => {\r\n  const dispatch = useDispatch()\r\n  const { activeMode, activeSchedule, loading, error, history, isDiff } = useSelector((s : RootState) => s.schedule)\r\n  const { user, loadingUser } = useSelector((s : RootState) => s.profile)\r\n\r\n  const [menuOpened, setMenuOpened] = React.useState<boolean>(false)\r\n  const toggleMenu = () => setMenuOpened(!menuOpened && !loading)\r\n\r\n  const selectMenuItem = (item : MenuItem) => {\r\n    if(item.id !== activeMode.id)\r\n    {\r\n      if(item.id === 'save' && user)\r\n      {\r\n        dispatch(addGroup({uid : user.id, group : history[history.length-1]}))\r\n        dispatch(setIsDiff(false))\r\n      }\r\n      else if(item.id === 'delete' && user)\r\n      {\r\n        dispatch(delGroup(user.id))\r\n        dispatch(setIsDiff(false))\r\n      }\r\n      else if(item.id === 'with_diff' || item.id === 'without_diff')\r\n      {\r\n        dispatch(setIsDiff(item.id === 'with_diff'))\r\n      }\r\n      else if(item.id === 'exams')\r\n      {\r\n        dispatch(changeMode(item))\r\n        dispatch(setIsDiff(false))\r\n      }\r\n      else dispatch(changeMode(item))\r\n    }\r\n\r\n    requestAnimationFrame(toggleMenu)\r\n  }\r\n\r\n  const goBack = () => {\r\n    dispatch(popHistory())\r\n\r\n    if(history.length < 2)\r\n      dispatch(changePanel({story : SCHEDULE_STORY, panel : SEARCH_PANEL}))\r\n  }\r\n\r\n  const handleError = () => {\r\n    dispatch(requestSchedule({href : history[history.length - 1], add : false}))\r\n  }\r\n\r\n  const diff = React.useMemo(() => {\r\n    if(isDiff && user && user.myGroup && activeSchedule)\r\n      return getDiff(activeSchedule.schedule as PlainLesson[], user.myGroup.schedule)\r\n\r\n    return []\r\n  }, [isDiff, user, activeSchedule])\r\n\r\n  return(\r\n    <Panel id={id}>\r\n      <PanelHeader left={<PanelHeaderBack onClick={goBack} />}>\r\n        <div onClick={toggleMenu} className='header'>\r\n          {activeMode.text}\r\n          <Icon16Dropdown fill='var(--accent)' style={{ transform: `rotate(${menuOpened && activeSchedule ? '180deg' : '0'})` }} />\r\n        </div>\r\n      </PanelHeader>\r\n      {activeSchedule &&\r\n        <PanelHeaderContext\r\n          opened={menuOpened}\r\n          onClose={toggleMenu}\r\n        >\r\n          <List>\r\n            {MENU.map((item,i) => {\r\n              const notExams = !activeSchedule?.exams && item.id === 'exams'\r\n              const examsSelected = activeMode.id === 'exams' && (item.id === 'with_diff' || item.id === 'without_diff')\r\n\r\n              const myGroup = user && user.group === activeSchedule.href\r\n              const myGroupSave = myGroup && item.id === 'save'\r\n              const notMyGroupDelete = !myGroup && item.id === 'delete'\r\n\r\n              const withoutDiff = isDiff && item.id === 'with_diff'\r\n              const withDiff = !isDiff && item.id === 'without_diff'\r\n              const ownDiff = (item.id === 'without_diff' || item.id === 'with_diff') && myGroup\r\n\r\n              const notUserGroup = user && !user.group && (item.id === 'with_diff' || item.id === 'without_diff')\r\n\r\n              if(\r\n                examsSelected ||\r\n                notExams ||\r\n                myGroupSave ||\r\n                notMyGroupDelete ||\r\n                withoutDiff ||\r\n                withDiff ||\r\n                ownDiff ||\r\n                notUserGroup\r\n              ) return\r\n\r\n              let cn = ''\r\n              if(item.id === 'save') cn = 'save'\r\n              else if(item.id === 'delete') cn = 'delete'\r\n\r\n              return <Cell\r\n                key={i}\r\n                before={<MenuItemIcon id={item.id as MenuItemId} />}\r\n                onClick={() => selectMenuItem(item)}\r\n                className={cn}\r\n                asideContent={activeMode.id === item.id ? <Icon24Done fill='var(--accent)' /> : null}\r\n              >{item.text}</Cell>\r\n            })}        \r\n          </List>\r\n        </PanelHeaderContext>\r\n      }\r\n      \r\n      {loading && <PanelSpinner />}\r\n      {error && \r\n        <Placeholder\r\n          action={<Button mode=\"tertiary\" onClick={handleError}>Попробовать еще</Button>}\r\n          stretched\r\n        >Произошла ошибка</Placeholder>\r\n      }\r\n      {activeSchedule && <>\r\n        <Title\r\n          href={activeSchedule.href}\r\n          isDiff={isDiff}\r\n          mySchedule={(user && user.group === activeSchedule.href) as boolean}\r\n          title={activeSchedule!.title}\r\n          loading={loadingUser}\r\n        />\r\n        {activeMode.id === 'exams' && <DayCard infoShow={false} lessons={activeSchedule!.exams as ILesson[]} />}\r\n        {activeMode.id === 'byDays' &&\r\n          <ByDay schedule={isDiff ? diff : activeSchedule.schedule as PlainLesson[]}/>\r\n        }\r\n        {activeMode.id === 'full' &&\r\n          <FullSchedule schedule={isDiff ? diff : activeSchedule.schedule as PlainLesson[]}/>\r\n        }\r\n      </>}\r\n    </Panel>\r\n  )\r\n}\r\n\r\nexport default Schedule","import { PlainLesson, Coords } from \"../types/PlainLesson\"\r\n\r\nexport const getDiff = (a : PlainLesson[], b : PlainLesson[]) : PlainLesson[] => {  \r\n  const isEqual = (a : Coords, b : Coords) : boolean => {\r\n    const dayEqual = a.i === b.i\r\n    const lessonNumEqual = a.j === b.j\r\n    const weekEqual = a.z === b.z || a.z === 2 || b.z === 2\r\n    const groupEqual = a.k === b.k || a.k === 2 || b.k === 2\r\n\r\n    return dayEqual && lessonNumEqual && weekEqual && groupEqual\r\n  }\r\n  \r\n  return a.filter(la => !b.find(lb => isEqual(la.coords, lb.coords)))\r\n}","import React from 'react'\r\nimport './Profile.sass'\r\n\r\nimport { Avatar, Banner, Button, Card, CardScroll, CellButton, Div, Group, Header, InfoRow, Link, Panel, PanelHeader, PanelHeaderButton, PanelSpinner, Placeholder, Progress, Snackbar, Spinner, usePlatform } from \"@vkontakte/vkui\"\r\nimport Icon28GlobeOutline from '@vkontakte/icons/dist/28/globe_outline'\r\nimport Icon16Favorite from '@vkontakte/icons/dist/16/favorite';\r\nimport Icon16OnlineMobile from '@vkontakte/icons/dist/16/online_mobile';\r\nimport Icon16Share from '@vkontakte/icons/dist/16/share';\r\nimport Icon16ErrorCircleOutline from '@vkontakte/icons/dist/16/error_circle_outline';\r\nimport Icon16DoneCircle from '@vkontakte/icons/dist/16/done_circle';\r\nimport Icon24NotificationOutline from '@vkontakte/icons/dist/24/notification_outline';\r\nimport Icon24NotificationSlashOutline from '@vkontakte/icons/dist/24/notification_slash_outline';\r\nimport Icon28SnowflakeOutline from '@vkontakte/icons/dist/28/snowflake_outline';\r\nimport Icon16Users from '@vkontakte/icons/dist/16/users';\r\nimport bridge from '@vkontakte/vk-bridge'\r\n\r\nimport bg1 from '../../assets/banner_bg.jpg'\r\nimport bg2 from '../../assets/banner_bg1.jpg'\r\n\r\nimport {currentWeek, toEnd } from '../../utils'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { changePanel, changeStory } from '../../redux/slices/navigation'\r\nimport { COUNT_LAST_SCHEDULES, MAP_PANEL, PROFILE_STORY, SCHEDULE_PANEL, SCHEDULE_STORY, SEARCH_PANEL } from '../../constans'\r\nimport { RootState } from '../../redux/rootReducer'\r\nimport { clearHistory, requestSchedule, setIsDiff } from '../../redux/slices/schedule'\r\nimport { delGroup, requestStreams } from '../../redux/slices/profile'\r\nimport { FromWhom } from '../../types/ILesson'\r\nimport { useLastSchedules } from '../../utils'\r\n\r\n\r\n\r\ninterface IProfilePanelProps\r\n{\r\n  id : string\r\n}\r\n\r\nconst Profile : React.FC<IProfilePanelProps> = ({\r\n  id,\r\n}) => {\r\n  const platform = usePlatform()\r\n  \r\n  const dispatch = useDispatch()\r\n  const {\r\n    user, loadingUser, errorUser, userId,\r\n    streams, loadingStreams, errorStreams,\r\n  } = useSelector((s : RootState) => s.profile)\r\n\r\n  const [snackbar, setSnackbar] = React.useState<React.ReactElement | null>(null)\r\n  const openSnackbar = (text : string) => {\r\n    setSnackbar(\r\n      <Snackbar\r\n        before={\r\n          <Avatar size={24} style={{backgroundColor:'var(--accent)'}}>\r\n            <Icon16DoneCircle fill=\"#fff\" width={14} height={14} />\r\n          </Avatar>\r\n        }\r\n        onClose={() => setSnackbar(null)}\r\n      >{text}</Snackbar>\r\n    )\r\n  }\r\n\r\n  const { setLast } = useLastSchedules(COUNT_LAST_SCHEDULES)\r\n  const [now, total, diff] = toEnd()\r\n\r\n  const goToSchedule = (s : FromWhom) => {\r\n    setLast(s)\r\n    dispatch(requestSchedule({href : s.href}))\r\n    dispatch(changeStory(SCHEDULE_STORY))\r\n    dispatch(changePanel({story:SCHEDULE_STORY,panel:SCHEDULE_PANEL}))\r\n  }\r\n\r\n  const addToFavorites = () => {\r\n    bridge.send('VKWebAppAddToFavorites')\r\n      .then(_=>openSnackbar('Добавлено в избранное'))\r\n      .catch(err=>err)\r\n  }\r\n\r\n  const allowNotifications = () => {\r\n    bridge.send('VKWebAppAllowNotifications')\r\n      .then(_=>openSnackbar('Уведомления разрешены'))\r\n      .catch(err=>err)\r\n  }\r\n  \r\n  const addToHomeScreen = () => {\r\n    bridge.send('VKWebAppAddToHomeScreen')\r\n      .then(res=>res)\r\n      .catch(err=>err)\r\n  }\r\n\r\n  const share = () => {\r\n    bridge.send('VKWebAppShare')\r\n      .then(res=>res)\r\n      .catch(err=>err)\r\n  }\r\n\r\n  const joinGroup = () => {\r\n    bridge.send('VKWebAppJoinGroup',{group_id:198278031})\r\n      .then(res=>res)\r\n      .catch(err=>err)    \r\n  }\r\n  \r\n  return(\r\n    <Panel id={id}>\r\n      <PanelHeader\r\n        left={\r\n          <PanelHeaderButton\r\n            onClick={() => dispatch(changePanel({story : PROFILE_STORY, panel : MAP_PANEL}))}\r\n          ><Icon28GlobeOutline /></PanelHeaderButton>\r\n        }\r\n      >Профиль</PanelHeader>\r\n\r\n      {!loadingUser && !errorUser &&\r\n        <Group>\r\n          <Banner\r\n            mode=\"image\"\r\n            header={`Текущая неделя : ${currentWeek() === 0 ? 'числитель' : 'знаменатель'}`}\r\n            subheader={`Конец семестра 30.05.2021г`}\r\n            background={\r\n              <div\r\n                style={{\r\n                  backgroundColor: '#65c063',\r\n                  backgroundImage: `url(${bg2})`,\r\n                  backgroundPosition: 'right bottom',\r\n                  backgroundSize: 320,\r\n                  backgroundRepeat: 'no-repeat',\r\n                }}\r\n              />\r\n            }\r\n            actions={\r\n              <InfoRow style={{marginTop:4}} header={`Осталось ${diff} дн.`}>\r\n                <Progress\r\n                  style={{width:'70%', marginTop : 8, background : 'gray'}}\r\n                  value={(now / total) * 100}\r\n                />\r\n              </InfoRow>\r\n            }\r\n          />\r\n\r\n          <Banner\r\n            mode=\"image\"\r\n            header=\"Конкурс\"\r\n            subheader=\"Выиграйте любые стикеры!\"\r\n            background={\r\n              <div\r\n                style={{\r\n                  backgroundColor: '#5b9be6',\r\n                  backgroundImage: `url(${bg1})`,\r\n                  backgroundPosition: 'right bottom',\r\n                  backgroundSize: '102%',\r\n                  backgroundRepeat: 'no-repeat',\r\n                }}\r\n              />\r\n            }\r\n            actions={\r\n              <Button mode=\"overlay_primary\" size=\"l\">\r\n                <Link\r\n                  target=\"_blank\"\r\n                  href=\"https://vk.com/wall-198278031_15\"\r\n                  style={{color:'black'}}\r\n                >Подробнее</Link>\r\n              </Button>\r\n            }\r\n          />\r\n\r\n          <Div style={{padding:'0px 12px'}}>\r\n            <Card className=\"card-wrapper\">\r\n              <Header>Трансляции</Header>\r\n              {streams.length === 0 && !loadingStreams &&\r\n                <CellButton\r\n                  onClick={() => dispatch(requestStreams())}\r\n                >Загрузить</CellButton>\r\n              }\r\n              {loadingStreams\r\n                ? <Spinner />\r\n                : errorStreams\r\n                  ? <Div style={{display:'flex', justifyContent:'center'}}>\r\n                      <Button\r\n                        mode=\"tertiary\"\r\n                        onClick={() => dispatch(requestStreams())}\r\n                      >Попробовать еще</Button>\r\n                  </Div>\r\n                  : <CardScroll>\r\n                      {streams.map((stream, i) => {\r\n                        return <Card\r\n                          key={i}\r\n                          className=\"card-stream\"\r\n                        ><Link href={stream.href}>{stream.title}</Link></Card>\r\n                        })\r\n                      }\r\n                    </CardScroll>\r\n              }\r\n              \r\n            </Card>\r\n          </Div>\r\n\r\n          <Div style={{paddingBottom : 0}}>\r\n            <Card>\r\n              <Header>Действия</Header>\r\n              <CellButton\r\n                before={<Icon16Favorite/>}\r\n                onClick={addToFavorites}\r\n                style={{color:'orange'}}\r\n              >В избранное</CellButton>\r\n              {platform === 'android' &&\r\n                <CellButton\r\n                  before={<Icon16OnlineMobile/>}\r\n                  onClick={addToHomeScreen}\r\n                >На дом. экран</CellButton>\r\n              }\r\n              <CellButton\r\n                before={<Icon16Users/>}\r\n                onClick={joinGroup}\r\n                style={{color:'green'}}\r\n              >Вступить в группу</CellButton>\r\n              <CellButton\r\n                before={<Icon16Share/>}\r\n                onClick={share}\r\n              >Поделиться</CellButton>\r\n            </Card>\r\n          </Div>\r\n\r\n          <Div style={{paddingBottom : 0}}>\r\n            <Card>\r\n              <Header>Ваше расписание</Header>\r\n              {user && user.myGroup\r\n                ? <>\r\n                  <CellButton\r\n                    onClick={() => goToSchedule(user.myGroup!)}\r\n                  >{user.myGroup.title}</CellButton>\r\n                  <CellButton\r\n                    onClick={() => {\r\n                      dispatch(setIsDiff(false))\r\n                      dispatch(delGroup(user.id))\r\n                    }}\r\n                    style={{color:'red'}}\r\n                  >Удалить расписание</CellButton>\r\n                </>\r\n                : <CellButton\r\n                    onClick={() => {\r\n                      dispatch(changeStory(SCHEDULE_STORY))\r\n                      dispatch(changePanel({story:SCHEDULE_STORY,panel:SEARCH_PANEL}))\r\n                      dispatch(clearHistory())\r\n                    }}\r\n                    style={{color:'orange'}}\r\n                  >Выбрать</CellButton>\r\n              }\r\n            </Card>\r\n          </Div>\r\n          {user && user.myGroup &&\r\n            <Div style={{padding:'0px 12px 12px 12px'}}>\r\n              <Card>\r\n                <Group\r\n                  header={<Header>{user.group.includes('t') ? 'Группы' : 'Преподаватели'}</Header>}\r\n                  style={{marginTop:8}}\r\n                >\r\n                  {user.fromWhoms.map((fw,i) => {\r\n                    return <CellButton\r\n                      key={i}\r\n                      onClick={() => goToSchedule(fw)}\r\n                    >{fw.title}</CellButton>\r\n                  })}\r\n                </Group>\r\n              </Card>\r\n            </Div>\r\n          }\r\n        </Group>\r\n      }\r\n\r\n      {snackbar}\r\n    </Panel>\r\n  )\r\n}\r\n\r\nexport default Profile","export const toEnd = () => {\r\n  const start = new Date(2021, 0, 25).getTime()\r\n  const now = new Date().getTime()\r\n  const end = new Date(2021, 4, 30).getTime()\r\n\r\n  const DAYS = 1000 * 60 * 60 * 24\r\n\r\n  const wasted = (now - start) / DAYS\r\n  const total  = (end - start) / DAYS\r\n  const diff   = (end - now) / DAYS\r\n\r\n  return [wasted < 0 ? 0 : wasted, total, diff].map(Math.floor)\r\n}","import React from 'react'\r\n\r\nimport { Cell, Div, Group, Panel, PanelHeader, PanelHeaderBack } from \"@vkontakte/vkui\"\r\n\r\nimport map from '../../assets/map.png'\r\nimport { useDispatch } from 'react-redux'\r\nimport { changePanel } from '../../redux/slices/navigation'\r\nimport { PROFILE_PANEL, PROFILE_STORY } from '../../constans'\r\n\r\ninterface IMapPanelProps\r\n{\r\n  id : string\r\n}\r\n\r\nconst Map : React.FC<IMapPanelProps> = ({\r\n  id,\r\n}) => {\r\n  const dispatch = useDispatch()\r\n  return(\r\n    <Panel id={id}>\r\n      <PanelHeader\r\n        left={\r\n          <PanelHeaderBack\r\n            onClick={() => dispatch(changePanel({story : PROFILE_STORY, panel : PROFILE_PANEL}))}\r\n          />\r\n        }\r\n      >Карта</PanelHeader>\r\n\r\n      <Div>\r\n        <img src={map} alt=\"карта\" style={{width:'100%'}}/>\r\n      </Div>\r\n\r\n      <Div>\r\n        <Group header=\"Расшифровка аббревиатур\">\r\n          <Cell>УК - учебный корпус</Cell>\r\n          <Cell>ГУК - главный учебный корпус</Cell>\r\n          <Cell>СДК - студенческий дворец культуры</Cell>\r\n          <Cell>УСК - учебно-спортивный комплекс</Cell>\r\n        </Group>\r\n      </Div>\r\n    </Panel>\r\n  )\r\n}\r\n\r\nexport default Map","import React from 'react'\r\nimport './Search.sass'\r\nimport schedules from '../../data/schedules.json'\r\n\r\nimport { Card, CardScroll, CellButton, FixedLayout, List, Panel, PanelHeader, PanelSpinner, Placeholder, Search } from \"@vkontakte/vkui\"\r\n\r\nimport { FromWhom } from '../../types/ILesson'\r\nimport { changePanel } from '../../redux/slices/navigation'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { COUNT_LAST_SCHEDULES, SCHEDULE_PANEL, SCHEDULE_STORY } from '../../constans'\r\nimport { setQuery, setLoading } from '../../redux/slices/search'\r\nimport { RootState } from '../../redux/rootReducer'\r\nimport { clearHistory, requestSchedule } from '../../redux/slices/schedule'\r\nimport { useLastSchedules } from '../../utils'\r\n\r\ninterface ISearchPanelProps\r\n{\r\n  id : string\r\n}\r\n\r\nconst SearchPanel : React.FC<ISearchPanelProps> = ({\r\n  id,\r\n}) => {\r\n\r\n  const dispatch = useDispatch()\r\n  const {query, loading} = useSelector((s : RootState) => s.search)\r\n  \r\n  const { last, setLast } = useLastSchedules(COUNT_LAST_SCHEDULES)\r\n\r\n  const filterSearch = (value : string) => (s : FromWhom) =>\r\n    s.title.toLowerCase().includes(value.toLowerCase())\r\n    \r\n  const [searchResult, setSearchResult] = React.useState<typeof schedules>(query ? schedules.filter(filterSearch(query)) : [])\r\n  React.useEffect(() => {\r\n    let tid : number | undefined\r\n    if(query)\r\n    {\r\n      tid = setTimeout(() => {\r\n        dispatch(setLoading(false))\r\n        setSearchResult(schedules.filter(filterSearch(query)))\r\n      }, 150) as unknown as number\r\n    }\r\n    else\r\n    {\r\n      dispatch(setLoading(false))\r\n      setSearchResult([])\r\n    }\r\n\r\n    return () => clearTimeout(tid)\r\n  }, [query])\r\n  const handleChange = (e : React.FormEvent<HTMLInputElement>) => {\r\n    dispatch(setQuery(e.currentTarget.value))\r\n    dispatch(setLoading(true))\r\n  }\r\n  \r\n  const goToSchedule = (s : FromWhom) => {\r\n    setLast(s)\r\n    dispatch(requestSchedule({href : s.href}))\r\n    dispatch(changePanel({ story : SCHEDULE_STORY, panel : SCHEDULE_PANEL }))\r\n  }\r\n\r\n  return(\r\n    <Panel id={id}>\r\n      <PanelHeader separator={false}>Поиск</PanelHeader>\r\n      <FixedLayout vertical=\"top\">\r\n        <Search\r\n          placeholder=\"Группа или преподаватель\"\r\n          value={query}\r\n          onChange={handleChange}\r\n          after={null}\r\n        />\r\n        {last.length !== 0 &&\r\n          <CardScroll>\r\n            {last.map(s => {\r\n              return <Card\r\n                key={s.href}\r\n                className=\"last-card\"\r\n                onClick={() => goToSchedule(s)}\r\n              >{s.title}</Card>\r\n            })}\r\n          </CardScroll>\r\n        }\r\n      </FixedLayout>\r\n      {\r\n        loading\r\n          ? <div style={{marginTop:100}}><PanelSpinner/></div>\r\n          : searchResult.length === 0\r\n            ? <Placeholder stretched>Ничего не найдено</Placeholder>\r\n            : (\r\n              <List style={{ marginTop : 52 + (last.length === 0 ? 0 : 50) }}>\r\n                {searchResult.map(s => {\r\n                  return <CellButton\r\n                    key={s.href}\r\n                    onClick={() => goToSchedule(s)}\r\n                  >{s.title}</CellButton>\r\n                })}\r\n              </List>\r\n            )\r\n      }\r\n\r\n    </Panel>\r\n  )\r\n}\r\n\r\nexport default SearchPanel","import React from 'react'\r\nimport './StaticsLesson.sass'\r\n\r\nimport { CellButton, Div, Group, InfoRow, ModalPage, ModalPageHeader, ModalRoot, PanelHeaderButton, Progress } from '@vkontakte/vkui'\r\nimport { getStatsLesson } from '../../utils'\r\nimport Title from '../Title'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { RootState } from '../../redux/rootReducer'\r\nimport { requestSchedule, setIsDiff, setSubject } from '../../redux/slices/schedule'\r\nimport { PlainLesson } from '../../types/PlainLesson'\r\nimport { FromWhom } from '../../types/ILesson'\r\nimport { useLastSchedules } from '../../utils'\r\nimport { COUNT_LAST_SCHEDULES } from '../../constans'\r\n\r\ninterface StaticsLessonProps{}\r\n\r\nconst TYPE_LESSON = {\r\n  lec : 'Лекции',\r\n  pr : 'Практики',\r\n  lab : 'Лабораторные'\r\n}\r\n\r\nconst StaticsLesson : React.FC<StaticsLessonProps> = ({\r\n  \r\n}) => {\r\n  const dispatch = useDispatch()\r\n  const { activeSubject, activeSchedule } = useSelector((s : RootState) => s.schedule)\r\n\r\n  const { setLast } = useLastSchedules(COUNT_LAST_SCHEDULES)\r\n\r\n  const closeModal = () => dispatch(setSubject(null))\r\n\r\n  const goToSchedule = (s : FromWhom) => {\r\n    setLast(s)\r\n    closeModal()\r\n    dispatch(requestSchedule({href : s.href}))\r\n    dispatch(setIsDiff(false))\r\n  }\r\n  \r\n  if(!activeSchedule) return null\r\n  \r\n  const data = getStatsLesson(activeSubject as string, activeSchedule.schedule)\r\n\r\n  return(\r\n    <ModalRoot\r\n      activeModal={activeSubject ? 'statics_lesson' : null}\r\n      onClose={closeModal}\r\n    >\r\n      <ModalPage\r\n        id=\"statics_lesson\"\r\n        dynamicContentHeight={true}\r\n        onClose={closeModal}\r\n        header={\r\n          <ModalPageHeader\r\n            right={<PanelHeaderButton onClick={closeModal}>Закрыть</PanelHeaderButton>}\r\n          >Статистика</ModalPageHeader>\r\n        }\r\n      >\r\n        <Title title={activeSubject as string}/>\r\n        <Div>\r\n          <Group header=\"Занятия\" separator=\"hide\">\r\n            {data && Object.entries(data.stats).map((entrie, i) => {\r\n              const [key, [now, total]] = entrie\r\n\r\n              if(total === 0) return\r\n\r\n              return(\r\n                <Div key={i}>\r\n                  <InfoRow header={`${TYPE_LESSON[key as keyof typeof TYPE_LESSON]} ${now}/${total}`}>\r\n                    <Progress className={`progress__${key}`} value={(now / total) * 100} />\r\n                  </InfoRow>\r\n                </Div>\r\n              )\r\n            })}\r\n          </Group>\r\n          {data && data.fromWhoms.length !== 0 &&\r\n            <Group header={activeSchedule.href.includes('t') ? 'Группы' : 'Преподаватели'} separator=\"hide\">\r\n              {data.fromWhoms.map(fw => {\r\n                return <CellButton\r\n                  key={fw.href}\r\n                  onClick={() => goToSchedule(fw)}\r\n                >{fw.title}</CellButton>\r\n              })}\r\n            </Group>\r\n          }\r\n        </Div>\r\n      </ModalPage>\r\n    </ModalRoot>\r\n  )\r\n}\r\n\r\nexport default StaticsLesson","// import weeks from '../data/weeks.json'\r\nimport weeks from '../data/weeks_new.json'\r\n\r\nimport { FromWhom } from '../types/ILesson'\r\nimport { PlainLesson } from '../types/PlainLesson'\r\n\r\nexport const getStatsLesson = (subject : string, schedule : PlainLesson[]) => {\r\n  const byWeek = [[0,0],[0,0],[0,0]]\r\n  const fromWhoms : FromWhom[] = []\r\n\r\n  const now = new Date()\r\n  \r\n  const dd = now.getDay()\r\n  const currentDay = dd === 0 ? 6 : dd - 1\r\n  \r\n  const d = now.getTime()\r\n  const currentWeekIndex = weeks.findIndex(({ date : [start, end] }) => start < d && d < end)\r\n  \r\n\r\n  schedule.forEach(l => {\r\n    if(l.subject === subject)\r\n    {\r\n      weeks.forEach((w, i) => {\r\n        const week = l.coords.z\r\n        const day = l.coords.i\r\n        const group = l.coords.k\r\n\r\n        if(week === w.week || week === 2)\r\n        {\r\n          if(\r\n            group !== 2 && (l.fromWhoms.length === 2 || week !== 2) ||\r\n            group === 2\r\n          )\r\n            byWeek[l.type][1]++\r\n          else\r\n            byWeek[l.type][1] += 0.5\r\n\r\n          if(\r\n            i < currentWeekIndex ||\r\n            i === currentWeekIndex && day <= currentDay\r\n          )\r\n          {\r\n            if(\r\n              group !== 2 && (l.fromWhoms.length === 2 || week !== 2) ||\r\n              group === 2\r\n            )\r\n              byWeek[l.type][0]++\r\n            else\r\n              byWeek[l.type][0] += 0.5\r\n          }\r\n        }\r\n      })\r\n\r\n      l.fromWhoms.map(fw => {\r\n        if(fromWhoms.find(_ => _.href === fw.href)) return\r\n\r\n        fromWhoms.push(fw)\r\n      })\r\n    }\r\n  })\r\n\r\n  return {\r\n    fromWhoms,\r\n    stats : {\r\n      lec : byWeek[0].map(Math.floor),\r\n      pr  : byWeek[1].map(Math.floor),\r\n      lab : byWeek[2].map(Math.floor),\r\n    },\r\n  }\r\n}","import React from 'react'\r\n\r\nimport bridge from '@vkontakte/vk-bridge'\r\nimport { Button, ConfigProvider, Epic, Placeholder, ScreenSpinner, Tabbar, TabbarItem, View } from '@vkontakte/vkui'\r\nimport Icon28UserCircleOutline from \"@vkontakte/icons/dist/28/user_circle_outline\"\r\nimport Icon28GridSquareOutline from \"@vkontakte/icons/dist/28/grid_square_outline\"\r\nimport Icon28SnowflakeOutline from '@vkontakte/icons/dist/28/snowflake_outline'\r\n\r\nimport Schedule from './panels/Schedule'\r\nimport Profile from './panels/Profile'\r\nimport Map from './panels/Map'\r\nimport SearchPanel from './panels/Search'\r\nimport StaticsLesson from './components/StaticsLesson'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { RootState } from './redux/rootReducer'\r\nimport { changePanel, changeStory } from './redux/slices/navigation'\r\nimport { SCHEDULE_PANEL, SCHEDULE_STORY, SEARCH_PANEL } from './constans'\r\nimport { requestStreams, requestUser } from './redux/slices/profile'\r\nimport { clearHistory } from './redux/slices/schedule'\r\n\r\nconst App : React.FC = () => {\r\n\tconst dispatch = useDispatch()\r\n\tconst { story, panels } = useSelector((s : RootState) => s.navigation)\r\n\tconst { loadingUser, errorUser, userId } = useSelector((s : RootState) => s.profile)\r\n\r\n\tconst changeActiveStory = (e : React.MouseEvent<HTMLDivElement>) => {\r\n\t\tconst newStory = e.currentTarget.dataset.story\r\n\t\tif(\r\n\t\t\tnewStory === SCHEDULE_STORY &&\r\n\t\t\tstory === SCHEDULE_STORY &&\r\n\t\t\tpanels.schedule === SCHEDULE_PANEL\r\n\t\t)\r\n\t\t{\r\n\t\t\tdispatch(changePanel({story:SCHEDULE_STORY, panel:SEARCH_PANEL}))\r\n\t\t\tdispatch(clearHistory())\r\n\t\t}\r\n\t\telse if(newStory === story) return\r\n\t\telse dispatch(changeStory(newStory))\r\n\t}\r\n\r\n\tReact.useEffect(() => {\r\n\t\tasync function init()\r\n\t\t{\r\n\t\t\tconst userData = await bridge.send('VKWebAppGetUserInfo')\r\n\t\t\tdispatch(requestUser(userData.id))\r\n\t\t}\r\n\r\n\t\tinit()\r\n\t},[])\r\n\r\n\tif(errorUser)\r\n\t\treturn (\r\n\t\t\t<Placeholder\r\n\t\t\t\taction={\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tmode=\"tertiary\"\r\n\t\t\t\t\t\tonClick={() => dispatch(requestUser(userId as number))}\r\n\t\t\t\t\t>Попробовать еще</Button>\r\n\t\t\t\t}\r\n\t\t\t\tstretched\r\n\t\t\t\tclassName=\"placeholder-error\"\r\n\t\t\t>\r\n\t\t\t\t<Icon28SnowflakeOutline fill=\"#2975cc\" width={64} height={64} style={{margin:'0 auto'}}/>\r\n\t\t\t\t<span>Произошла ошибка</span><br/>\r\n\t\t\t\t<span>сайт БГТУ ушел на каникулы</span>\r\n\t\t\t</Placeholder>\r\n\t\t)\r\n\t\r\n\treturn(\r\n\t\t<ConfigProvider isWebView={true}>\r\n\t\t\t<Epic\r\n\t\t\t\tactiveStory={story}\r\n\t\t\t\ttabbar={\r\n\t\t\t\t\t<Tabbar>\t\t\t\t\t\r\n\t\t\t\t\t\t<TabbarItem\r\n\t\t\t\t\t\t\tonClick={changeActiveStory}\r\n\t\t\t\t\t\t\tselected={story === 'schedule'}\r\n\t\t\t\t\t\t\tdata-story={'schedule'}\r\n\t\t\t\t\t\t\ttext=\"Расписание\"\r\n\t\t\t\t\t\t><Icon28GridSquareOutline/></TabbarItem>\r\n\t\t\t\t\t\t<TabbarItem\r\n\t\t\t\t\t\t\tonClick={changeActiveStory}\r\n\t\t\t\t\t\t\tselected={story === 'profile'}\r\n\t\t\t\t\t\t\tdata-story={'profile'}\r\n\t\t\t\t\t\t\ttext=\"Профиль\"\r\n\t\t\t\t\t\t><Icon28UserCircleOutline/></TabbarItem>\r\n\t\t\t\t\t</Tabbar>\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\t<View\r\n\t\t\t\t\tid={'schedule'}\r\n\t\t\t\t\tactivePanel={panels.schedule}\r\n\t\t\t\t\tmodal={<StaticsLesson />}\r\n\t\t\t\t>\r\n\t\t\t\t\t<SearchPanel id='search' />\r\n\t\t\t\t\t<Schedule id='schedule' />\r\n\t\t\t\t</View>\r\n\t\t\t\t<View\r\n\t\t\t\t\tid={'profile'}\r\n\t\t\t\t\tactivePanel={panels.profile}\r\n\t\t\t\t\tpopout={loadingUser ? <ScreenSpinner /> : null}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Profile id='profile' />\r\n\t\t\t\t\t<Map id='map' />\r\n\t\t\t\t</View>\t\t\r\n\t\t\t</Epic>\r\n\t\t</ConfigProvider>\r\n\t)\r\n}\r\n\r\nexport default App","import React from 'react'\r\n\r\nimport { Placeholder, Link} from \"@vkontakte/vkui\"\r\nimport Icon28MoonOutline from \"@vkontakte/icons/dist/28/moon_outline\"\r\n\r\nconst Sleep = ({ }) => {\r\n  return(\r\n    <Placeholder\r\n      icon={<Icon28MoonOutline width={56} height={56} />}\r\n      action={\r\n        <>\r\n          <Link href={`http://www.bstu.ru/about/useful/schedule`}>Посмотреть расписание на сайте</Link>\r\n          <br /><br/>\r\n          <Link href={`https://vk.com/club198278031`}>Группа приложения</Link>        \r\n        </>\r\n      }\r\n      stretched\r\n    >\r\n      Приложение отдыхает<br/> с 23:00 до 07:00 каждого дня\r\n    </Placeholder>\r\n  )\r\n}\r\n\r\nexport default Sleep","import React from 'react'\r\n\r\nimport store from '../../redux/store'\r\nimport { Provider } from 'react-redux'\r\n\r\nimport App from '../../App'\r\nimport Sleep from '../../panels/Sleep'\r\n\r\nconst Switcher = () => {\r\n  const hours = new Date().getUTCHours()\r\n  \r\n  return (hours >= 20 || hours < 4) ? <Sleep /> : <Provider store={store}><App /></Provider>\r\n}\r\n\r\nexport default Switcher","import 'core-js/features/map'\r\nimport 'core-js/features/set'\r\n\r\nimport React from 'react'\r\nimport ReactDOM from 'react-dom'\r\n\r\nimport bridge from '@vkontakte/vk-bridge'\r\nimport '@vkontakte/vkui/dist/vkui.css'\r\n\r\nimport './index.sass'\r\nimport Switcher from './components/Switcher'\r\n\r\n// import eruda from 'eruda'\r\n// eruda.init()\r\n\r\nbridge.send('VKWebAppInit')\r\nbridge.subscribe(e => {\r\n  if(e.detail.type === 'VKWebAppUpdateConfig')\r\n    document.body.setAttribute('scheme', e.detail.data.scheme)\r\n})\r\n\r\nReactDOM.render(<Switcher />, document.getElementById('root'))"],"sourceRoot":""}